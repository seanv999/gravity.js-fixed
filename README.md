# gravity.js

```js
javascript:(function()%7Bif (window.jQuery !%3D 'undefined')%7B%0A%0A%09(function(A%2Cw)%7Bfunction ma()%7Bif(!c.isReady)%7Btry%7Bs.documentElement.doScroll("left")%7Dcatch(a)%7BsetTimeout(ma%2C1)%3Breturn%7Dc.ready()%7D%7Dfunction Qa(a%2Cb)%7Bb.src%3Fc.ajax(%7Burl%3Ab.src%2Casync%3Afalse%2CdataType%3A"script"%7D)%3Ac.globalEval(b.text%7C%7Cb.textContent%7C%7Cb.innerHTML%7C%7C"")%3Bb.parentNode%26%26b.parentNode.removeChild(b)%7Dfunction X(a%2Cb%2Cd%2Cf%2Ce%2Cj)%7Bvar i%3Da.length%3Bif(typeof b%3D%3D%3D"object")%7Bfor(var o in b)X(a%2Co%2Cb%5Bo%5D%2Cf%2Ce%2Cd)%3Breturn a%7Dif(d!%3D%3Dw)%7Bf%3D!j%26%26f%26%26c.isFunction(d)%3Bfor(o%3D0%3Bo<i%3Bo%2B%2B)e(a%5Bo%5D%2Cb%2Cf%3Fd.call(a%5Bo%5D%2Co%2Ce(a%5Bo%5D%2Cb))%3Ad%2Cj)%3Breturn a%7Dreturn i%3F%0A%09e(a%5B0%5D%2Cb)%3Aw%7Dfunction J()%7Breturn(new Date).getTime()%7Dfunction Y()%7Breturn false%7Dfunction Z()%7Breturn true%7Dfunction na(a%2Cb%2Cd)%7Bd%5B0%5D.type%3Da%3Breturn c.event.handle.apply(b%2Cd)%7Dfunction oa(a)%7Bvar b%2Cd%3D%5B%5D%2Cf%3D%5B%5D%2Ce%3Darguments%2Cj%2Ci%2Co%2Ck%2Cn%2Cr%3Bi%3Dc.data(this%2C"events")%3Bif(!(a.liveFired%3D%3D%3Dthis%7C%7C!i%7C%7C!i.live%7C%7Ca.button%26%26a.type%3D%3D%3D"click"))%7Ba.liveFired%3Dthis%3Bvar u%3Di.live.slice(0)%3Bfor(k%3D0%3Bk<u.length%3Bk%2B%2B)%7Bi%3Du%5Bk%5D%3Bi.origType.replace(O%2C"")%3D%3D%3Da.type%3Ff.push(i.selector)%3Au.splice(k--%2C1)%7Dj%3Dc(a.target).closest(f%2Ca.currentTarget)%3Bn%3D0%3Bfor(r%3D%0A%09j.length%3Bn<r%3Bn%2B%2B)for(k%3D0%3Bk<u.length%3Bk%2B%2B)%7Bi%3Du%5Bk%5D%3Bif(j%5Bn%5D.selector%3D%3D%3Di.selector)%7Bo%3Dj%5Bn%5D.elem%3Bf%3Dnull%3Bif(i.preType%3D%3D%3D"mouseenter"%7C%7Ci.preType%3D%3D%3D"mouseleave")f%3Dc(a.relatedTarget).closest(i.selector)%5B0%5D%3Bif(!f%7C%7Cf!%3D%3Do)d.push(%7Belem%3Ao%2ChandleObj%3Ai%7D)%7D%7Dn%3D0%3Bfor(r%3Dd.length%3Bn<r%3Bn%2B%2B)%7Bj%3Dd%5Bn%5D%3Ba.currentTarget%3Dj.elem%3Ba.data%3Dj.handleObj.data%3Ba.handleObj%3Dj.handleObj%3Bif(j.handleObj.origHandler.apply(j.elem%2Ce)%3D%3D%3Dfalse)%7Bb%3Dfalse%3Bbreak%7D%7Dreturn b%7D%7Dfunction pa(a%2Cb)%7Breturn"live."%2B(a%26%26a!%3D%3D"*"%3Fa%2B"."%3A"")%2Bb.replace(%2F%5C.%2Fg%2C"%60").replace(%2F %2Fg%2C%0A%09"%26")%7Dfunction qa(a)%7Breturn!a%7C%7C!a.parentNode%7C%7Ca.parentNode.nodeType%3D%3D%3D11%7Dfunction ra(a%2Cb)%7Bvar d%3D0%3Bb.each(function()%7Bif(this.nodeName%3D%3D%3D(a%5Bd%5D%26%26a%5Bd%5D.nodeName))%7Bvar f%3Dc.data(a%5Bd%2B%2B%5D)%2Ce%3Dc.data(this%2Cf)%3Bif(f%3Df%26%26f.events)%7Bdelete e.handle%3Be.events%3D%7B%7D%3Bfor(var j in f)for(var i in f%5Bj%5D)c.event.add(this%2Cj%2Cf%5Bj%5D%5Bi%5D%2Cf%5Bj%5D%5Bi%5D.data)%7D%7D%7D)%7Dfunction sa(a%2Cb%2Cd)%7Bvar f%2Ce%2Cj%3Bb%3Db%26%26b%5B0%5D%3Fb%5B0%5D.ownerDocument%7C%7Cb%5B0%5D%3As%3Bif(a.length%3D%3D%3D1%26%26typeof a%5B0%5D%3D%3D%3D"string"%26%26a%5B0%5D.length<512%26%26b%3D%3D%3Ds%26%26!ta.test(a%5B0%5D)%26%26(c.support.checkClone%7C%7C!ua.test(a%5B0%5D)))%7Be%3D%0A%09true%3Bif(j%3Dc.fragments%5Ba%5B0%5D%5D)if(j!%3D%3D1)f%3Dj%7Dif(!f)%7Bf%3Db.createDocumentFragment()%3Bc.clean(a%2Cb%2Cf%2Cd)%7Dif(e)c.fragments%5Ba%5B0%5D%5D%3Dj%3Ff%3A1%3Breturn%7Bfragment%3Af%2Ccacheable%3Ae%7D%7Dfunction K(a%2Cb)%7Bvar d%3D%7B%7D%3Bc.each(va.concat.apply(%5B%5D%2Cva.slice(0%2Cb))%2Cfunction()%7Bd%5Bthis%5D%3Da%7D)%3Breturn d%7Dfunction wa(a)%7Breturn"scrollTo"in a%26%26a.document%3Fa%3Aa.nodeType%3D%3D%3D9%3Fa.defaultView%7C%7Ca.parentWindow%3Afalse%7Dvar c%3Dfunction(a%2Cb)%7Breturn new c.fn.init(a%2Cb)%7D%2CRa%3DA.jQuery%2CSa%3DA.%24%2Cs%3DA.document%2CT%2CTa%3D%2F%5E%5B%5E<%5D*(<%5B%5Cw%5CW%5D%2B>)%5B%5E>%5D*%24%7C%5E%23(%5B%5Cw-%5D%2B)%24%2F%2CUa%3D%2F%5E.%5B%5E%3A%23%5C%5B%5C.%2C%5D*%24%2F%2CVa%3D%2F%5CS%2F%2C%0A%09Wa%3D%2F%5E(%5Cs%7C%5Cu00A0)%2B%7C(%5Cs%7C%5Cu00A0)%2B%24%2Fg%2CXa%3D%2F%5E<(%5Cw%2B)%5Cs*%5C%2F%3F>(%3F%3A<%5C%2F%5C1>)%3F%24%2F%2CP%3Dnavigator.userAgent%2Cxa%3Dfalse%2CQ%3D%5B%5D%2CL%2C%24%3DObject.prototype.toString%2Caa%3DObject.prototype.hasOwnProperty%2Cba%3DArray.prototype.push%2CR%3DArray.prototype.slice%2Cya%3DArray.prototype.indexOf%3Bc.fn%3Dc.prototype%3D%7Binit%3Afunction(a%2Cb)%7Bvar d%2Cf%3Bif(!a)return this%3Bif(a.nodeType)%7Bthis.context%3Dthis%5B0%5D%3Da%3Bthis.length%3D1%3Breturn this%7Dif(a%3D%3D%3D"body"%26%26!b)%7Bthis.context%3Ds%3Bthis%5B0%5D%3Ds.body%3Bthis.selector%3D"body"%3Bthis.length%3D1%3Breturn this%7Dif(typeof a%3D%3D%3D"string")if((d%3DTa.exec(a))%26%26%0A%09(d%5B1%5D%7C%7C!b))if(d%5B1%5D)%7Bf%3Db%3Fb.ownerDocument%7C%7Cb%3As%3Bif(a%3DXa.exec(a))if(c.isPlainObject(b))%7Ba%3D%5Bs.createElement(a%5B1%5D)%5D%3Bc.fn.attr.call(a%2Cb%2Ctrue)%7Delse a%3D%5Bf.createElement(a%5B1%5D)%5D%3Belse%7Ba%3Dsa(%5Bd%5B1%5D%5D%2C%5Bf%5D)%3Ba%3D(a.cacheable%3Fa.fragment.cloneNode(true)%3Aa.fragment).childNodes%7Dreturn c.merge(this%2Ca)%7Delse%7Bif(b%3Ds.getElementById(d%5B2%5D))%7Bif(b.id!%3D%3Dd%5B2%5D)return T.find(a)%3Bthis.length%3D1%3Bthis%5B0%5D%3Db%7Dthis.context%3Ds%3Bthis.selector%3Da%3Breturn this%7Delse if(!b%26%26%2F%5E%5Cw%2B%24%2F.test(a))%7Bthis.selector%3Da%3Bthis.context%3Ds%3Ba%3Ds.getElementsByTagName(a)%3Breturn c.merge(this%2C%0A%09a)%7Delse return!b%7C%7Cb.jquery%3F(b%7C%7CT).find(a)%3Ac(b).find(a)%3Belse if(c.isFunction(a))return T.ready(a)%3Bif(a.selector!%3D%3Dw)%7Bthis.selector%3Da.selector%3Bthis.context%3Da.context%7Dreturn c.makeArray(a%2Cthis)%7D%2Cselector%3A""%2Cjquery%3A"1.4.2"%2Clength%3A0%2Csize%3Afunction()%7Breturn this.length%7D%2CtoArray%3Afunction()%7Breturn R.call(this%2C0)%7D%2Cget%3Afunction(a)%7Breturn a%3D%3Dnull%3Fthis.toArray()%3Aa<0%3Fthis.slice(a)%5B0%5D%3Athis%5Ba%5D%7D%2CpushStack%3Afunction(a%2Cb%2Cd)%7Bvar f%3Dc()%3Bc.isArray(a)%3Fba.apply(f%2Ca)%3Ac.merge(f%2Ca)%3Bf.prevObject%3Dthis%3Bf.context%3Dthis.context%3Bif(b%3D%3D%3D%0A%09"find")f.selector%3Dthis.selector%2B(this.selector%3F" "%3A"")%2Bd%3Belse if(b)f.selector%3Dthis.selector%2B"."%2Bb%2B"("%2Bd%2B")"%3Breturn f%7D%2Ceach%3Afunction(a%2Cb)%7Breturn c.each(this%2Ca%2Cb)%7D%2Cready%3Afunction(a)%7Bc.bindReady()%3Bif(c.isReady)a.call(s%2Cc)%3Belse Q%26%26Q.push(a)%3Breturn this%7D%2Ceq%3Afunction(a)%7Breturn a%3D%3D%3D-1%3Fthis.slice(a)%3Athis.slice(a%2C%2Ba%2B1)%7D%2Cfirst%3Afunction()%7Breturn this.eq(0)%7D%2Clast%3Afunction()%7Breturn this.eq(-1)%7D%2Cslice%3Afunction()%7Breturn this.pushStack(R.apply(this%2Carguments)%2C"slice"%2CR.call(arguments).join("%2C"))%7D%2Cmap%3Afunction(a)%7Breturn this.pushStack(c.map(this%2C%0A%09function(b%2Cd)%7Breturn a.call(b%2Cd%2Cb)%7D))%7D%2Cend%3Afunction()%7Breturn this.prevObject%7C%7Cc(null)%7D%2Cpush%3Aba%2Csort%3A%5B%5D.sort%2Csplice%3A%5B%5D.splice%7D%3Bc.fn.init.prototype%3Dc.fn%3Bc.extend%3Dc.fn.extend%3Dfunction()%7Bvar a%3Darguments%5B0%5D%7C%7C%7B%7D%2Cb%3D1%2Cd%3Darguments.length%2Cf%3Dfalse%2Ce%2Cj%2Ci%2Co%3Bif(typeof a%3D%3D%3D"boolean")%7Bf%3Da%3Ba%3Darguments%5B1%5D%7C%7C%7B%7D%3Bb%3D2%7Dif(typeof a!%3D%3D"object"%26%26!c.isFunction(a))a%3D%7B%7D%3Bif(d%3D%3D%3Db)%7Ba%3Dthis%3B--b%7Dfor(%3Bb<d%3Bb%2B%2B)if((e%3Darguments%5Bb%5D)!%3Dnull)for(j in e)%7Bi%3Da%5Bj%5D%3Bo%3De%5Bj%5D%3Bif(a!%3D%3Do)if(f%26%26o%26%26(c.isPlainObject(o)%7C%7Cc.isArray(o)))%7Bi%3Di%26%26(c.isPlainObject(i)%7C%7C%0A%09c.isArray(i))%3Fi%3Ac.isArray(o)%3F%5B%5D%3A%7B%7D%3Ba%5Bj%5D%3Dc.extend(f%2Ci%2Co)%7Delse if(o!%3D%3Dw)a%5Bj%5D%3Do%7Dreturn a%7D%3Bc.extend(%7BnoConflict%3Afunction(a)%7BA.%24%3DSa%3Bif(a)A.jQuery%3DRa%3Breturn c%7D%2CisReady%3Afalse%2Cready%3Afunction()%7Bif(!c.isReady)%7Bif(!s.body)return setTimeout(c.ready%2C13)%3Bc.isReady%3Dtrue%3Bif(Q)%7Bfor(var a%2Cb%3D0%3Ba%3DQ%5Bb%2B%2B%5D%3B)a.call(s%2Cc)%3BQ%3Dnull%7Dc.fn.triggerHandler%26%26c(s).triggerHandler("ready")%7D%7D%2CbindReady%3Afunction()%7Bif(!xa)%7Bxa%3Dtrue%3Bif(s.readyState%3D%3D%3D"complete")return c.ready()%3Bif(s.addEventListener)%7Bs.addEventListener("DOMContentLoaded"%2C%0A%09L%2Cfalse)%3BA.addEventListener("load"%2Cc.ready%2Cfalse)%7Delse if(s.attachEvent)%7Bs.attachEvent("onreadystatechange"%2CL)%3BA.attachEvent("onload"%2Cc.ready)%3Bvar a%3Dfalse%3Btry%7Ba%3DA.frameElement%3D%3Dnull%7Dcatch(b)%7B%7Ds.documentElement.doScroll%26%26a%26%26ma()%7D%7D%7D%2CisFunction%3Afunction(a)%7Breturn %24.call(a)%3D%3D%3D"%5Bobject Function%5D"%7D%2CisArray%3Afunction(a)%7Breturn %24.call(a)%3D%3D%3D"%5Bobject Array%5D"%7D%2CisPlainObject%3Afunction(a)%7Bif(!a%7C%7C%24.call(a)!%3D%3D"%5Bobject Object%5D"%7C%7Ca.nodeType%7C%7Ca.setInterval)return false%3Bif(a.constructor%26%26!aa.call(a%2C"constructor")%26%26!aa.call(a.constructor.prototype%2C%0A%09"isPrototypeOf"))return false%3Bvar b%3Bfor(b in a)%3Breturn b%3D%3D%3Dw%7C%7Caa.call(a%2Cb)%7D%2CisEmptyObject%3Afunction(a)%7Bfor(var b in a)return false%3Breturn true%7D%2Cerror%3Afunction(a)%7Bthrow a%3B%7D%2CparseJSON%3Afunction(a)%7Bif(typeof a!%3D%3D"string"%7C%7C!a)return null%3Ba%3Dc.trim(a)%3Bif(%2F%5E%5B%5C%5D%2C%3A%7B%7D%5Cs%5D*%24%2F.test(a.replace(%2F%5C%5C(%3F%3A%5B"%5C%5C%5C%2Fbfnrt%5D%7Cu%5B0-9a-fA-F%5D%7B4%7D)%2Fg%2C"%40").replace(%2F"%5B%5E"%5C%5C%5Cn%5Cr%5D*"%7Ctrue%7Cfalse%7Cnull%7C-%3F%5Cd%2B(%3F%3A%5C.%5Cd*)%3F(%3F%3A%5BeE%5D%5B%2B%5C-%5D%3F%5Cd%2B)%3F%2Fg%2C"%5D").replace(%2F(%3F%3A%5E%7C%3A%7C%2C)(%3F%3A%5Cs*%5C%5B)%2B%2Fg%2C"")))return A.JSON%26%26A.JSON.parse%3FA.JSON.parse(a)%3A(new Function("return "%2B%0A%09a))()%3Belse c.error("Invalid JSON%3A "%2Ba)%7D%2Cnoop%3Afunction()%7B%7D%2CglobalEval%3Afunction(a)%7Bif(a%26%26Va.test(a))%7Bvar b%3Ds.getElementsByTagName("head")%5B0%5D%7C%7Cs.documentElement%2Cd%3Ds.createElement("script")%3Bd.type%3D"text%2Fjavascript"%3Bif(c.support.scriptEval)d.appendChild(s.createTextNode(a))%3Belse d.text%3Da%3Bb.insertBefore(d%2Cb.firstChild)%3Bb.removeChild(d)%7D%7D%2CnodeName%3Afunction(a%2Cb)%7Breturn a.nodeName%26%26a.nodeName.toUpperCase()%3D%3D%3Db.toUpperCase()%7D%2Ceach%3Afunction(a%2Cb%2Cd)%7Bvar f%2Ce%3D0%2Cj%3Da.length%2Ci%3Dj%3D%3D%3Dw%7C%7Cc.isFunction(a)%3Bif(d)if(i)for(f in a)%7Bif(b.apply(a%5Bf%5D%2C%0A%09d)%3D%3D%3Dfalse)break%7Delse for(%3Be<j%3B)%7Bif(b.apply(a%5Be%2B%2B%5D%2Cd)%3D%3D%3Dfalse)break%7Delse if(i)for(f in a)%7Bif(b.call(a%5Bf%5D%2Cf%2Ca%5Bf%5D)%3D%3D%3Dfalse)break%7Delse for(d%3Da%5B0%5D%3Be<j%26%26b.call(d%2Ce%2Cd)!%3D%3Dfalse%3Bd%3Da%5B%2B%2Be%5D)%3Breturn a%7D%2Ctrim%3Afunction(a)%7Breturn(a%7C%7C"").replace(Wa%2C"")%7D%2CmakeArray%3Afunction(a%2Cb)%7Bb%3Db%7C%7C%5B%5D%3Bif(a!%3Dnull)a.length%3D%3Dnull%7C%7Ctypeof a%3D%3D%3D"string"%7C%7Cc.isFunction(a)%7C%7Ctypeof a!%3D%3D"function"%26%26a.setInterval%3Fba.call(b%2Ca)%3Ac.merge(b%2Ca)%3Breturn b%7D%2CinArray%3Afunction(a%2Cb)%7Bif(b.indexOf)return b.indexOf(a)%3Bfor(var d%3D0%2Cf%3Db.length%3Bd<f%3Bd%2B%2B)if(b%5Bd%5D%3D%3D%3D%0A%09a)return d%3Breturn-1%7D%2Cmerge%3Afunction(a%2Cb)%7Bvar d%3Da.length%2Cf%3D0%3Bif(typeof b.length%3D%3D%3D"number")for(var e%3Db.length%3Bf<e%3Bf%2B%2B)a%5Bd%2B%2B%5D%3Db%5Bf%5D%3Belse for(%3Bb%5Bf%5D!%3D%3Dw%3B)a%5Bd%2B%2B%5D%3Db%5Bf%2B%2B%5D%3Ba.length%3Dd%3Breturn a%7D%2Cgrep%3Afunction(a%2Cb%2Cd)%7Bfor(var f%3D%5B%5D%2Ce%3D0%2Cj%3Da.length%3Be<j%3Be%2B%2B)!d!%3D%3D!b(a%5Be%5D%2Ce)%26%26f.push(a%5Be%5D)%3Breturn f%7D%2Cmap%3Afunction(a%2Cb%2Cd)%7Bfor(var f%3D%5B%5D%2Ce%2Cj%3D0%2Ci%3Da.length%3Bj<i%3Bj%2B%2B)%7Be%3Db(a%5Bj%5D%2Cj%2Cd)%3Bif(e!%3Dnull)f%5Bf.length%5D%3De%7Dreturn f.concat.apply(%5B%5D%2Cf)%7D%2Cguid%3A1%2Cproxy%3Afunction(a%2Cb%2Cd)%7Bif(arguments.length%3D%3D%3D2)if(typeof b%3D%3D%3D"string")%7Bd%3Da%3Ba%3Dd%5Bb%5D%3Bb%3Dw%7Delse if(b%26%26%0A%09!c.isFunction(b))%7Bd%3Db%3Bb%3Dw%7Dif(!b%26%26a)b%3Dfunction()%7Breturn a.apply(d%7C%7Cthis%2Carguments)%7D%3Bif(a)b.guid%3Da.guid%3Da.guid%7C%7Cb.guid%7C%7Cc.guid%2B%2B%3Breturn b%7D%2CuaMatch%3Afunction(a)%7Ba%3Da.toLowerCase()%3Ba%3D%2F(webkit)%5B %5C%2F%5D(%5B%5Cw.%5D%2B)%2F.exec(a)%7C%7C%2F(opera)(%3F%3A.*version)%3F%5B %5C%2F%5D(%5B%5Cw.%5D%2B)%2F.exec(a)%7C%7C%2F(msie) (%5B%5Cw.%5D%2B)%2F.exec(a)%7C%7C!%2Fcompatible%2F.test(a)%26%26%2F(mozilla)(%3F%3A.*%3F rv%3A(%5B%5Cw.%5D%2B))%3F%2F.exec(a)%7C%7C%5B%5D%3Breturn%7Bbrowser%3Aa%5B1%5D%7C%7C""%2Cversion%3Aa%5B2%5D%7C%7C"0"%7D%7D%2Cbrowser%3A%7B%7D%7D)%3BP%3Dc.uaMatch(P)%3Bif(P.browser)%7Bc.browser%5BP.browser%5D%3Dtrue%3Bc.browser.version%3DP.version%7Dif(c.browser.webkit)c.browser.safari%3D%0A%09true%3Bif(ya)c.inArray%3Dfunction(a%2Cb)%7Breturn ya.call(b%2Ca)%7D%3BT%3Dc(s)%3Bif(s.addEventListener)L%3Dfunction()%7Bs.removeEventListener("DOMContentLoaded"%2CL%2Cfalse)%3Bc.ready()%7D%3Belse if(s.attachEvent)L%3Dfunction()%7Bif(s.readyState%3D%3D%3D"complete")%7Bs.detachEvent("onreadystatechange"%2CL)%3Bc.ready()%7D%7D%3B(function()%7Bc.support%3D%7B%7D%3Bvar a%3Ds.documentElement%2Cb%3Ds.createElement("script")%2Cd%3Ds.createElement("div")%2Cf%3D"script"%2BJ()%3Bd.style.display%3D"none"%3Bd.innerHTML%3D"   <link%2F><table><%2Ftable><a href%3D'%2Fa' style%3D'color%3Ared%3Bfloat%3Aleft%3Bopacity%3A.55%3B'>a<%2Fa><input type%3D'checkbox'%2F>"%3B%0A%09var e%3Dd.getElementsByTagName("*")%2Cj%3Dd.getElementsByTagName("a")%5B0%5D%3Bif(!(!e%7C%7C!e.length%7C%7C!j))%7Bc.support%3D%7BleadingWhitespace%3Ad.firstChild.nodeType%3D%3D%3D3%2Ctbody%3A!d.getElementsByTagName("tbody").length%2ChtmlSerialize%3A!!d.getElementsByTagName("link").length%2Cstyle%3A%2Fred%2F.test(j.getAttribute("style"))%2ChrefNormalized%3Aj.getAttribute("href")%3D%3D%3D"%2Fa"%2Copacity%3A%2F%5E0.55%24%2F.test(j.style.opacity)%2CcssFloat%3A!!j.style.cssFloat%2CcheckOn%3Ad.getElementsByTagName("input")%5B0%5D.value%3D%3D%3D"on"%2CoptSelected%3As.createElement("select").appendChild(s.createElement("option")).selected%2C%0A%09parentNode%3Ad.removeChild(d.appendChild(s.createElement("div"))).parentNode%3D%3D%3Dnull%2CdeleteExpando%3Atrue%2CcheckClone%3Afalse%2CscriptEval%3Afalse%2CnoCloneEvent%3Atrue%2CboxModel%3Anull%7D%3Bb.type%3D"text%2Fjavascript"%3Btry%7Bb.appendChild(s.createTextNode("window."%2Bf%2B"%3D1%3B"))%7Dcatch(i)%7B%7Da.insertBefore(b%2Ca.firstChild)%3Bif(A%5Bf%5D)%7Bc.support.scriptEval%3Dtrue%3Bdelete A%5Bf%5D%7Dtry%7Bdelete b.test%7Dcatch(o)%7Bc.support.deleteExpando%3Dfalse%7Da.removeChild(b)%3Bif(d.attachEvent%26%26d.fireEvent)%7Bd.attachEvent("onclick"%2Cfunction k()%7Bc.support.noCloneEvent%3D%0A%09false%3Bd.detachEvent("onclick"%2Ck)%7D)%3Bd.cloneNode(true).fireEvent("onclick")%7Dd%3Ds.createElement("div")%3Bd.innerHTML%3D"<input type%3D'radio' name%3D'radiotest' checked%3D'checked'%2F>"%3Ba%3Ds.createDocumentFragment()%3Ba.appendChild(d.firstChild)%3Bc.support.checkClone%3Da.cloneNode(true).cloneNode(true).lastChild.checked%3Bc(function()%7Bvar k%3Ds.createElement("div")%3Bk.style.width%3Dk.style.paddingLeft%3D"1px"%3Bs.body.appendChild(k)%3Bc.boxModel%3Dc.support.boxModel%3Dk.offsetWidth%3D%3D%3D2%3Bs.body.removeChild(k).style.display%3D"none"%7D)%3Ba%3Dfunction(k)%7Bvar n%3D%0A%09s.createElement("div")%3Bk%3D"on"%2Bk%3Bvar r%3Dk in n%3Bif(!r)%7Bn.setAttribute(k%2C"return%3B")%3Br%3Dtypeof n%5Bk%5D%3D%3D%3D"function"%7Dreturn r%7D%3Bc.support.submitBubbles%3Da("submit")%3Bc.support.changeBubbles%3Da("change")%3Ba%3Db%3Dd%3De%3Dj%3Dnull%7D%7D)()%3Bc.props%3D%7B"for"%3A"htmlFor"%2C"class"%3A"className"%2Creadonly%3A"readOnly"%2Cmaxlength%3A"maxLength"%2Ccellspacing%3A"cellSpacing"%2Crowspan%3A"rowSpan"%2Ccolspan%3A"colSpan"%2Ctabindex%3A"tabIndex"%2Cusemap%3A"useMap"%2Cframeborder%3A"frameBorder"%7D%3Bvar G%3D"jQuery"%2BJ()%2CYa%3D0%2Cza%3D%7B%7D%3Bc.extend(%7Bcache%3A%7B%7D%2Cexpando%3AG%2CnoData%3A%7Bembed%3Atrue%2Cobject%3Atrue%2C%0A%09applet%3Atrue%7D%2Cdata%3Afunction(a%2Cb%2Cd)%7Bif(!(a.nodeName%26%26c.noData%5Ba.nodeName.toLowerCase()%5D))%7Ba%3Da%3D%3DA%3Fza%3Aa%3Bvar f%3Da%5BG%5D%2Ce%3Dc.cache%3Bif(!f%26%26typeof b%3D%3D%3D"string"%26%26d%3D%3D%3Dw)return null%3Bf%7C%7C(f%3D%2B%2BYa)%3Bif(typeof b%3D%3D%3D"object")%7Ba%5BG%5D%3Df%3Be%5Bf%5D%3Dc.extend(true%2C%7B%7D%2Cb)%7Delse if(!e%5Bf%5D)%7Ba%5BG%5D%3Df%3Be%5Bf%5D%3D%7B%7D%7Da%3De%5Bf%5D%3Bif(d!%3D%3Dw)a%5Bb%5D%3Dd%3Breturn typeof b%3D%3D%3D"string"%3Fa%5Bb%5D%3Aa%7D%7D%2CremoveData%3Afunction(a%2Cb)%7Bif(!(a.nodeName%26%26c.noData%5Ba.nodeName.toLowerCase()%5D))%7Ba%3Da%3D%3DA%3Fza%3Aa%3Bvar d%3Da%5BG%5D%2Cf%3Dc.cache%2Ce%3Df%5Bd%5D%3Bif(b)%7Bif(e)%7Bdelete e%5Bb%5D%3Bc.isEmptyObject(e)%26%26c.removeData(a)%7D%7Delse%7Bif(c.support.deleteExpando)delete a%5Bc.expando%5D%3B%0A%09else a.removeAttribute%26%26a.removeAttribute(c.expando)%3Bdelete f%5Bd%5D%7D%7D%7D%7D)%3Bc.fn.extend(%7Bdata%3Afunction(a%2Cb)%7Bif(typeof a%3D%3D%3D"undefined"%26%26this.length)return c.data(this%5B0%5D)%3Belse if(typeof a%3D%3D%3D"object")return this.each(function()%7Bc.data(this%2Ca)%7D)%3Bvar d%3Da.split(".")%3Bd%5B1%5D%3Dd%5B1%5D%3F"."%2Bd%5B1%5D%3A""%3Bif(b%3D%3D%3Dw)%7Bvar f%3Dthis.triggerHandler("getData"%2Bd%5B1%5D%2B"!"%2C%5Bd%5B0%5D%5D)%3Bif(f%3D%3D%3Dw%26%26this.length)f%3Dc.data(this%5B0%5D%2Ca)%3Breturn f%3D%3D%3Dw%26%26d%5B1%5D%3Fthis.data(d%5B0%5D)%3Af%7Delse return this.trigger("setData"%2Bd%5B1%5D%2B"!"%2C%5Bd%5B0%5D%2Cb%5D).each(function()%7Bc.data(this%2C%0A%09a%2Cb)%7D)%7D%2CremoveData%3Afunction(a)%7Breturn this.each(function()%7Bc.removeData(this%2Ca)%7D)%7D%7D)%3Bc.extend(%7Bqueue%3Afunction(a%2Cb%2Cd)%7Bif(a)%7Bb%3D(b%7C%7C"fx")%2B"queue"%3Bvar f%3Dc.data(a%2Cb)%3Bif(!d)return f%7C%7C%5B%5D%3Bif(!f%7C%7Cc.isArray(d))f%3Dc.data(a%2Cb%2Cc.makeArray(d))%3Belse f.push(d)%3Breturn f%7D%7D%2Cdequeue%3Afunction(a%2Cb)%7Bb%3Db%7C%7C"fx"%3Bvar d%3Dc.queue(a%2Cb)%2Cf%3Dd.shift()%3Bif(f%3D%3D%3D"inprogress")f%3Dd.shift()%3Bif(f)%7Bb%3D%3D%3D"fx"%26%26d.unshift("inprogress")%3Bf.call(a%2Cfunction()%7Bc.dequeue(a%2Cb)%7D)%7D%7D%7D)%3Bc.fn.extend(%7Bqueue%3Afunction(a%2Cb)%7Bif(typeof a!%3D%3D"string")%7Bb%3Da%3Ba%3D"fx"%7Dif(b%3D%3D%3D%0A%09w)return c.queue(this%5B0%5D%2Ca)%3Breturn this.each(function()%7Bvar d%3Dc.queue(this%2Ca%2Cb)%3Ba%3D%3D%3D"fx"%26%26d%5B0%5D!%3D%3D"inprogress"%26%26c.dequeue(this%2Ca)%7D)%7D%2Cdequeue%3Afunction(a)%7Breturn this.each(function()%7Bc.dequeue(this%2Ca)%7D)%7D%2Cdelay%3Afunction(a%2Cb)%7Ba%3Dc.fx%3Fc.fx.speeds%5Ba%5D%7C%7Ca%3Aa%3Bb%3Db%7C%7C"fx"%3Breturn this.queue(b%2Cfunction()%7Bvar d%3Dthis%3BsetTimeout(function()%7Bc.dequeue(d%2Cb)%7D%2Ca)%7D)%7D%2CclearQueue%3Afunction(a)%7Breturn this.queue(a%7C%7C"fx"%2C%5B%5D)%7D%7D)%3Bvar Aa%3D%2F%5B%5Cn%5Ct%5D%2Fg%2Cca%3D%2F%5Cs%2B%2F%2CZa%3D%2F%5Cr%2Fg%2C%24a%3D%2Fhref%7Csrc%7Cstyle%2F%2Cab%3D%2F(button%7Cinput)%2Fi%2Cbb%3D%2F(button%7Cinput%7Cobject%7Cselect%7Ctextarea)%2Fi%2C%0A%09cb%3D%2F%5E(a%7Carea)%24%2Fi%2CBa%3D%2Fradio%7Ccheckbox%2F%3Bc.fn.extend(%7Battr%3Afunction(a%2Cb)%7Breturn X(this%2Ca%2Cb%2Ctrue%2Cc.attr)%7D%2CremoveAttr%3Afunction(a)%7Breturn this.each(function()%7Bc.attr(this%2Ca%2C"")%3Bthis.nodeType%3D%3D%3D1%26%26this.removeAttribute(a)%7D)%7D%2CaddClass%3Afunction(a)%7Bif(c.isFunction(a))return this.each(function(n)%7Bvar r%3Dc(this)%3Br.addClass(a.call(this%2Cn%2Cr.attr("class")))%7D)%3Bif(a%26%26typeof a%3D%3D%3D"string")for(var b%3D(a%7C%7C"").split(ca)%2Cd%3D0%2Cf%3Dthis.length%3Bd<f%3Bd%2B%2B)%7Bvar e%3Dthis%5Bd%5D%3Bif(e.nodeType%3D%3D%3D1)if(e.className)%7Bfor(var j%3D" "%2Be.className%2B" "%2C%0A%09i%3De.className%2Co%3D0%2Ck%3Db.length%3Bo<k%3Bo%2B%2B)if(j.indexOf(" "%2Bb%5Bo%5D%2B" ")<0)i%2B%3D" "%2Bb%5Bo%5D%3Be.className%3Dc.trim(i)%7Delse e.className%3Da%7Dreturn this%7D%2CremoveClass%3Afunction(a)%7Bif(c.isFunction(a))return this.each(function(k)%7Bvar n%3Dc(this)%3Bn.removeClass(a.call(this%2Ck%2Cn.attr("class")))%7D)%3Bif(a%26%26typeof a%3D%3D%3D"string"%7C%7Ca%3D%3D%3Dw)for(var b%3D(a%7C%7C"").split(ca)%2Cd%3D0%2Cf%3Dthis.length%3Bd<f%3Bd%2B%2B)%7Bvar e%3Dthis%5Bd%5D%3Bif(e.nodeType%3D%3D%3D1%26%26e.className)if(a)%7Bfor(var j%3D(" "%2Be.className%2B" ").replace(Aa%2C" ")%2Ci%3D0%2Co%3Db.length%3Bi<o%3Bi%2B%2B)j%3Dj.replace(" "%2Bb%5Bi%5D%2B" "%2C%0A%09" ")%3Be.className%3Dc.trim(j)%7Delse e.className%3D""%7Dreturn this%7D%2CtoggleClass%3Afunction(a%2Cb)%7Bvar d%3Dtypeof a%2Cf%3Dtypeof b%3D%3D%3D"boolean"%3Bif(c.isFunction(a))return this.each(function(e)%7Bvar j%3Dc(this)%3Bj.toggleClass(a.call(this%2Ce%2Cj.attr("class")%2Cb)%2Cb)%7D)%3Breturn this.each(function()%7Bif(d%3D%3D%3D"string")for(var e%2Cj%3D0%2Ci%3Dc(this)%2Co%3Db%2Ck%3Da.split(ca)%3Be%3Dk%5Bj%2B%2B%5D%3B)%7Bo%3Df%3Fo%3A!i.hasClass(e)%3Bi%5Bo%3F"addClass"%3A"removeClass"%5D(e)%7Delse if(d%3D%3D%3D"undefined"%7C%7Cd%3D%3D%3D"boolean")%7Bthis.className%26%26c.data(this%2C"__className__"%2Cthis.className)%3Bthis.className%3D%0A%09this.className%7C%7Ca%3D%3D%3Dfalse%3F""%3Ac.data(this%2C"__className__")%7C%7C""%7D%7D)%7D%2ChasClass%3Afunction(a)%7Ba%3D" "%2Ba%2B" "%3Bfor(var b%3D0%2Cd%3Dthis.length%3Bb<d%3Bb%2B%2B)if((" "%2Bthis%5Bb%5D.className%2B" ").replace(Aa%2C" ").indexOf(a)>-1)return true%3Breturn false%7D%2Cval%3Afunction(a)%7Bif(a%3D%3D%3Dw)%7Bvar b%3Dthis%5B0%5D%3Bif(b)%7Bif(c.nodeName(b%2C"option"))return(b.attributes.value%7C%7C%7B%7D).specified%3Fb.value%3Ab.text%3Bif(c.nodeName(b%2C"select"))%7Bvar d%3Db.selectedIndex%2Cf%3D%5B%5D%2Ce%3Db.options%3Bb%3Db.type%3D%3D%3D"select-one"%3Bif(d<0)return null%3Bvar j%3Db%3Fd%3A0%3Bfor(d%3Db%3Fd%2B1%3Ae.length%3Bj<d%3Bj%2B%2B)%7Bvar i%3D%0A%09e%5Bj%5D%3Bif(i.selected)%7Ba%3Dc(i).val()%3Bif(b)return a%3Bf.push(a)%7D%7Dreturn f%7Dif(Ba.test(b.type)%26%26!c.support.checkOn)return b.getAttribute("value")%3D%3D%3Dnull%3F"on"%3Ab.value%3Breturn(b.value%7C%7C"").replace(Za%2C"")%7Dreturn w%7Dvar o%3Dc.isFunction(a)%3Breturn this.each(function(k)%7Bvar n%3Dc(this)%2Cr%3Da%3Bif(this.nodeType%3D%3D%3D1)%7Bif(o)r%3Da.call(this%2Ck%2Cn.val())%3Bif(typeof r%3D%3D%3D"number")r%2B%3D""%3Bif(c.isArray(r)%26%26Ba.test(this.type))this.checked%3Dc.inArray(n.val()%2Cr)>%3D0%3Belse if(c.nodeName(this%2C"select"))%7Bvar u%3Dc.makeArray(r)%3Bc("option"%2Cthis).each(function()%7Bthis.selected%3D%0A%09c.inArray(c(this).val()%2Cu)>%3D0%7D)%3Bif(!u.length)this.selectedIndex%3D-1%7Delse this.value%3Dr%7D%7D)%7D%7D)%3Bc.extend(%7BattrFn%3A%7Bval%3Atrue%2Ccss%3Atrue%2Chtml%3Atrue%2Ctext%3Atrue%2Cdata%3Atrue%2Cwidth%3Atrue%2Cheight%3Atrue%2Coffset%3Atrue%7D%2Cattr%3Afunction(a%2Cb%2Cd%2Cf)%7Bif(!a%7C%7Ca.nodeType%3D%3D%3D3%7C%7Ca.nodeType%3D%3D%3D8)return w%3Bif(f%26%26b in c.attrFn)return c(a)%5Bb%5D(d)%3Bf%3Da.nodeType!%3D%3D1%7C%7C!c.isXMLDoc(a)%3Bvar e%3Dd!%3D%3Dw%3Bb%3Df%26%26c.props%5Bb%5D%7C%7Cb%3Bif(a.nodeType%3D%3D%3D1)%7Bvar j%3D%24a.test(b)%3Bif(b in a%26%26f%26%26!j)%7Bif(e)%7Bb%3D%3D%3D"type"%26%26ab.test(a.nodeName)%26%26a.parentNode%26%26c.error("type property can't be changed")%3B%0A%09a%5Bb%5D%3Dd%7Dif(c.nodeName(a%2C"form")%26%26a.getAttributeNode(b))return a.getAttributeNode(b).nodeValue%3Bif(b%3D%3D%3D"tabIndex")return(b%3Da.getAttributeNode("tabIndex"))%26%26b.specified%3Fb.value%3Abb.test(a.nodeName)%7C%7Ccb.test(a.nodeName)%26%26a.href%3F0%3Aw%3Breturn a%5Bb%5D%7Dif(!c.support.style%26%26f%26%26b%3D%3D%3D"style")%7Bif(e)a.style.cssText%3D""%2Bd%3Breturn a.style.cssText%7De%26%26a.setAttribute(b%2C""%2Bd)%3Ba%3D!c.support.hrefNormalized%26%26f%26%26j%3Fa.getAttribute(b%2C2)%3Aa.getAttribute(b)%3Breturn a%3D%3D%3Dnull%3Fw%3Aa%7Dreturn c.style(a%2Cb%2Cd)%7D%7D)%3Bvar O%3D%2F%5C.(.*)%24%2F%2Cdb%3Dfunction(a)%7Breturn a.replace(%2F%5B%5E%5Cw%5Cs%5C.%5C%7C%60%5D%2Fg%2C%0A%09function(b)%7Breturn"%5C%5C"%2Bb%7D)%7D%3Bc.event%3D%7Badd%3Afunction(a%2Cb%2Cd%2Cf)%7Bif(!(a.nodeType%3D%3D%3D3%7C%7Ca.nodeType%3D%3D%3D8))%7Bif(a.setInterval%26%26a!%3D%3DA%26%26!a.frameElement)a%3DA%3Bvar e%2Cj%3Bif(d.handler)%7Be%3Dd%3Bd%3De.handler%7Dif(!d.guid)d.guid%3Dc.guid%2B%2B%3Bif(j%3Dc.data(a))%7Bvar i%3Dj.events%3Dj.events%7C%7C%7B%7D%2Co%3Dj.handle%3Bif(!o)j.handle%3Do%3Dfunction()%7Breturn typeof c!%3D%3D"undefined"%26%26!c.event.triggered%3Fc.event.handle.apply(o.elem%2Carguments)%3Aw%7D%3Bo.elem%3Da%3Bb%3Db.split(" ")%3Bfor(var k%2Cn%3D0%2Cr%3Bk%3Db%5Bn%2B%2B%5D%3B)%7Bj%3De%3Fc.extend(%7B%7D%2Ce)%3A%7Bhandler%3Ad%2Cdata%3Af%7D%3Bif(k.indexOf(".")>-1)%7Br%3Dk.split(".")%3B%0A%09k%3Dr.shift()%3Bj.namespace%3Dr.slice(0).sort().join(".")%7Delse%7Br%3D%5B%5D%3Bj.namespace%3D""%7Dj.type%3Dk%3Bj.guid%3Dd.guid%3Bvar u%3Di%5Bk%5D%2Cz%3Dc.event.special%5Bk%5D%7C%7C%7B%7D%3Bif(!u)%7Bu%3Di%5Bk%5D%3D%5B%5D%3Bif(!z.setup%7C%7Cz.setup.call(a%2Cf%2Cr%2Co)%3D%3D%3Dfalse)if(a.addEventListener)a.addEventListener(k%2Co%2Cfalse)%3Belse a.attachEvent%26%26a.attachEvent("on"%2Bk%2Co)%7Dif(z.add)%7Bz.add.call(a%2Cj)%3Bif(!j.handler.guid)j.handler.guid%3Dd.guid%7Du.push(j)%3Bc.event.global%5Bk%5D%3Dtrue%7Da%3Dnull%7D%7D%7D%2Cglobal%3A%7B%7D%2Cremove%3Afunction(a%2Cb%2Cd%2Cf)%7Bif(!(a.nodeType%3D%3D%3D3%7C%7Ca.nodeType%3D%3D%3D8))%7Bvar e%2Cj%3D0%2Ci%2Co%2Ck%2Cn%2Cr%2Cu%2Cz%3Dc.data(a)%2C%0A%09C%3Dz%26%26z.events%3Bif(z%26%26C)%7Bif(b%26%26b.type)%7Bd%3Db.handler%3Bb%3Db.type%7Dif(!b%7C%7Ctypeof b%3D%3D%3D"string"%26%26b.charAt(0)%3D%3D%3D".")%7Bb%3Db%7C%7C""%3Bfor(e in C)c.event.remove(a%2Ce%2Bb)%7Delse%7Bfor(b%3Db.split(" ")%3Be%3Db%5Bj%2B%2B%5D%3B)%7Bn%3De%3Bi%3De.indexOf(".")<0%3Bo%3D%5B%5D%3Bif(!i)%7Bo%3De.split(".")%3Be%3Do.shift()%3Bk%3Dnew RegExp("(%5E%7C%5C%5C.)"%2Bc.map(o.slice(0).sort()%2Cdb).join("%5C%5C.(%3F%3A.*%5C%5C.)%3F")%2B"(%5C%5C.%7C%24)")%7Dif(r%3DC%5Be%5D)if(d)%7Bn%3Dc.event.special%5Be%5D%7C%7C%7B%7D%3Bfor(B%3Df%7C%7C0%3BB<r.length%3BB%2B%2B)%7Bu%3Dr%5BB%5D%3Bif(d.guid%3D%3D%3Du.guid)%7Bif(i%7C%7Ck.test(u.namespace))%7Bf%3D%3Dnull%26%26r.splice(B--%2C1)%3Bn.remove%26%26n.remove.call(a%2Cu)%7Dif(f!%3D%0A%09null)break%7D%7Dif(r.length%3D%3D%3D0%7C%7Cf!%3Dnull%26%26r.length%3D%3D%3D1)%7Bif(!n.teardown%7C%7Cn.teardown.call(a%2Co)%3D%3D%3Dfalse)Ca(a%2Ce%2Cz.handle)%3Bdelete C%5Be%5D%7D%7Delse for(var B%3D0%3BB<r.length%3BB%2B%2B)%7Bu%3Dr%5BB%5D%3Bif(i%7C%7Ck.test(u.namespace))%7Bc.event.remove(a%2Cn%2Cu.handler%2CB)%3Br.splice(B--%2C1)%7D%7D%7Dif(c.isEmptyObject(C))%7Bif(b%3Dz.handle)b.elem%3Dnull%3Bdelete z.events%3Bdelete z.handle%3Bc.isEmptyObject(z)%26%26c.removeData(a)%7D%7D%7D%7D%7D%2Ctrigger%3Afunction(a%2Cb%2Cd%2Cf)%7Bvar e%3Da.type%7C%7Ca%3Bif(!f)%7Ba%3Dtypeof a%3D%3D%3D"object"%3Fa%5BG%5D%3Fa%3Ac.extend(c.Event(e)%2Ca)%3Ac.Event(e)%3Bif(e.indexOf("!")>%3D0)%7Ba.type%3D%0A%09e%3De.slice(0%2C-1)%3Ba.exclusive%3Dtrue%7Dif(!d)%7Ba.stopPropagation()%3Bc.event.global%5Be%5D%26%26c.each(c.cache%2Cfunction()%7Bthis.events%26%26this.events%5Be%5D%26%26c.event.trigger(a%2Cb%2Cthis.handle.elem)%7D)%7Dif(!d%7C%7Cd.nodeType%3D%3D%3D3%7C%7Cd.nodeType%3D%3D%3D8)return w%3Ba.result%3Dw%3Ba.target%3Dd%3Bb%3Dc.makeArray(b)%3Bb.unshift(a)%7Da.currentTarget%3Dd%3B(f%3Dc.data(d%2C"handle"))%26%26f.apply(d%2Cb)%3Bf%3Dd.parentNode%7C%7Cd.ownerDocument%3Btry%7Bif(!(d%26%26d.nodeName%26%26c.noData%5Bd.nodeName.toLowerCase()%5D))if(d%5B"on"%2Be%5D%26%26d%5B"on"%2Be%5D.apply(d%2Cb)%3D%3D%3Dfalse)a.result%3Dfalse%7Dcatch(j)%7B%7Dif(!a.isPropagationStopped()%26%26%0A%09f)c.event.trigger(a%2Cb%2Cf%2Ctrue)%3Belse if(!a.isDefaultPrevented())%7Bf%3Da.target%3Bvar i%2Co%3Dc.nodeName(f%2C"a")%26%26e%3D%3D%3D"click"%2Ck%3Dc.event.special%5Be%5D%7C%7C%7B%7D%3Bif((!k._default%7C%7Ck._default.call(d%2Ca)%3D%3D%3Dfalse)%26%26!o%26%26!(f%26%26f.nodeName%26%26c.noData%5Bf.nodeName.toLowerCase()%5D))%7Btry%7Bif(f%5Be%5D)%7Bif(i%3Df%5B"on"%2Be%5D)f%5B"on"%2Be%5D%3Dnull%3Bc.event.triggered%3Dtrue%3Bf%5Be%5D()%7D%7Dcatch(n)%7B%7Dif(i)f%5B"on"%2Be%5D%3Di%3Bc.event.triggered%3Dfalse%7D%7D%7D%2Chandle%3Afunction(a)%7Bvar b%2Cd%2Cf%2Ce%3Ba%3Darguments%5B0%5D%3Dc.event.fix(a%7C%7CA.event)%3Ba.currentTarget%3Dthis%3Bb%3Da.type.indexOf(".")<0%26%26!a.exclusive%3B%0A%09if(!b)%7Bd%3Da.type.split(".")%3Ba.type%3Dd.shift()%3Bf%3Dnew RegExp("(%5E%7C%5C%5C.)"%2Bd.slice(0).sort().join("%5C%5C.(%3F%3A.*%5C%5C.)%3F")%2B"(%5C%5C.%7C%24)")%7De%3Dc.data(this%2C"events")%3Bd%3De%5Ba.type%5D%3Bif(e%26%26d)%7Bd%3Dd.slice(0)%3Be%3D0%3Bfor(var j%3Dd.length%3Be<j%3Be%2B%2B)%7Bvar i%3Dd%5Be%5D%3Bif(b%7C%7Cf.test(i.namespace))%7Ba.handler%3Di.handler%3Ba.data%3Di.data%3Ba.handleObj%3Di%3Bi%3Di.handler.apply(this%2Carguments)%3Bif(i!%3D%3Dw)%7Ba.result%3Di%3Bif(i%3D%3D%3Dfalse)%7Ba.preventDefault()%3Ba.stopPropagation()%7D%7Dif(a.isImmediatePropagationStopped())break%7D%7D%7Dreturn a.result%7D%2Cprops%3A"altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode layerX layerY metaKey newValue offsetX offsetY originalTarget pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target toElement view wheelDelta which".split(" ")%2C%0A%09fix%3Afunction(a)%7Bif(a%5BG%5D)return a%3Bvar b%3Da%3Ba%3Dc.Event(b)%3Bfor(var d%3Dthis.props.length%2Cf%3Bd%3B)%7Bf%3Dthis.props%5B--d%5D%3Ba%5Bf%5D%3Db%5Bf%5D%7Dif(!a.target)a.target%3Da.srcElement%7C%7Cs%3Bif(a.target.nodeType%3D%3D%3D3)a.target%3Da.target.parentNode%3Bif(!a.relatedTarget%26%26a.fromElement)a.relatedTarget%3Da.fromElement%3D%3D%3Da.target%3Fa.toElement%3Aa.fromElement%3Bif(a.pageX%3D%3Dnull%26%26a.clientX!%3Dnull)%7Bb%3Ds.documentElement%3Bd%3Ds.body%3Ba.pageX%3Da.clientX%2B(b%26%26b.scrollLeft%7C%7Cd%26%26d.scrollLeft%7C%7C0)-(b%26%26b.clientLeft%7C%7Cd%26%26d.clientLeft%7C%7C0)%3Ba.pageY%3Da.clientY%2B(b%26%26b.scrollTop%7C%7C%0A%09d%26%26d.scrollTop%7C%7C0)-(b%26%26b.clientTop%7C%7Cd%26%26d.clientTop%7C%7C0)%7Dif(!a.which%26%26(a.charCode%7C%7Ca.charCode%3D%3D%3D0%3Fa.charCode%3Aa.keyCode))a.which%3Da.charCode%7C%7Ca.keyCode%3Bif(!a.metaKey%26%26a.ctrlKey)a.metaKey%3Da.ctrlKey%3Bif(!a.which%26%26a.button!%3D%3Dw)a.which%3Da.button%261%3F1%3Aa.button%262%3F3%3Aa.button%264%3F2%3A0%3Breturn a%7D%2Cguid%3A1E8%2Cproxy%3Ac.proxy%2Cspecial%3A%7Bready%3A%7Bsetup%3Ac.bindReady%2Cteardown%3Ac.noop%7D%2Clive%3A%7Badd%3Afunction(a)%7Bc.event.add(this%2Ca.origType%2Cc.extend(%7B%7D%2Ca%2C%7Bhandler%3Aoa%7D))%7D%2Cremove%3Afunction(a)%7Bvar b%3Dtrue%2Cd%3Da.origType.replace(O%2C"")%3Bc.each(c.data(this%2C%0A%09"events").live%7C%7C%5B%5D%2Cfunction()%7Bif(d%3D%3D%3Dthis.origType.replace(O%2C""))return b%3Dfalse%7D)%3Bb%26%26c.event.remove(this%2Ca.origType%2Coa)%7D%7D%2Cbeforeunload%3A%7Bsetup%3Afunction(a%2Cb%2Cd)%7Bif(this.setInterval)this.onbeforeunload%3Dd%3Breturn false%7D%2Cteardown%3Afunction(a%2Cb)%7Bif(this.onbeforeunload%3D%3D%3Db)this.onbeforeunload%3Dnull%7D%7D%7D%7D%3Bvar Ca%3Ds.removeEventListener%3Ffunction(a%2Cb%2Cd)%7Ba.removeEventListener(b%2Cd%2Cfalse)%7D%3Afunction(a%2Cb%2Cd)%7Ba.detachEvent("on"%2Bb%2Cd)%7D%3Bc.Event%3Dfunction(a)%7Bif(!this.preventDefault)return new c.Event(a)%3Bif(a%26%26a.type)%7Bthis.originalEvent%3D%0A%09a%3Bthis.type%3Da.type%7Delse this.type%3Da%3Bthis.timeStamp%3DJ()%3Bthis%5BG%5D%3Dtrue%7D%3Bc.Event.prototype%3D%7BpreventDefault%3Afunction()%7Bthis.isDefaultPrevented%3DZ%3Bvar a%3Dthis.originalEvent%3Bif(a)%7Ba.preventDefault%26%26a.preventDefault()%3Ba.returnValue%3Dfalse%7D%7D%2CstopPropagation%3Afunction()%7Bthis.isPropagationStopped%3DZ%3Bvar a%3Dthis.originalEvent%3Bif(a)%7Ba.stopPropagation%26%26a.stopPropagation()%3Ba.cancelBubble%3Dtrue%7D%7D%2CstopImmediatePropagation%3Afunction()%7Bthis.isImmediatePropagationStopped%3DZ%3Bthis.stopPropagation()%7D%2CisDefaultPrevented%3AY%2CisPropagationStopped%3AY%2C%0A%09isImmediatePropagationStopped%3AY%7D%3Bvar Da%3Dfunction(a)%7Bvar b%3Da.relatedTarget%3Btry%7Bfor(%3Bb%26%26b!%3D%3Dthis%3B)b%3Db.parentNode%3Bif(b!%3D%3Dthis)%7Ba.type%3Da.data%3Bc.event.handle.apply(this%2Carguments)%7D%7Dcatch(d)%7B%7D%7D%2CEa%3Dfunction(a)%7Ba.type%3Da.data%3Bc.event.handle.apply(this%2Carguments)%7D%3Bc.each(%7Bmouseenter%3A"mouseover"%2Cmouseleave%3A"mouseout"%7D%2Cfunction(a%2Cb)%7Bc.event.special%5Ba%5D%3D%7Bsetup%3Afunction(d)%7Bc.event.add(this%2Cb%2Cd%26%26d.selector%3FEa%3ADa%2Ca)%7D%2Cteardown%3Afunction(d)%7Bc.event.remove(this%2Cb%2Cd%26%26d.selector%3FEa%3ADa)%7D%7D%7D)%3Bif(!c.support.submitBubbles)c.event.special.submit%3D%0A%09%7Bsetup%3Afunction()%7Bif(this.nodeName.toLowerCase()!%3D%3D"form")%7Bc.event.add(this%2C"click.specialSubmit"%2Cfunction(a)%7Bvar b%3Da.target%2Cd%3Db.type%3Bif((d%3D%3D%3D"submit"%7C%7Cd%3D%3D%3D"image")%26%26c(b).closest("form").length)return na("submit"%2Cthis%2Carguments)%7D)%3Bc.event.add(this%2C"keypress.specialSubmit"%2Cfunction(a)%7Bvar b%3Da.target%2Cd%3Db.type%3Bif((d%3D%3D%3D"text"%7C%7Cd%3D%3D%3D"password")%26%26c(b).closest("form").length%26%26a.keyCode%3D%3D%3D13)return na("submit"%2Cthis%2Carguments)%7D)%7Delse return false%7D%2Cteardown%3Afunction()%7Bc.event.remove(this%2C".specialSubmit")%7D%7D%3B%0A%09if(!c.support.changeBubbles)%7Bvar da%3D%2Ftextarea%7Cinput%7Cselect%2Fi%2Cea%2CFa%3Dfunction(a)%7Bvar b%3Da.type%2Cd%3Da.value%3Bif(b%3D%3D%3D"radio"%7C%7Cb%3D%3D%3D"checkbox")d%3Da.checked%3Belse if(b%3D%3D%3D"select-multiple")d%3Da.selectedIndex>-1%3Fc.map(a.options%2Cfunction(f)%7Breturn f.selected%7D).join("-")%3A""%3Belse if(a.nodeName.toLowerCase()%3D%3D%3D"select")d%3Da.selectedIndex%3Breturn d%7D%2Cfa%3Dfunction(a%2Cb)%7Bvar d%3Da.target%2Cf%2Ce%3Bif(!(!da.test(d.nodeName)%7C%7Cd.readOnly))%7Bf%3Dc.data(d%2C"_change_data")%3Be%3DFa(d)%3Bif(a.type!%3D%3D"focusout"%7C%7Cd.type!%3D%3D"radio")c.data(d%2C"_change_data"%2C%0A%09e)%3Bif(!(f%3D%3D%3Dw%7C%7Ce%3D%3D%3Df))if(f!%3Dnull%7C%7Ce)%7Ba.type%3D"change"%3Breturn c.event.trigger(a%2Cb%2Cd)%7D%7D%7D%3Bc.event.special.change%3D%7Bfilters%3A%7Bfocusout%3Afa%2Cclick%3Afunction(a)%7Bvar b%3Da.target%2Cd%3Db.type%3Bif(d%3D%3D%3D"radio"%7C%7Cd%3D%3D%3D"checkbox"%7C%7Cb.nodeName.toLowerCase()%3D%3D%3D"select")return fa.call(this%2Ca)%7D%2Ckeydown%3Afunction(a)%7Bvar b%3Da.target%2Cd%3Db.type%3Bif(a.keyCode%3D%3D%3D13%26%26b.nodeName.toLowerCase()!%3D%3D"textarea"%7C%7Ca.keyCode%3D%3D%3D32%26%26(d%3D%3D%3D"checkbox"%7C%7Cd%3D%3D%3D"radio")%7C%7Cd%3D%3D%3D"select-multiple")return fa.call(this%2Ca)%7D%2Cbeforeactivate%3Afunction(a)%7Ba%3Da.target%3Bc.data(a%2C%0A%09"_change_data"%2CFa(a))%7D%7D%2Csetup%3Afunction()%7Bif(this.type%3D%3D%3D"file")return false%3Bfor(var a in ea)c.event.add(this%2Ca%2B".specialChange"%2Cea%5Ba%5D)%3Breturn da.test(this.nodeName)%7D%2Cteardown%3Afunction()%7Bc.event.remove(this%2C".specialChange")%3Breturn da.test(this.nodeName)%7D%7D%3Bea%3Dc.event.special.change.filters%7Ds.addEventListener%26%26c.each(%7Bfocus%3A"focusin"%2Cblur%3A"focusout"%7D%2Cfunction(a%2Cb)%7Bfunction d(f)%7Bf%3Dc.event.fix(f)%3Bf.type%3Db%3Breturn c.event.handle.call(this%2Cf)%7Dc.event.special%5Bb%5D%3D%7Bsetup%3Afunction()%7Bthis.addEventListener(a%2C%0A%09d%2Ctrue)%7D%2Cteardown%3Afunction()%7Bthis.removeEventListener(a%2Cd%2Ctrue)%7D%7D%7D)%3Bc.each(%5B"bind"%2C"one"%5D%2Cfunction(a%2Cb)%7Bc.fn%5Bb%5D%3Dfunction(d%2Cf%2Ce)%7Bif(typeof d%3D%3D%3D"object")%7Bfor(var j in d)this%5Bb%5D(j%2Cf%2Cd%5Bj%5D%2Ce)%3Breturn this%7Dif(c.isFunction(f))%7Be%3Df%3Bf%3Dw%7Dvar i%3Db%3D%3D%3D"one"%3Fc.proxy(e%2Cfunction(k)%7Bc(this).unbind(k%2Ci)%3Breturn e.apply(this%2Carguments)%7D)%3Ae%3Bif(d%3D%3D%3D"unload"%26%26b!%3D%3D"one")this.one(d%2Cf%2Ce)%3Belse%7Bj%3D0%3Bfor(var o%3Dthis.length%3Bj<o%3Bj%2B%2B)c.event.add(this%5Bj%5D%2Cd%2Ci%2Cf)%7Dreturn this%7D%7D)%3Bc.fn.extend(%7Bunbind%3Afunction(a%2Cb)%7Bif(typeof a%3D%3D%3D"object"%26%26%0A%09!a.preventDefault)for(var d in a)this.unbind(d%2Ca%5Bd%5D)%3Belse%7Bd%3D0%3Bfor(var f%3Dthis.length%3Bd<f%3Bd%2B%2B)c.event.remove(this%5Bd%5D%2Ca%2Cb)%7Dreturn this%7D%2Cdelegate%3Afunction(a%2Cb%2Cd%2Cf)%7Breturn this.live(b%2Cd%2Cf%2Ca)%7D%2Cundelegate%3Afunction(a%2Cb%2Cd)%7Breturn arguments.length%3D%3D%3D0%3Fthis.unbind("live")%3Athis.die(b%2Cnull%2Cd%2Ca)%7D%2Ctrigger%3Afunction(a%2Cb)%7Breturn this.each(function()%7Bc.event.trigger(a%2Cb%2Cthis)%7D)%7D%2CtriggerHandler%3Afunction(a%2Cb)%7Bif(this%5B0%5D)%7Ba%3Dc.Event(a)%3Ba.preventDefault()%3Ba.stopPropagation()%3Bc.event.trigger(a%2Cb%2Cthis%5B0%5D)%3Breturn a.result%7D%7D%2C%0A%09toggle%3Afunction(a)%7Bfor(var b%3Darguments%2Cd%3D1%3Bd<b.length%3B)c.proxy(a%2Cb%5Bd%2B%2B%5D)%3Breturn this.click(c.proxy(a%2Cfunction(f)%7Bvar e%3D(c.data(this%2C"lastToggle"%2Ba.guid)%7C%7C0)%25d%3Bc.data(this%2C"lastToggle"%2Ba.guid%2Ce%2B1)%3Bf.preventDefault()%3Breturn b%5Be%5D.apply(this%2Carguments)%7C%7Cfalse%7D))%7D%2Chover%3Afunction(a%2Cb)%7Breturn this.mouseenter(a).mouseleave(b%7C%7Ca)%7D%7D)%3Bvar Ga%3D%7Bfocus%3A"focusin"%2Cblur%3A"focusout"%2Cmouseenter%3A"mouseover"%2Cmouseleave%3A"mouseout"%7D%3Bc.each(%5B"live"%2C"die"%5D%2Cfunction(a%2Cb)%7Bc.fn%5Bb%5D%3Dfunction(d%2Cf%2Ce%2Cj)%7Bvar i%2Co%3D0%2Ck%2Cn%2Cr%3Dj%7C%7Cthis.selector%2C%0A%09u%3Dj%3Fthis%3Ac(this.context)%3Bif(c.isFunction(f))%7Be%3Df%3Bf%3Dw%7Dfor(d%3D(d%7C%7C"").split(" ")%3B(i%3Dd%5Bo%2B%2B%5D)!%3Dnull%3B)%7Bj%3DO.exec(i)%3Bk%3D""%3Bif(j)%7Bk%3Dj%5B0%5D%3Bi%3Di.replace(O%2C"")%7Dif(i%3D%3D%3D"hover")d.push("mouseenter"%2Bk%2C"mouseleave"%2Bk)%3Belse%7Bn%3Di%3Bif(i%3D%3D%3D"focus"%7C%7Ci%3D%3D%3D"blur")%7Bd.push(Ga%5Bi%5D%2Bk)%3Bi%2B%3Dk%7Delse i%3D(Ga%5Bi%5D%7C%7Ci)%2Bk%3Bb%3D%3D%3D"live"%3Fu.each(function()%7Bc.event.add(this%2Cpa(i%2Cr)%2C%7Bdata%3Af%2Cselector%3Ar%2Chandler%3Ae%2CorigType%3Ai%2CorigHandler%3Ae%2CpreType%3An%7D)%7D)%3Au.unbind(pa(i%2Cr)%2Ce)%7D%7Dreturn this%7D%7D)%3Bc.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error".split(" ")%2C%0A%09function(a%2Cb)%7Bc.fn%5Bb%5D%3Dfunction(d)%7Breturn d%3Fthis.bind(b%2Cd)%3Athis.trigger(b)%7D%3Bif(c.attrFn)c.attrFn%5Bb%5D%3Dtrue%7D)%3BA.attachEvent%26%26!A.addEventListener%26%26A.attachEvent("onunload"%2Cfunction()%7Bfor(var a in c.cache)if(c.cache%5Ba%5D.handle)try%7Bc.event.remove(c.cache%5Ba%5D.handle.elem)%7Dcatch(b)%7B%7D%7D)%3B(function()%7Bfunction a(g)%7Bfor(var h%3D""%2Cl%2Cm%3D0%3Bg%5Bm%5D%3Bm%2B%2B)%7Bl%3Dg%5Bm%5D%3Bif(l.nodeType%3D%3D%3D3%7C%7Cl.nodeType%3D%3D%3D4)h%2B%3Dl.nodeValue%3Belse if(l.nodeType!%3D%3D8)h%2B%3Da(l.childNodes)%7Dreturn h%7Dfunction b(g%2Ch%2Cl%2Cm%2Cq%2Cp)%7Bq%3D0%3Bfor(var v%3Dm.length%3Bq<v%3Bq%2B%2B)%7Bvar t%3Dm%5Bq%5D%3B%0A%09if(t)%7Bt%3Dt%5Bg%5D%3Bfor(var y%3Dfalse%3Bt%3B)%7Bif(t.sizcache%3D%3D%3Dl)%7By%3Dm%5Bt.sizset%5D%3Bbreak%7Dif(t.nodeType%3D%3D%3D1%26%26!p)%7Bt.sizcache%3Dl%3Bt.sizset%3Dq%7Dif(t.nodeName.toLowerCase()%3D%3D%3Dh)%7By%3Dt%3Bbreak%7Dt%3Dt%5Bg%5D%7Dm%5Bq%5D%3Dy%7D%7D%7Dfunction d(g%2Ch%2Cl%2Cm%2Cq%2Cp)%7Bq%3D0%3Bfor(var v%3Dm.length%3Bq<v%3Bq%2B%2B)%7Bvar t%3Dm%5Bq%5D%3Bif(t)%7Bt%3Dt%5Bg%5D%3Bfor(var y%3Dfalse%3Bt%3B)%7Bif(t.sizcache%3D%3D%3Dl)%7By%3Dm%5Bt.sizset%5D%3Bbreak%7Dif(t.nodeType%3D%3D%3D1)%7Bif(!p)%7Bt.sizcache%3Dl%3Bt.sizset%3Dq%7Dif(typeof h!%3D%3D"string")%7Bif(t%3D%3D%3Dh)%7By%3Dtrue%3Bbreak%7D%7Delse if(k.filter(h%2C%5Bt%5D).length>0)%7By%3Dt%3Bbreak%7D%7Dt%3Dt%5Bg%5D%7Dm%5Bq%5D%3Dy%7D%7D%7Dvar f%3D%2F((%3F%3A%5C((%3F%3A%5C(%5B%5E()%5D%2B%5C)%7C%5B%5E()%5D%2B)%2B%5C)%7C%5C%5B(%3F%3A%5C%5B%5B%5E%5B%5C%5D%5D*%5C%5D%7C%5B'"%5D%5B%5E'"%5D*%5B'"%5D%7C%5B%5E%5B%5C%5D'"%5D%2B)%2B%5C%5D%7C%5C%5C.%7C%5B%5E >%2B~%2C(%5C%5B%5C%5C%5D%2B)%2B%7C%5B>%2B~%5D)(%5Cs*%2C%5Cs*)%3F((%3F%3A.%7C%5Cr%7C%5Cn)*)%2Fg%2C%0A%09e%3D0%2Cj%3DObject.prototype.toString%2Ci%3Dfalse%2Co%3Dtrue%3B%5B0%2C0%5D.sort(function()%7Bo%3Dfalse%3Breturn 0%7D)%3Bvar k%3Dfunction(g%2Ch%2Cl%2Cm)%7Bl%3Dl%7C%7C%5B%5D%3Bvar q%3Dh%3Dh%7C%7Cs%3Bif(h.nodeType!%3D%3D1%26%26h.nodeType!%3D%3D9)return%5B%5D%3Bif(!g%7C%7Ctypeof g!%3D%3D"string")return l%3Bfor(var p%3D%5B%5D%2Cv%2Ct%2Cy%2CS%2CH%3Dtrue%2CM%3Dx(h)%2CI%3Dg%3B(f.exec("")%2Cv%3Df.exec(I))!%3D%3Dnull%3B)%7BI%3Dv%5B3%5D%3Bp.push(v%5B1%5D)%3Bif(v%5B2%5D)%7BS%3Dv%5B3%5D%3Bbreak%7D%7Dif(p.length>1%26%26r.exec(g))if(p.length%3D%3D%3D2%26%26n.relative%5Bp%5B0%5D%5D)t%3Dga(p%5B0%5D%2Bp%5B1%5D%2Ch)%3Belse for(t%3Dn.relative%5Bp%5B0%5D%5D%3F%5Bh%5D%3Ak(p.shift()%2Ch)%3Bp.length%3B)%7Bg%3Dp.shift()%3Bif(n.relative%5Bg%5D)g%2B%3Dp.shift()%3B%0A%09t%3Dga(g%2Ct)%7Delse%7Bif(!m%26%26p.length>1%26%26h.nodeType%3D%3D%3D9%26%26!M%26%26n.match.ID.test(p%5B0%5D)%26%26!n.match.ID.test(p%5Bp.length-1%5D))%7Bv%3Dk.find(p.shift()%2Ch%2CM)%3Bh%3Dv.expr%3Fk.filter(v.expr%2Cv.set)%5B0%5D%3Av.set%5B0%5D%7Dif(h)%7Bv%3Dm%3F%7Bexpr%3Ap.pop()%2Cset%3Az(m)%7D%3Ak.find(p.pop()%2Cp.length%3D%3D%3D1%26%26(p%5B0%5D%3D%3D%3D"~"%7C%7Cp%5B0%5D%3D%3D%3D"%2B")%26%26h.parentNode%3Fh.parentNode%3Ah%2CM)%3Bt%3Dv.expr%3Fk.filter(v.expr%2Cv.set)%3Av.set%3Bif(p.length>0)y%3Dz(t)%3Belse H%3Dfalse%3Bfor(%3Bp.length%3B)%7Bvar D%3Dp.pop()%3Bv%3DD%3Bif(n.relative%5BD%5D)v%3Dp.pop()%3Belse D%3D""%3Bif(v%3D%3Dnull)v%3Dh%3Bn.relative%5BD%5D(y%2Cv%2CM)%7D%7Delse y%3D%5B%5D%7Dy%7C%7C(y%3Dt)%3By%7C%7Ck.error(D%7C%7C%0A%09g)%3Bif(j.call(y)%3D%3D%3D"%5Bobject Array%5D")if(H)if(h%26%26h.nodeType%3D%3D%3D1)for(g%3D0%3By%5Bg%5D!%3Dnull%3Bg%2B%2B)%7Bif(y%5Bg%5D%26%26(y%5Bg%5D%3D%3D%3Dtrue%7C%7Cy%5Bg%5D.nodeType%3D%3D%3D1%26%26E(h%2Cy%5Bg%5D)))l.push(t%5Bg%5D)%7Delse for(g%3D0%3By%5Bg%5D!%3Dnull%3Bg%2B%2B)y%5Bg%5D%26%26y%5Bg%5D.nodeType%3D%3D%3D1%26%26l.push(t%5Bg%5D)%3Belse l.push.apply(l%2Cy)%3Belse z(y%2Cl)%3Bif(S)%7Bk(S%2Cq%2Cl%2Cm)%3Bk.uniqueSort(l)%7Dreturn l%7D%3Bk.uniqueSort%3Dfunction(g)%7Bif(B)%7Bi%3Do%3Bg.sort(B)%3Bif(i)for(var h%3D1%3Bh<g.length%3Bh%2B%2B)g%5Bh%5D%3D%3D%3Dg%5Bh-1%5D%26%26g.splice(h--%2C1)%7Dreturn g%7D%3Bk.matches%3Dfunction(g%2Ch)%7Breturn k(g%2Cnull%2Cnull%2Ch)%7D%3Bk.find%3Dfunction(g%2Ch%2Cl)%7Bvar m%2Cq%3Bif(!g)return%5B%5D%3B%0A%09for(var p%3D0%2Cv%3Dn.order.length%3Bp<v%3Bp%2B%2B)%7Bvar t%3Dn.order%5Bp%5D%3Bif(q%3Dn.leftMatch%5Bt%5D.exec(g))%7Bvar y%3Dq%5B1%5D%3Bq.splice(1%2C1)%3Bif(y.substr(y.length-1)!%3D%3D"%5C%5C")%7Bq%5B1%5D%3D(q%5B1%5D%7C%7C"").replace(%2F%5C%5C%2Fg%2C"")%3Bm%3Dn.find%5Bt%5D(q%2Ch%2Cl)%3Bif(m!%3Dnull)%7Bg%3Dg.replace(n.match%5Bt%5D%2C"")%3Bbreak%7D%7D%7D%7Dm%7C%7C(m%3Dh.getElementsByTagName("*"))%3Breturn%7Bset%3Am%2Cexpr%3Ag%7D%7D%3Bk.filter%3Dfunction(g%2Ch%2Cl%2Cm)%7Bfor(var q%3Dg%2Cp%3D%5B%5D%2Cv%3Dh%2Ct%2Cy%2CS%3Dh%26%26h%5B0%5D%26%26x(h%5B0%5D)%3Bg%26%26h.length%3B)%7Bfor(var H in n.filter)if((t%3Dn.leftMatch%5BH%5D.exec(g))!%3Dnull%26%26t%5B2%5D)%7Bvar M%3Dn.filter%5BH%5D%2CI%2CD%3BD%3Dt%5B1%5D%3By%3Dfalse%3Bt.splice(1%2C1)%3Bif(D.substr(D.length-%0A%091)!%3D%3D"%5C%5C")%7Bif(v%3D%3D%3Dp)p%3D%5B%5D%3Bif(n.preFilter%5BH%5D)if(t%3Dn.preFilter%5BH%5D(t%2Cv%2Cl%2Cp%2Cm%2CS))%7Bif(t%3D%3D%3Dtrue)continue%7Delse y%3DI%3Dtrue%3Bif(t)for(var U%3D0%3B(D%3Dv%5BU%5D)!%3Dnull%3BU%2B%2B)if(D)%7BI%3DM(D%2Ct%2CU%2Cv)%3Bvar Ha%3Dm%5E!!I%3Bif(l%26%26I!%3Dnull)if(Ha)y%3Dtrue%3Belse v%5BU%5D%3Dfalse%3Belse if(Ha)%7Bp.push(D)%3By%3Dtrue%7D%7Dif(I!%3D%3Dw)%7Bl%7C%7C(v%3Dp)%3Bg%3Dg.replace(n.match%5BH%5D%2C"")%3Bif(!y)return%5B%5D%3Bbreak%7D%7D%7Dif(g%3D%3D%3Dq)if(y%3D%3Dnull)k.error(g)%3Belse break%3Bq%3Dg%7Dreturn v%7D%3Bk.error%3Dfunction(g)%7Bthrow"Syntax error%2C unrecognized expression%3A "%2Bg%3B%7D%3Bvar n%3Dk.selectors%3D%7Border%3A%5B"ID"%2C"NAME"%2C"TAG"%5D%2Cmatch%3A%7BID%3A%2F%23((%3F%3A%5B%5Cw%5Cu00c0-%5CuFFFF-%5D%7C%5C%5C.)%2B)%2F%2C%0A%09CLASS%3A%2F%5C.((%3F%3A%5B%5Cw%5Cu00c0-%5CuFFFF-%5D%7C%5C%5C.)%2B)%2F%2CNAME%3A%2F%5C%5Bname%3D%5B'"%5D*((%3F%3A%5B%5Cw%5Cu00c0-%5CuFFFF-%5D%7C%5C%5C.)%2B)%5B'"%5D*%5C%5D%2F%2CATTR%3A%2F%5C%5B%5Cs*((%3F%3A%5B%5Cw%5Cu00c0-%5CuFFFF-%5D%7C%5C%5C.)%2B)%5Cs*(%3F%3A(%5CS%3F%3D)%5Cs*(%5B'"%5D*)(.*%3F)%5C3%7C)%5Cs*%5C%5D%2F%2CTAG%3A%2F%5E((%3F%3A%5B%5Cw%5Cu00c0-%5CuFFFF%5C*-%5D%7C%5C%5C.)%2B)%2F%2CCHILD%3A%2F%3A(only%7Cnth%7Clast%7Cfirst)-child(%3F%3A%5C((even%7Codd%7C%5B%5Cdn%2B-%5D*)%5C))%3F%2F%2CPOS%3A%2F%3A(nth%7Ceq%7Cgt%7Clt%7Cfirst%7Clast%7Ceven%7Codd)(%3F%3A%5C((%5Cd*)%5C))%3F(%3F%3D%5B%5E-%5D%7C%24)%2F%2CPSEUDO%3A%2F%3A((%3F%3A%5B%5Cw%5Cu00c0-%5CuFFFF-%5D%7C%5C%5C.)%2B)(%3F%3A%5C((%5B'"%5D%3F)((%3F%3A%5C(%5B%5E%5C)%5D%2B%5C)%7C%5B%5E%5C(%5C)%5D*)%2B)%5C2%5C))%3F%2F%7D%2CleftMatch%3A%7B%7D%2CattrMap%3A%7B"class"%3A"className"%2C"for"%3A"htmlFor"%7D%2CattrHandle%3A%7Bhref%3Afunction(g)%7Breturn g.getAttribute("href")%7D%7D%2C%0A%09relative%3A%7B"%2B"%3Afunction(g%2Ch)%7Bvar l%3Dtypeof h%3D%3D%3D"string"%2Cm%3Dl%26%26!%2F%5CW%2F.test(h)%3Bl%3Dl%26%26!m%3Bif(m)h%3Dh.toLowerCase()%3Bm%3D0%3Bfor(var q%3Dg.length%2Cp%3Bm<q%3Bm%2B%2B)if(p%3Dg%5Bm%5D)%7Bfor(%3B(p%3Dp.previousSibling)%26%26p.nodeType!%3D%3D1%3B)%3Bg%5Bm%5D%3Dl%7C%7Cp%26%26p.nodeName.toLowerCase()%3D%3D%3Dh%3Fp%7C%7Cfalse%3Ap%3D%3D%3Dh%7Dl%26%26k.filter(h%2Cg%2Ctrue)%7D%2C">"%3Afunction(g%2Ch)%7Bvar l%3Dtypeof h%3D%3D%3D"string"%3Bif(l%26%26!%2F%5CW%2F.test(h))%7Bh%3Dh.toLowerCase()%3Bfor(var m%3D0%2Cq%3Dg.length%3Bm<q%3Bm%2B%2B)%7Bvar p%3Dg%5Bm%5D%3Bif(p)%7Bl%3Dp.parentNode%3Bg%5Bm%5D%3Dl.nodeName.toLowerCase()%3D%3D%3Dh%3Fl%3Afalse%7D%7D%7Delse%7Bm%3D0%3Bfor(q%3Dg.length%3Bm<q%3Bm%2B%2B)if(p%3Dg%5Bm%5D)g%5Bm%5D%3D%0A%09l%3Fp.parentNode%3Ap.parentNode%3D%3D%3Dh%3Bl%26%26k.filter(h%2Cg%2Ctrue)%7D%7D%2C""%3Afunction(g%2Ch%2Cl)%7Bvar m%3De%2B%2B%2Cq%3Dd%3Bif(typeof h%3D%3D%3D"string"%26%26!%2F%5CW%2F.test(h))%7Bvar p%3Dh%3Dh.toLowerCase()%3Bq%3Db%7Dq("parentNode"%2Ch%2Cm%2Cg%2Cp%2Cl)%7D%2C"~"%3Afunction(g%2Ch%2Cl)%7Bvar m%3De%2B%2B%2Cq%3Dd%3Bif(typeof h%3D%3D%3D"string"%26%26!%2F%5CW%2F.test(h))%7Bvar p%3Dh%3Dh.toLowerCase()%3Bq%3Db%7Dq("previousSibling"%2Ch%2Cm%2Cg%2Cp%2Cl)%7D%7D%2Cfind%3A%7BID%3Afunction(g%2Ch%2Cl)%7Bif(typeof h.getElementById!%3D%3D"undefined"%26%26!l)return(g%3Dh.getElementById(g%5B1%5D))%3F%5Bg%5D%3A%5B%5D%7D%2CNAME%3Afunction(g%2Ch)%7Bif(typeof h.getElementsByName!%3D%3D"undefined")%7Bvar l%3D%5B%5D%3B%0A%09h%3Dh.getElementsByName(g%5B1%5D)%3Bfor(var m%3D0%2Cq%3Dh.length%3Bm<q%3Bm%2B%2B)h%5Bm%5D.getAttribute("name")%3D%3D%3Dg%5B1%5D%26%26l.push(h%5Bm%5D)%3Breturn l.length%3D%3D%3D0%3Fnull%3Al%7D%7D%2CTAG%3Afunction(g%2Ch)%7Breturn h.getElementsByTagName(g%5B1%5D)%7D%7D%2CpreFilter%3A%7BCLASS%3Afunction(g%2Ch%2Cl%2Cm%2Cq%2Cp)%7Bg%3D" "%2Bg%5B1%5D.replace(%2F%5C%5C%2Fg%2C"")%2B" "%3Bif(p)return g%3Bp%3D0%3Bfor(var v%3B(v%3Dh%5Bp%5D)!%3Dnull%3Bp%2B%2B)if(v)if(q%5E(v.className%26%26(" "%2Bv.className%2B" ").replace(%2F%5B%5Ct%5Cn%5D%2Fg%2C" ").indexOf(g)>%3D0))l%7C%7Cm.push(v)%3Belse if(l)h%5Bp%5D%3Dfalse%3Breturn false%7D%2CID%3Afunction(g)%7Breturn g%5B1%5D.replace(%2F%5C%5C%2Fg%2C"")%7D%2CTAG%3Afunction(g)%7Breturn g%5B1%5D.toLowerCase()%7D%2C%0A%09CHILD%3Afunction(g)%7Bif(g%5B1%5D%3D%3D%3D"nth")%7Bvar h%3D%2F(-%3F)(%5Cd*)n((%3F%3A%5C%2B%7C-)%3F%5Cd*)%2F.exec(g%5B2%5D%3D%3D%3D"even"%26%26"2n"%7C%7Cg%5B2%5D%3D%3D%3D"odd"%26%26"2n%2B1"%7C%7C!%2F%5CD%2F.test(g%5B2%5D)%26%26"0n%2B"%2Bg%5B2%5D%7C%7Cg%5B2%5D)%3Bg%5B2%5D%3Dh%5B1%5D%2B(h%5B2%5D%7C%7C1)-0%3Bg%5B3%5D%3Dh%5B3%5D-0%7Dg%5B0%5D%3De%2B%2B%3Breturn g%7D%2CATTR%3Afunction(g%2Ch%2Cl%2Cm%2Cq%2Cp)%7Bh%3Dg%5B1%5D.replace(%2F%5C%5C%2Fg%2C"")%3Bif(!p%26%26n.attrMap%5Bh%5D)g%5B1%5D%3Dn.attrMap%5Bh%5D%3Bif(g%5B2%5D%3D%3D%3D"~%3D")g%5B4%5D%3D" "%2Bg%5B4%5D%2B" "%3Breturn g%7D%2CPSEUDO%3Afunction(g%2Ch%2Cl%2Cm%2Cq)%7Bif(g%5B1%5D%3D%3D%3D"not")if((f.exec(g%5B3%5D)%7C%7C"").length>1%7C%7C%2F%5E%5Cw%2F.test(g%5B3%5D))g%5B3%5D%3Dk(g%5B3%5D%2Cnull%2Cnull%2Ch)%3Belse%7Bg%3Dk.filter(g%5B3%5D%2Ch%2Cl%2Ctrue%5Eq)%3Bl%7C%7Cm.push.apply(m%2C%0A%09g)%3Breturn false%7Delse if(n.match.POS.test(g%5B0%5D)%7C%7Cn.match.CHILD.test(g%5B0%5D))return true%3Breturn g%7D%2CPOS%3Afunction(g)%7Bg.unshift(true)%3Breturn g%7D%7D%2Cfilters%3A%7Benabled%3Afunction(g)%7Breturn g.disabled%3D%3D%3Dfalse%26%26g.type!%3D%3D"hidden"%7D%2Cdisabled%3Afunction(g)%7Breturn g.disabled%3D%3D%3Dtrue%7D%2Cchecked%3Afunction(g)%7Breturn g.checked%3D%3D%3Dtrue%7D%2Cselected%3Afunction(g)%7Breturn g.selected%3D%3D%3Dtrue%7D%2Cparent%3Afunction(g)%7Breturn!!g.firstChild%7D%2Cempty%3Afunction(g)%7Breturn!g.firstChild%7D%2Chas%3Afunction(g%2Ch%2Cl)%7Breturn!!k(l%5B3%5D%2Cg).length%7D%2Cheader%3Afunction(g)%7Breturn%2Fh%5Cd%2Fi.test(g.nodeName)%7D%2C%0A%09text%3Afunction(g)%7Breturn"text"%3D%3D%3Dg.type%7D%2Cradio%3Afunction(g)%7Breturn"radio"%3D%3D%3Dg.type%7D%2Ccheckbox%3Afunction(g)%7Breturn"checkbox"%3D%3D%3Dg.type%7D%2Cfile%3Afunction(g)%7Breturn"file"%3D%3D%3Dg.type%7D%2Cpassword%3Afunction(g)%7Breturn"password"%3D%3D%3Dg.type%7D%2Csubmit%3Afunction(g)%7Breturn"submit"%3D%3D%3Dg.type%7D%2Cimage%3Afunction(g)%7Breturn"image"%3D%3D%3Dg.type%7D%2Creset%3Afunction(g)%7Breturn"reset"%3D%3D%3Dg.type%7D%2Cbutton%3Afunction(g)%7Breturn"button"%3D%3D%3Dg.type%7C%7Cg.nodeName.toLowerCase()%3D%3D%3D"button"%7D%2Cinput%3Afunction(g)%7Breturn%2Finput%7Cselect%7Ctextarea%7Cbutton%2Fi.test(g.nodeName)%7D%7D%2C%0A%09setFilters%3A%7Bfirst%3Afunction(g%2Ch)%7Breturn h%3D%3D%3D0%7D%2Clast%3Afunction(g%2Ch%2Cl%2Cm)%7Breturn h%3D%3D%3Dm.length-1%7D%2Ceven%3Afunction(g%2Ch)%7Breturn h%252%3D%3D%3D0%7D%2Codd%3Afunction(g%2Ch)%7Breturn h%252%3D%3D%3D1%7D%2Clt%3Afunction(g%2Ch%2Cl)%7Breturn h<l%5B3%5D-0%7D%2Cgt%3Afunction(g%2Ch%2Cl)%7Breturn h>l%5B3%5D-0%7D%2Cnth%3Afunction(g%2Ch%2Cl)%7Breturn l%5B3%5D-0%3D%3D%3Dh%7D%2Ceq%3Afunction(g%2Ch%2Cl)%7Breturn l%5B3%5D-0%3D%3D%3Dh%7D%7D%2Cfilter%3A%7BPSEUDO%3Afunction(g%2Ch%2Cl%2Cm)%7Bvar q%3Dh%5B1%5D%2Cp%3Dn.filters%5Bq%5D%3Bif(p)return p(g%2Cl%2Ch%2Cm)%3Belse if(q%3D%3D%3D"contains")return(g.textContent%7C%7Cg.innerText%7C%7Ca(%5Bg%5D)%7C%7C"").indexOf(h%5B3%5D)>%3D0%3Belse if(q%3D%3D%3D"not")%7Bh%3D%0A%09h%5B3%5D%3Bl%3D0%3Bfor(m%3Dh.length%3Bl<m%3Bl%2B%2B)if(h%5Bl%5D%3D%3D%3Dg)return false%3Breturn true%7Delse k.error("Syntax error%2C unrecognized expression%3A "%2Bq)%7D%2CCHILD%3Afunction(g%2Ch)%7Bvar l%3Dh%5B1%5D%2Cm%3Dg%3Bswitch(l)%7Bcase "only"%3Acase "first"%3Afor(%3Bm%3Dm.previousSibling%3B)if(m.nodeType%3D%3D%3D1)return false%3Bif(l%3D%3D%3D"first")return true%3Bm%3Dg%3Bcase "last"%3Afor(%3Bm%3Dm.nextSibling%3B)if(m.nodeType%3D%3D%3D1)return false%3Breturn true%3Bcase "nth"%3Al%3Dh%5B2%5D%3Bvar q%3Dh%5B3%5D%3Bif(l%3D%3D%3D1%26%26q%3D%3D%3D0)return true%3Bh%3Dh%5B0%5D%3Bvar p%3Dg.parentNode%3Bif(p%26%26(p.sizcache!%3D%3Dh%7C%7C!g.nodeIndex))%7Bvar v%3D0%3Bfor(m%3Dp.firstChild%3Bm%3Bm%3D%0A%09m.nextSibling)if(m.nodeType%3D%3D%3D1)m.nodeIndex%3D%2B%2Bv%3Bp.sizcache%3Dh%7Dg%3Dg.nodeIndex-q%3Breturn l%3D%3D%3D0%3Fg%3D%3D%3D0%3Ag%25l%3D%3D%3D0%26%26g%2Fl>%3D0%7D%7D%2CID%3Afunction(g%2Ch)%7Breturn g.nodeType%3D%3D%3D1%26%26g.getAttribute("id")%3D%3D%3Dh%7D%2CTAG%3Afunction(g%2Ch)%7Breturn h%3D%3D%3D"*"%26%26g.nodeType%3D%3D%3D1%7C%7Cg.nodeName.toLowerCase()%3D%3D%3Dh%7D%2CCLASS%3Afunction(g%2Ch)%7Breturn(" "%2B(g.className%7C%7Cg.getAttribute("class"))%2B" ").indexOf(h)>-1%7D%2CATTR%3Afunction(g%2Ch)%7Bvar l%3Dh%5B1%5D%3Bg%3Dn.attrHandle%5Bl%5D%3Fn.attrHandle%5Bl%5D(g)%3Ag%5Bl%5D!%3Dnull%3Fg%5Bl%5D%3Ag.getAttribute(l)%3Bl%3Dg%2B""%3Bvar m%3Dh%5B2%5D%3Bh%3Dh%5B4%5D%3Breturn g%3D%3Dnull%3Fm%3D%3D%3D"!%3D"%3Am%3D%3D%3D%0A%09"%3D"%3Fl%3D%3D%3Dh%3Am%3D%3D%3D"*%3D"%3Fl.indexOf(h)>%3D0%3Am%3D%3D%3D"~%3D"%3F(" "%2Bl%2B" ").indexOf(h)>%3D0%3A!h%3Fl%26%26g!%3D%3Dfalse%3Am%3D%3D%3D"!%3D"%3Fl!%3D%3Dh%3Am%3D%3D%3D"%5E%3D"%3Fl.indexOf(h)%3D%3D%3D0%3Am%3D%3D%3D"%24%3D"%3Fl.substr(l.length-h.length)%3D%3D%3Dh%3Am%3D%3D%3D"%7C%3D"%3Fl%3D%3D%3Dh%7C%7Cl.substr(0%2Ch.length%2B1)%3D%3D%3Dh%2B"-"%3Afalse%7D%2CPOS%3Afunction(g%2Ch%2Cl%2Cm)%7Bvar q%3Dn.setFilters%5Bh%5B2%5D%5D%3Bif(q)return q(g%2Cl%2Ch%2Cm)%7D%7D%7D%2Cr%3Dn.match.POS%3Bfor(var u in n.match)%7Bn.match%5Bu%5D%3Dnew RegExp(n.match%5Bu%5D.source%2B%2F(%3F!%5B%5E%5C%5B%5D*%5C%5D)(%3F!%5B%5E%5C(%5D*%5C))%2F.source)%3Bn.leftMatch%5Bu%5D%3Dnew RegExp(%2F(%5E(%3F%3A.%7C%5Cr%7C%5Cn)*%3F)%2F.source%2Bn.match%5Bu%5D.source.replace(%2F%5C%5C(%5Cd%2B)%2Fg%2Cfunction(g%2C%0A%09h)%7Breturn"%5C%5C"%2B(h-0%2B1)%7D))%7Dvar z%3Dfunction(g%2Ch)%7Bg%3DArray.prototype.slice.call(g%2C0)%3Bif(h)%7Bh.push.apply(h%2Cg)%3Breturn h%7Dreturn g%7D%3Btry%7BArray.prototype.slice.call(s.documentElement.childNodes%2C0)%7Dcatch(C)%7Bz%3Dfunction(g%2Ch)%7Bh%3Dh%7C%7C%5B%5D%3Bif(j.call(g)%3D%3D%3D"%5Bobject Array%5D")Array.prototype.push.apply(h%2Cg)%3Belse if(typeof g.length%3D%3D%3D"number")for(var l%3D0%2Cm%3Dg.length%3Bl<m%3Bl%2B%2B)h.push(g%5Bl%5D)%3Belse for(l%3D0%3Bg%5Bl%5D%3Bl%2B%2B)h.push(g%5Bl%5D)%3Breturn h%7D%7Dvar B%3Bif(s.documentElement.compareDocumentPosition)B%3Dfunction(g%2Ch)%7Bif(!g.compareDocumentPosition%7C%7C%0A%09!h.compareDocumentPosition)%7Bif(g%3D%3Dh)i%3Dtrue%3Breturn g.compareDocumentPosition%3F-1%3A1%7Dg%3Dg.compareDocumentPosition(h)%264%3F-1%3Ag%3D%3D%3Dh%3F0%3A1%3Bif(g%3D%3D%3D0)i%3Dtrue%3Breturn g%7D%3Belse if("sourceIndex"in s.documentElement)B%3Dfunction(g%2Ch)%7Bif(!g.sourceIndex%7C%7C!h.sourceIndex)%7Bif(g%3D%3Dh)i%3Dtrue%3Breturn g.sourceIndex%3F-1%3A1%7Dg%3Dg.sourceIndex-h.sourceIndex%3Bif(g%3D%3D%3D0)i%3Dtrue%3Breturn g%7D%3Belse if(s.createRange)B%3Dfunction(g%2Ch)%7Bif(!g.ownerDocument%7C%7C!h.ownerDocument)%7Bif(g%3D%3Dh)i%3Dtrue%3Breturn g.ownerDocument%3F-1%3A1%7Dvar l%3Dg.ownerDocument.createRange()%2Cm%3D%0A%09h.ownerDocument.createRange()%3Bl.setStart(g%2C0)%3Bl.setEnd(g%2C0)%3Bm.setStart(h%2C0)%3Bm.setEnd(h%2C0)%3Bg%3Dl.compareBoundaryPoints(Range.START_TO_END%2Cm)%3Bif(g%3D%3D%3D0)i%3Dtrue%3Breturn g%7D%3B(function()%7Bvar g%3Ds.createElement("div")%2Ch%3D"script"%2B(new Date).getTime()%3Bg.innerHTML%3D"<a name%3D'"%2Bh%2B"'%2F>"%3Bvar l%3Ds.documentElement%3Bl.insertBefore(g%2Cl.firstChild)%3Bif(s.getElementById(h))%7Bn.find.ID%3Dfunction(m%2Cq%2Cp)%7Bif(typeof q.getElementById!%3D%3D"undefined"%26%26!p)return(q%3Dq.getElementById(m%5B1%5D))%3Fq.id%3D%3D%3Dm%5B1%5D%7C%7Ctypeof q.getAttributeNode!%3D%3D"undefined"%26%26%0A%09q.getAttributeNode("id").nodeValue%3D%3D%3Dm%5B1%5D%3F%5Bq%5D%3Aw%3A%5B%5D%7D%3Bn.filter.ID%3Dfunction(m%2Cq)%7Bvar p%3Dtypeof m.getAttributeNode!%3D%3D"undefined"%26%26m.getAttributeNode("id")%3Breturn m.nodeType%3D%3D%3D1%26%26p%26%26p.nodeValue%3D%3D%3Dq%7D%7Dl.removeChild(g)%3Bl%3Dg%3Dnull%7D)()%3B(function()%7Bvar g%3Ds.createElement("div")%3Bg.appendChild(s.createComment(""))%3Bif(g.getElementsByTagName("*").length>0)n.find.TAG%3Dfunction(h%2Cl)%7Bl%3Dl.getElementsByTagName(h%5B1%5D)%3Bif(h%5B1%5D%3D%3D%3D"*")%7Bh%3D%5B%5D%3Bfor(var m%3D0%3Bl%5Bm%5D%3Bm%2B%2B)l%5Bm%5D.nodeType%3D%3D%3D1%26%26h.push(l%5Bm%5D)%3Bl%3Dh%7Dreturn l%7D%3Bg.innerHTML%3D"<a href%3D'%23'><%2Fa>"%3B%0A%09if(g.firstChild%26%26typeof g.firstChild.getAttribute!%3D%3D"undefined"%26%26g.firstChild.getAttribute("href")!%3D%3D"%23")n.attrHandle.href%3Dfunction(h)%7Breturn h.getAttribute("href"%2C2)%7D%3Bg%3Dnull%7D)()%3Bs.querySelectorAll%26%26function()%7Bvar g%3Dk%2Ch%3Ds.createElement("div")%3Bh.innerHTML%3D"<p class%3D'TEST'><%2Fp>"%3Bif(!(h.querySelectorAll%26%26h.querySelectorAll(".TEST").length%3D%3D%3D0))%7Bk%3Dfunction(m%2Cq%2Cp%2Cv)%7Bq%3Dq%7C%7Cs%3Bif(!v%26%26q.nodeType%3D%3D%3D9%26%26!x(q))try%7Breturn z(q.querySelectorAll(m)%2Cp)%7Dcatch(t)%7B%7Dreturn g(m%2Cq%2Cp%2Cv)%7D%3Bfor(var l in g)k%5Bl%5D%3Dg%5Bl%5D%3Bh%3Dnull%7D%7D()%3B%0A%09(function()%7Bvar g%3Ds.createElement("div")%3Bg.innerHTML%3D"<div class%3D'test e'><%2Fdiv><div class%3D'test'><%2Fdiv>"%3Bif(!(!g.getElementsByClassName%7C%7Cg.getElementsByClassName("e").length%3D%3D%3D0))%7Bg.lastChild.className%3D"e"%3Bif(g.getElementsByClassName("e").length!%3D%3D1)%7Bn.order.splice(1%2C0%2C"CLASS")%3Bn.find.CLASS%3Dfunction(h%2Cl%2Cm)%7Bif(typeof l.getElementsByClassName!%3D%3D"undefined"%26%26!m)return l.getElementsByClassName(h%5B1%5D)%7D%3Bg%3Dnull%7D%7D%7D)()%3Bvar E%3Ds.compareDocumentPosition%3Ffunction(g%2Ch)%7Breturn!!(g.compareDocumentPosition(h)%2616)%7D%3A%0A%09function(g%2Ch)%7Breturn g!%3D%3Dh%26%26(g.contains%3Fg.contains(h)%3Atrue)%7D%2Cx%3Dfunction(g)%7Breturn(g%3D(g%3Fg.ownerDocument%7C%7Cg%3A0).documentElement)%3Fg.nodeName!%3D%3D"HTML"%3Afalse%7D%2Cga%3Dfunction(g%2Ch)%7Bvar l%3D%5B%5D%2Cm%3D""%2Cq%3Bfor(h%3Dh.nodeType%3F%5Bh%5D%3Ah%3Bq%3Dn.match.PSEUDO.exec(g)%3B)%7Bm%2B%3Dq%5B0%5D%3Bg%3Dg.replace(n.match.PSEUDO%2C"")%7Dg%3Dn.relative%5Bg%5D%3Fg%2B"*"%3Ag%3Bq%3D0%3Bfor(var p%3Dh.length%3Bq<p%3Bq%2B%2B)k(g%2Ch%5Bq%5D%2Cl)%3Breturn k.filter(m%2Cl)%7D%3Bc.find%3Dk%3Bc.expr%3Dk.selectors%3Bc.expr%5B"%3A"%5D%3Dc.expr.filters%3Bc.unique%3Dk.uniqueSort%3Bc.text%3Da%3Bc.isXMLDoc%3Dx%3Bc.contains%3DE%7D)()%3Bvar eb%3D%2FUntil%24%2F%2Cfb%3D%2F%5E(%3F%3Aparents%7CprevUntil%7CprevAll)%2F%2C%0A%09gb%3D%2F%2C%2F%3BR%3DArray.prototype.slice%3Bvar Ia%3Dfunction(a%2Cb%2Cd)%7Bif(c.isFunction(b))return c.grep(a%2Cfunction(e%2Cj)%7Breturn!!b.call(e%2Cj%2Ce)%3D%3D%3Dd%7D)%3Belse if(b.nodeType)return c.grep(a%2Cfunction(e)%7Breturn e%3D%3D%3Db%3D%3D%3Dd%7D)%3Belse if(typeof b%3D%3D%3D"string")%7Bvar f%3Dc.grep(a%2Cfunction(e)%7Breturn e.nodeType%3D%3D%3D1%7D)%3Bif(Ua.test(b))return c.filter(b%2Cf%2C!d)%3Belse b%3Dc.filter(b%2Cf)%7Dreturn c.grep(a%2Cfunction(e)%7Breturn c.inArray(e%2Cb)>%3D0%3D%3D%3Dd%7D)%7D%3Bc.fn.extend(%7Bfind%3Afunction(a)%7Bfor(var b%3Dthis.pushStack(""%2C"find"%2Ca)%2Cd%3D0%2Cf%3D0%2Ce%3Dthis.length%3Bf<e%3Bf%2B%2B)%7Bd%3Db.length%3B%0A%09c.find(a%2Cthis%5Bf%5D%2Cb)%3Bif(f>0)for(var j%3Dd%3Bj<b.length%3Bj%2B%2B)for(var i%3D0%3Bi<d%3Bi%2B%2B)if(b%5Bi%5D%3D%3D%3Db%5Bj%5D)%7Bb.splice(j--%2C1)%3Bbreak%7D%7Dreturn b%7D%2Chas%3Afunction(a)%7Bvar b%3Dc(a)%3Breturn this.filter(function()%7Bfor(var d%3D0%2Cf%3Db.length%3Bd<f%3Bd%2B%2B)if(c.contains(this%2Cb%5Bd%5D))return true%7D)%7D%2Cnot%3Afunction(a)%7Breturn this.pushStack(Ia(this%2Ca%2Cfalse)%2C"not"%2Ca)%7D%2Cfilter%3Afunction(a)%7Breturn this.pushStack(Ia(this%2Ca%2Ctrue)%2C"filter"%2Ca)%7D%2Cis%3Afunction(a)%7Breturn!!a%26%26c.filter(a%2Cthis).length>0%7D%2Cclosest%3Afunction(a%2Cb)%7Bif(c.isArray(a))%7Bvar d%3D%5B%5D%2Cf%3Dthis%5B0%5D%2Ce%2Cj%3D%0A%09%7B%7D%2Ci%3Bif(f%26%26a.length)%7Be%3D0%3Bfor(var o%3Da.length%3Be<o%3Be%2B%2B)%7Bi%3Da%5Be%5D%3Bj%5Bi%5D%7C%7C(j%5Bi%5D%3Dc.expr.match.POS.test(i)%3Fc(i%2Cb%7C%7Cthis.context)%3Ai)%7Dfor(%3Bf%26%26f.ownerDocument%26%26f!%3D%3Db%3B)%7Bfor(i in j)%7Be%3Dj%5Bi%5D%3Bif(e.jquery%3Fe.index(f)>-1%3Ac(f).is(e))%7Bd.push(%7Bselector%3Ai%2Celem%3Af%7D)%3Bdelete j%5Bi%5D%7D%7Df%3Df.parentNode%7D%7Dreturn d%7Dvar k%3Dc.expr.match.POS.test(a)%3Fc(a%2Cb%7C%7Cthis.context)%3Anull%3Breturn this.map(function(n%2Cr)%7Bfor(%3Br%26%26r.ownerDocument%26%26r!%3D%3Db%3B)%7Bif(k%3Fk.index(r)>-1%3Ac(r).is(a))return r%3Br%3Dr.parentNode%7Dreturn null%7D)%7D%2Cindex%3Afunction(a)%7Bif(!a%7C%7Ctypeof a%3D%3D%3D%0A%09"string")return c.inArray(this%5B0%5D%2Ca%3Fc(a)%3Athis.parent().children())%3Breturn c.inArray(a.jquery%3Fa%5B0%5D%3Aa%2Cthis)%7D%2Cadd%3Afunction(a%2Cb)%7Ba%3Dtypeof a%3D%3D%3D"string"%3Fc(a%2Cb%7C%7Cthis.context)%3Ac.makeArray(a)%3Bb%3Dc.merge(this.get()%2Ca)%3Breturn this.pushStack(qa(a%5B0%5D)%7C%7Cqa(b%5B0%5D)%3Fb%3Ac.unique(b))%7D%2CandSelf%3Afunction()%7Breturn this.add(this.prevObject)%7D%7D)%3Bc.each(%7Bparent%3Afunction(a)%7Breturn(a%3Da.parentNode)%26%26a.nodeType!%3D%3D11%3Fa%3Anull%7D%2Cparents%3Afunction(a)%7Breturn c.dir(a%2C"parentNode")%7D%2CparentsUntil%3Afunction(a%2Cb%2Cd)%7Breturn c.dir(a%2C"parentNode"%2C%0A%09d)%7D%2Cnext%3Afunction(a)%7Breturn c.nth(a%2C2%2C"nextSibling")%7D%2Cprev%3Afunction(a)%7Breturn c.nth(a%2C2%2C"previousSibling")%7D%2CnextAll%3Afunction(a)%7Breturn c.dir(a%2C"nextSibling")%7D%2CprevAll%3Afunction(a)%7Breturn c.dir(a%2C"previousSibling")%7D%2CnextUntil%3Afunction(a%2Cb%2Cd)%7Breturn c.dir(a%2C"nextSibling"%2Cd)%7D%2CprevUntil%3Afunction(a%2Cb%2Cd)%7Breturn c.dir(a%2C"previousSibling"%2Cd)%7D%2Csiblings%3Afunction(a)%7Breturn c.sibling(a.parentNode.firstChild%2Ca)%7D%2Cchildren%3Afunction(a)%7Breturn c.sibling(a.firstChild)%7D%2Ccontents%3Afunction(a)%7Breturn c.nodeName(a%2C"iframe")%3F%0A%09a.contentDocument%7C%7Ca.contentWindow.document%3Ac.makeArray(a.childNodes)%7D%7D%2Cfunction(a%2Cb)%7Bc.fn%5Ba%5D%3Dfunction(d%2Cf)%7Bvar e%3Dc.map(this%2Cb%2Cd)%3Beb.test(a)%7C%7C(f%3Dd)%3Bif(f%26%26typeof f%3D%3D%3D"string")e%3Dc.filter(f%2Ce)%3Be%3Dthis.length>1%3Fc.unique(e)%3Ae%3Bif((this.length>1%7C%7Cgb.test(f))%26%26fb.test(a))e%3De.reverse()%3Breturn this.pushStack(e%2Ca%2CR.call(arguments).join("%2C"))%7D%7D)%3Bc.extend(%7Bfilter%3Afunction(a%2Cb%2Cd)%7Bif(d)a%3D"%3Anot("%2Ba%2B")"%3Breturn c.find.matches(a%2Cb)%7D%2Cdir%3Afunction(a%2Cb%2Cd)%7Bvar f%3D%5B%5D%3Bfor(a%3Da%5Bb%5D%3Ba%26%26a.nodeType!%3D%3D9%26%26(d%3D%3D%3Dw%7C%7Ca.nodeType!%3D%3D1%7C%7C!c(a).is(d))%3B)%7Ba.nodeType%3D%3D%3D%0A%091%26%26f.push(a)%3Ba%3Da%5Bb%5D%7Dreturn f%7D%2Cnth%3Afunction(a%2Cb%2Cd)%7Bb%3Db%7C%7C1%3Bfor(var f%3D0%3Ba%3Ba%3Da%5Bd%5D)if(a.nodeType%3D%3D%3D1%26%26%2B%2Bf%3D%3D%3Db)break%3Breturn a%7D%2Csibling%3Afunction(a%2Cb)%7Bfor(var d%3D%5B%5D%3Ba%3Ba%3Da.nextSibling)a.nodeType%3D%3D%3D1%26%26a!%3D%3Db%26%26d.push(a)%3Breturn d%7D%7D)%3Bvar Ja%3D%2F jQuery%5Cd%2B%3D"(%3F%3A%5Cd%2B%7Cnull)"%2Fg%2CV%3D%2F%5E%5Cs%2B%2F%2CKa%3D%2F(<(%5B%5Cw%3A%5D%2B)%5B%5E>%5D*%3F)%5C%2F>%2Fg%2Chb%3D%2F%5E(%3F%3Aarea%7Cbr%7Ccol%7Cembed%7Chr%7Cimg%7Cinput%7Clink%7Cmeta%7Cparam)%24%2Fi%2CLa%3D%2F<(%5B%5Cw%3A%5D%2B)%2F%2Cib%3D%2F<tbody%2Fi%2Cjb%3D%2F<%7C%26%23%3F%5Cw%2B%3B%2F%2Cta%3D%2F<script%7C<object%7C<embed%7C<option%7C<style%2Fi%2Cua%3D%2Fchecked%5Cs*(%3F%3A%5B%5E%3D%5D%7C%3D%5Cs*.checked.)%2Fi%2CMa%3Dfunction(a%2Cb%2Cd)%7Breturn hb.test(d)%3F%0A%09a%3Ab%2B"><%2F"%2Bd%2B">"%7D%2CF%3D%7Boption%3A%5B1%2C"<select multiple%3D'multiple'>"%2C"<%2Fselect>"%5D%2Clegend%3A%5B1%2C"<fieldset>"%2C"<%2Ffieldset>"%5D%2Cthead%3A%5B1%2C"<table>"%2C"<%2Ftable>"%5D%2Ctr%3A%5B2%2C"<table><tbody>"%2C"<%2Ftbody><%2Ftable>"%5D%2Ctd%3A%5B3%2C"<table><tbody><tr>"%2C"<%2Ftr><%2Ftbody><%2Ftable>"%5D%2Ccol%3A%5B2%2C"<table><tbody><%2Ftbody><colgroup>"%2C"<%2Fcolgroup><%2Ftable>"%5D%2Carea%3A%5B1%2C"<map>"%2C"<%2Fmap>"%5D%2C_default%3A%5B0%2C""%2C""%5D%7D%3BF.optgroup%3DF.option%3BF.tbody%3DF.tfoot%3DF.colgroup%3DF.caption%3DF.thead%3BF.th%3DF.td%3Bif(!c.support.htmlSerialize)F._default%3D%5B1%2C"div<div>"%2C"<%2Fdiv>"%5D%3Bc.fn.extend(%7Btext%3Afunction(a)%7Bif(c.isFunction(a))return this.each(function(b)%7Bvar d%3D%0A%09c(this)%3Bd.text(a.call(this%2Cb%2Cd.text()))%7D)%3Bif(typeof a!%3D%3D"object"%26%26a!%3D%3Dw)return this.empty().append((this%5B0%5D%26%26this%5B0%5D.ownerDocument%7C%7Cs).createTextNode(a))%3Breturn c.text(this)%7D%2CwrapAll%3Afunction(a)%7Bif(c.isFunction(a))return this.each(function(d)%7Bc(this).wrapAll(a.call(this%2Cd))%7D)%3Bif(this%5B0%5D)%7Bvar b%3Dc(a%2Cthis%5B0%5D.ownerDocument).eq(0).clone(true)%3Bthis%5B0%5D.parentNode%26%26b.insertBefore(this%5B0%5D)%3Bb.map(function()%7Bfor(var d%3Dthis%3Bd.firstChild%26%26d.firstChild.nodeType%3D%3D%3D1%3B)d%3Dd.firstChild%3Breturn d%7D).append(this)%7Dreturn this%7D%2C%0A%09wrapInner%3Afunction(a)%7Bif(c.isFunction(a))return this.each(function(b)%7Bc(this).wrapInner(a.call(this%2Cb))%7D)%3Breturn this.each(function()%7Bvar b%3Dc(this)%2Cd%3Db.contents()%3Bd.length%3Fd.wrapAll(a)%3Ab.append(a)%7D)%7D%2Cwrap%3Afunction(a)%7Breturn this.each(function()%7Bc(this).wrapAll(a)%7D)%7D%2Cunwrap%3Afunction()%7Breturn this.parent().each(function()%7Bc.nodeName(this%2C"body")%7C%7Cc(this).replaceWith(this.childNodes)%7D).end()%7D%2Cappend%3Afunction()%7Breturn this.domManip(arguments%2Ctrue%2Cfunction(a)%7Bthis.nodeType%3D%3D%3D1%26%26this.appendChild(a)%7D)%7D%2C%0A%09prepend%3Afunction()%7Breturn this.domManip(arguments%2Ctrue%2Cfunction(a)%7Bthis.nodeType%3D%3D%3D1%26%26this.insertBefore(a%2Cthis.firstChild)%7D)%7D%2Cbefore%3Afunction()%7Bif(this%5B0%5D%26%26this%5B0%5D.parentNode)return this.domManip(arguments%2Cfalse%2Cfunction(b)%7Bthis.parentNode.insertBefore(b%2Cthis)%7D)%3Belse if(arguments.length)%7Bvar a%3Dc(arguments%5B0%5D)%3Ba.push.apply(a%2Cthis.toArray())%3Breturn this.pushStack(a%2C"before"%2Carguments)%7D%7D%2Cafter%3Afunction()%7Bif(this%5B0%5D%26%26this%5B0%5D.parentNode)return this.domManip(arguments%2Cfalse%2Cfunction(b)%7Bthis.parentNode.insertBefore(b%2C%0A%09this.nextSibling)%7D)%3Belse if(arguments.length)%7Bvar a%3Dthis.pushStack(this%2C"after"%2Carguments)%3Ba.push.apply(a%2Cc(arguments%5B0%5D).toArray())%3Breturn a%7D%7D%2Cremove%3Afunction(a%2Cb)%7Bfor(var d%3D0%2Cf%3B(f%3Dthis%5Bd%5D)!%3Dnull%3Bd%2B%2B)if(!a%7C%7Cc.filter(a%2C%5Bf%5D).length)%7Bif(!b%26%26f.nodeType%3D%3D%3D1)%7Bc.cleanData(f.getElementsByTagName("*"))%3Bc.cleanData(%5Bf%5D)%7Df.parentNode%26%26f.parentNode.removeChild(f)%7Dreturn this%7D%2Cempty%3Afunction()%7Bfor(var a%3D0%2Cb%3B(b%3Dthis%5Ba%5D)!%3Dnull%3Ba%2B%2B)for(b.nodeType%3D%3D%3D1%26%26c.cleanData(b.getElementsByTagName("*"))%3Bb.firstChild%3B)b.removeChild(b.firstChild)%3B%0A%09return this%7D%2Cclone%3Afunction(a)%7Bvar b%3Dthis.map(function()%7Bif(!c.support.noCloneEvent%26%26!c.isXMLDoc(this))%7Bvar d%3Dthis.outerHTML%2Cf%3Dthis.ownerDocument%3Bif(!d)%7Bd%3Df.createElement("div")%3Bd.appendChild(this.cloneNode(true))%3Bd%3Dd.innerHTML%7Dreturn c.clean(%5Bd.replace(Ja%2C"").replace(%2F%3D(%5B%5E%3D"'>%5Cs%5D%2B%5C%2F)>%2Fg%2C'%3D"%241">').replace(V%2C"")%5D%2Cf)%5B0%5D%7Delse return this.cloneNode(true)%7D)%3Bif(a%3D%3D%3Dtrue)%7Bra(this%2Cb)%3Bra(this.find("*")%2Cb.find("*"))%7Dreturn b%7D%2Chtml%3Afunction(a)%7Bif(a%3D%3D%3Dw)return this%5B0%5D%26%26this%5B0%5D.nodeType%3D%3D%3D1%3Fthis%5B0%5D.innerHTML.replace(Ja%2C%0A%09"")%3Anull%3Belse if(typeof a%3D%3D%3D"string"%26%26!ta.test(a)%26%26(c.support.leadingWhitespace%7C%7C!V.test(a))%26%26!F%5B(La.exec(a)%7C%7C%5B""%2C""%5D)%5B1%5D.toLowerCase()%5D)%7Ba%3Da.replace(Ka%2CMa)%3Btry%7Bfor(var b%3D0%2Cd%3Dthis.length%3Bb<d%3Bb%2B%2B)if(this%5Bb%5D.nodeType%3D%3D%3D1)%7Bc.cleanData(this%5Bb%5D.getElementsByTagName("*"))%3Bthis%5Bb%5D.innerHTML%3Da%7D%7Dcatch(f)%7Bthis.empty().append(a)%7D%7Delse c.isFunction(a)%3Fthis.each(function(e)%7Bvar j%3Dc(this)%2Ci%3Dj.html()%3Bj.empty().append(function()%7Breturn a.call(this%2Ce%2Ci)%7D)%7D)%3Athis.empty().append(a)%3Breturn this%7D%2CreplaceWith%3Afunction(a)%7Bif(this%5B0%5D%26%26%0A%09this%5B0%5D.parentNode)%7Bif(c.isFunction(a))return this.each(function(b)%7Bvar d%3Dc(this)%2Cf%3Dd.html()%3Bd.replaceWith(a.call(this%2Cb%2Cf))%7D)%3Bif(typeof a!%3D%3D"string")a%3Dc(a).detach()%3Breturn this.each(function()%7Bvar b%3Dthis.nextSibling%2Cd%3Dthis.parentNode%3Bc(this).remove()%3Bb%3Fc(b).before(a)%3Ac(d).append(a)%7D)%7Delse return this.pushStack(c(c.isFunction(a)%3Fa()%3Aa)%2C"replaceWith"%2Ca)%7D%2Cdetach%3Afunction(a)%7Breturn this.remove(a%2Ctrue)%7D%2CdomManip%3Afunction(a%2Cb%2Cd)%7Bfunction f(u)%7Breturn c.nodeName(u%2C"table")%3Fu.getElementsByTagName("tbody")%5B0%5D%7C%7C%0A%09u.appendChild(u.ownerDocument.createElement("tbody"))%3Au%7Dvar e%2Cj%2Ci%3Da%5B0%5D%2Co%3D%5B%5D%2Ck%3Bif(!c.support.checkClone%26%26arguments.length%3D%3D%3D3%26%26typeof i%3D%3D%3D"string"%26%26ua.test(i))return this.each(function()%7Bc(this).domManip(a%2Cb%2Cd%2Ctrue)%7D)%3Bif(c.isFunction(i))return this.each(function(u)%7Bvar z%3Dc(this)%3Ba%5B0%5D%3Di.call(this%2Cu%2Cb%3Fz.html()%3Aw)%3Bz.domManip(a%2Cb%2Cd)%7D)%3Bif(this%5B0%5D)%7Be%3Di%26%26i.parentNode%3Be%3Dc.support.parentNode%26%26e%26%26e.nodeType%3D%3D%3D11%26%26e.childNodes.length%3D%3D%3Dthis.length%3F%7Bfragment%3Ae%7D%3Asa(a%2Cthis%2Co)%3Bk%3De.fragment%3Bif(j%3Dk.childNodes.length%3D%3D%3D%0A%091%3F(k%3Dk.firstChild)%3Ak.firstChild)%7Bb%3Db%26%26c.nodeName(j%2C"tr")%3Bfor(var n%3D0%2Cr%3Dthis.length%3Bn<r%3Bn%2B%2B)d.call(b%3Ff(this%5Bn%5D%2Cj)%3Athis%5Bn%5D%2Cn>0%7C%7Ce.cacheable%7C%7Cthis.length>1%3Fk.cloneNode(true)%3Ak)%7Do.length%26%26c.each(o%2CQa)%7Dreturn this%7D%7D)%3Bc.fragments%3D%7B%7D%3Bc.each(%7BappendTo%3A"append"%2CprependTo%3A"prepend"%2CinsertBefore%3A"before"%2CinsertAfter%3A"after"%2CreplaceAll%3A"replaceWith"%7D%2Cfunction(a%2Cb)%7Bc.fn%5Ba%5D%3Dfunction(d)%7Bvar f%3D%5B%5D%3Bd%3Dc(d)%3Bvar e%3Dthis.length%3D%3D%3D1%26%26this%5B0%5D.parentNode%3Bif(e%26%26e.nodeType%3D%3D%3D11%26%26e.childNodes.length%3D%3D%3D1%26%26d.length%3D%3D%3D1)%7Bd%5Bb%5D(this%5B0%5D)%3B%0A%09return this%7Delse%7Be%3D0%3Bfor(var j%3Dd.length%3Be<j%3Be%2B%2B)%7Bvar i%3D(e>0%3Fthis.clone(true)%3Athis).get()%3Bc.fn%5Bb%5D.apply(c(d%5Be%5D)%2Ci)%3Bf%3Df.concat(i)%7Dreturn this.pushStack(f%2Ca%2Cd.selector)%7D%7D%7D)%3Bc.extend(%7Bclean%3Afunction(a%2Cb%2Cd%2Cf)%7Bb%3Db%7C%7Cs%3Bif(typeof b.createElement%3D%3D%3D"undefined")b%3Db.ownerDocument%7C%7Cb%5B0%5D%26%26b%5B0%5D.ownerDocument%7C%7Cs%3Bfor(var e%3D%5B%5D%2Cj%3D0%2Ci%3B(i%3Da%5Bj%5D)!%3Dnull%3Bj%2B%2B)%7Bif(typeof i%3D%3D%3D"number")i%2B%3D""%3Bif(i)%7Bif(typeof i%3D%3D%3D"string"%26%26!jb.test(i))i%3Db.createTextNode(i)%3Belse if(typeof i%3D%3D%3D"string")%7Bi%3Di.replace(Ka%2CMa)%3Bvar o%3D(La.exec(i)%7C%7C%5B""%2C%0A%09""%5D)%5B1%5D.toLowerCase()%2Ck%3DF%5Bo%5D%7C%7CF._default%2Cn%3Dk%5B0%5D%2Cr%3Db.createElement("div")%3Bfor(r.innerHTML%3Dk%5B1%5D%2Bi%2Bk%5B2%5D%3Bn--%3B)r%3Dr.lastChild%3Bif(!c.support.tbody)%7Bn%3Dib.test(i)%3Bo%3Do%3D%3D%3D"table"%26%26!n%3Fr.firstChild%26%26r.firstChild.childNodes%3Ak%5B1%5D%3D%3D%3D"<table>"%26%26!n%3Fr.childNodes%3A%5B%5D%3Bfor(k%3Do.length-1%3Bk>%3D0%3B--k)c.nodeName(o%5Bk%5D%2C"tbody")%26%26!o%5Bk%5D.childNodes.length%26%26o%5Bk%5D.parentNode.removeChild(o%5Bk%5D)%7D!c.support.leadingWhitespace%26%26V.test(i)%26%26r.insertBefore(b.createTextNode(V.exec(i)%5B0%5D)%2Cr.firstChild)%3Bi%3Dr.childNodes%7Dif(i.nodeType)e.push(i)%3Belse e%3D%0A%09c.merge(e%2Ci)%7D%7Dif(d)for(j%3D0%3Be%5Bj%5D%3Bj%2B%2B)if(f%26%26c.nodeName(e%5Bj%5D%2C"script")%26%26(!e%5Bj%5D.type%7C%7Ce%5Bj%5D.type.toLowerCase()%3D%3D%3D"text%2Fjavascript"))f.push(e%5Bj%5D.parentNode%3Fe%5Bj%5D.parentNode.removeChild(e%5Bj%5D)%3Ae%5Bj%5D)%3Belse%7Be%5Bj%5D.nodeType%3D%3D%3D1%26%26e.splice.apply(e%2C%5Bj%2B1%2C0%5D.concat(c.makeArray(e%5Bj%5D.getElementsByTagName("script"))))%3Bd.appendChild(e%5Bj%5D)%7Dreturn e%7D%2CcleanData%3Afunction(a)%7Bfor(var b%2Cd%2Cf%3Dc.cache%2Ce%3Dc.event.special%2Cj%3Dc.support.deleteExpando%2Ci%3D0%2Co%3B(o%3Da%5Bi%5D)!%3Dnull%3Bi%2B%2B)if(d%3Do%5Bc.expando%5D)%7Bb%3Df%5Bd%5D%3Bif(b.events)for(var k in b.events)e%5Bk%5D%3F%0A%09c.event.remove(o%2Ck)%3ACa(o%2Ck%2Cb.handle)%3Bif(j)delete o%5Bc.expando%5D%3Belse o.removeAttribute%26%26o.removeAttribute(c.expando)%3Bdelete f%5Bd%5D%7D%7D%7D)%3Bvar kb%3D%2Fz-%3Findex%7Cfont-%3Fweight%7Copacity%7Czoom%7Cline-%3Fheight%2Fi%2CNa%3D%2Falpha%5C(%5B%5E)%5D*%5C)%2F%2COa%3D%2Fopacity%3D(%5B%5E)%5D*)%2F%2Cha%3D%2Ffloat%2Fi%2Cia%3D%2F-(%5Ba-z%5D)%2Fig%2Clb%3D%2F(%5BA-Z%5D)%2Fg%2Cmb%3D%2F%5E-%3F%5Cd%2B(%3F%3Apx)%3F%24%2Fi%2Cnb%3D%2F%5E-%3F%5Cd%2F%2Cob%3D%7Bposition%3A"absolute"%2Cvisibility%3A"hidden"%2Cdisplay%3A"block"%7D%2Cpb%3D%5B"Left"%2C"Right"%5D%2Cqb%3D%5B"Top"%2C"Bottom"%5D%2Crb%3Ds.defaultView%26%26s.defaultView.getComputedStyle%2CPa%3Dc.support.cssFloat%3F"cssFloat"%3A"styleFloat"%2Cja%3D%0A%09function(a%2Cb)%7Breturn b.toUpperCase()%7D%3Bc.fn.css%3Dfunction(a%2Cb)%7Breturn X(this%2Ca%2Cb%2Ctrue%2Cfunction(d%2Cf%2Ce)%7Bif(e%3D%3D%3Dw)return c.curCSS(d%2Cf)%3Bif(typeof e%3D%3D%3D"number"%26%26!kb.test(f))e%2B%3D"px"%3Bc.style(d%2Cf%2Ce)%7D)%7D%3Bc.extend(%7Bstyle%3Afunction(a%2Cb%2Cd)%7Bif(!a%7C%7Ca.nodeType%3D%3D%3D3%7C%7Ca.nodeType%3D%3D%3D8)return w%3Bif((b%3D%3D%3D"width"%7C%7Cb%3D%3D%3D"height")%26%26parseFloat(d)<0)d%3Dw%3Bvar f%3Da.style%7C%7Ca%2Ce%3Dd!%3D%3Dw%3Bif(!c.support.opacity%26%26b%3D%3D%3D"opacity")%7Bif(e)%7Bf.zoom%3D1%3Bb%3DparseInt(d%2C10)%2B""%3D%3D%3D"NaN"%3F""%3A"alpha(opacity%3D"%2Bd*100%2B")"%3Ba%3Df.filter%7C%7Cc.curCSS(a%2C"filter")%7C%7C""%3Bf.filter%3D%0A%09Na.test(a)%3Fa.replace(Na%2Cb)%3Ab%7Dreturn f.filter%26%26f.filter.indexOf("opacity%3D")>%3D0%3FparseFloat(Oa.exec(f.filter)%5B1%5D)%2F100%2B""%3A""%7Dif(ha.test(b))b%3DPa%3Bb%3Db.replace(ia%2Cja)%3Bif(e)f%5Bb%5D%3Dd%3Breturn f%5Bb%5D%7D%2Ccss%3Afunction(a%2Cb%2Cd%2Cf)%7Bif(b%3D%3D%3D"width"%7C%7Cb%3D%3D%3D"height")%7Bvar e%2Cj%3Db%3D%3D%3D"width"%3Fpb%3Aqb%3Bfunction i()%7Be%3Db%3D%3D%3D"width"%3Fa.offsetWidth%3Aa.offsetHeight%3Bf!%3D%3D"border"%26%26c.each(j%2Cfunction()%7Bf%7C%7C(e-%3DparseFloat(c.curCSS(a%2C"padding"%2Bthis%2Ctrue))%7C%7C0)%3Bif(f%3D%3D%3D"margin")e%2B%3DparseFloat(c.curCSS(a%2C"margin"%2Bthis%2Ctrue))%7C%7C0%3Belse e-%3DparseFloat(c.curCSS(a%2C%0A%09"border"%2Bthis%2B"Width"%2Ctrue))%7C%7C0%7D)%7Da.offsetWidth!%3D%3D0%3Fi()%3Ac.swap(a%2Cob%2Ci)%3Breturn Math.max(0%2CMath.round(e))%7Dreturn c.curCSS(a%2Cb%2Cd)%7D%2CcurCSS%3Afunction(a%2Cb%2Cd)%7Bvar f%2Ce%3Da.style%3Bif(!c.support.opacity%26%26b%3D%3D%3D"opacity"%26%26a.currentStyle)%7Bf%3DOa.test(a.currentStyle.filter%7C%7C"")%3FparseFloat(RegExp.%241)%2F100%2B""%3A""%3Breturn f%3D%3D%3D""%3F"1"%3Af%7Dif(ha.test(b))b%3DPa%3Bif(!d%26%26e%26%26e%5Bb%5D)f%3De%5Bb%5D%3Belse if(rb)%7Bif(ha.test(b))b%3D"float"%3Bb%3Db.replace(lb%2C"-%241").toLowerCase()%3Be%3Da.ownerDocument.defaultView%3Bif(!e)return null%3Bif(a%3De.getComputedStyle(a%2Cnull))f%3D%0A%09a.getPropertyValue(b)%3Bif(b%3D%3D%3D"opacity"%26%26f%3D%3D%3D"")f%3D"1"%7Delse if(a.currentStyle)%7Bd%3Db.replace(ia%2Cja)%3Bf%3Da.currentStyle%5Bb%5D%7C%7Ca.currentStyle%5Bd%5D%3Bif(!mb.test(f)%26%26nb.test(f))%7Bb%3De.left%3Bvar j%3Da.runtimeStyle.left%3Ba.runtimeStyle.left%3Da.currentStyle.left%3Be.left%3Dd%3D%3D%3D"fontSize"%3F"1em"%3Af%7C%7C0%3Bf%3De.pixelLeft%2B"px"%3Be.left%3Db%3Ba.runtimeStyle.left%3Dj%7D%7Dreturn f%7D%2Cswap%3Afunction(a%2Cb%2Cd)%7Bvar f%3D%7B%7D%3Bfor(var e in b)%7Bf%5Be%5D%3Da.style%5Be%5D%3Ba.style%5Be%5D%3Db%5Be%5D%7Dd.call(a)%3Bfor(e in b)a.style%5Be%5D%3Df%5Be%5D%7D%7D)%3Bif(c.expr%26%26c.expr.filters)%7Bc.expr.filters.hidden%3Dfunction(a)%7Bvar b%3D%0A%09a.offsetWidth%2Cd%3Da.offsetHeight%2Cf%3Da.nodeName.toLowerCase()%3D%3D%3D"tr"%3Breturn b%3D%3D%3D0%26%26d%3D%3D%3D0%26%26!f%3Ftrue%3Ab>0%26%26d>0%26%26!f%3Ffalse%3Ac.curCSS(a%2C"display")%3D%3D%3D"none"%7D%3Bc.expr.filters.visible%3Dfunction(a)%7Breturn!c.expr.filters.hidden(a)%7D%7Dvar sb%3DJ()%2Ctb%3D%2F<script(.%7C%5Cs)*%3F%5C%2Fscript>%2Fgi%2Cub%3D%2Fselect%7Ctextarea%2Fi%2Cvb%3D%2Fcolor%7Cdate%7Cdatetime%7Cemail%7Chidden%7Cmonth%7Cnumber%7Cpassword%7Crange%7Csearch%7Ctel%7Ctext%7Ctime%7Curl%7Cweek%2Fi%2CN%3D%2F%3D%5C%3F(%26%7C%24)%2F%2Cka%3D%2F%5C%3F%2F%2Cwb%3D%2F(%5C%3F%7C%26)_%3D.*%3F(%26%7C%24)%2F%2Cxb%3D%2F%5E(%5Cw%2B%3A)%3F%5C%2F%5C%2F(%5B%5E%5C%2F%3F%23%5D%2B)%2F%2Cyb%3D%2F%2520%2Fg%2Czb%3Dc.fn.load%3Bc.fn.extend(%7Bload%3Afunction(a%2Cb%2Cd)%7Bif(typeof a!%3D%3D%0A%09"string")return zb.call(this%2Ca)%3Belse if(!this.length)return this%3Bvar f%3Da.indexOf(" ")%3Bif(f>%3D0)%7Bvar e%3Da.slice(f%2Ca.length)%3Ba%3Da.slice(0%2Cf)%7Df%3D"GET"%3Bif(b)if(c.isFunction(b))%7Bd%3Db%3Bb%3Dnull%7Delse if(typeof b%3D%3D%3D"object")%7Bb%3Dc.param(b%2Cc.ajaxSettings.traditional)%3Bf%3D"POST"%7Dvar j%3Dthis%3Bc.ajax(%7Burl%3Aa%2Ctype%3Af%2CdataType%3A"html"%2Cdata%3Ab%2Ccomplete%3Afunction(i%2Co)%7Bif(o%3D%3D%3D"success"%7C%7Co%3D%3D%3D"notmodified")j.html(e%3Fc("<div %2F>").append(i.responseText.replace(tb%2C"")).find(e)%3Ai.responseText)%3Bd%26%26j.each(d%2C%5Bi.responseText%2Co%2Ci%5D)%7D%7D)%3Breturn this%7D%2C%0A%09serialize%3Afunction()%7Breturn c.param(this.serializeArray())%7D%2CserializeArray%3Afunction()%7Breturn this.map(function()%7Breturn this.elements%3Fc.makeArray(this.elements)%3Athis%7D).filter(function()%7Breturn this.name%26%26!this.disabled%26%26(this.checked%7C%7Cub.test(this.nodeName)%7C%7Cvb.test(this.type))%7D).map(function(a%2Cb)%7Ba%3Dc(this).val()%3Breturn a%3D%3Dnull%3Fnull%3Ac.isArray(a)%3Fc.map(a%2Cfunction(d)%7Breturn%7Bname%3Ab.name%2Cvalue%3Ad%7D%7D)%3A%7Bname%3Ab.name%2Cvalue%3Aa%7D%7D).get()%7D%7D)%3Bc.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" ")%2C%0A%09function(a%2Cb)%7Bc.fn%5Bb%5D%3Dfunction(d)%7Breturn this.bind(b%2Cd)%7D%7D)%3Bc.extend(%7Bget%3Afunction(a%2Cb%2Cd%2Cf)%7Bif(c.isFunction(b))%7Bf%3Df%7C%7Cd%3Bd%3Db%3Bb%3Dnull%7Dreturn c.ajax(%7Btype%3A"GET"%2Curl%3Aa%2Cdata%3Ab%2Csuccess%3Ad%2CdataType%3Af%7D)%7D%2CgetScript%3Afunction(a%2Cb)%7Breturn c.get(a%2Cnull%2Cb%2C"script")%7D%2CgetJSON%3Afunction(a%2Cb%2Cd)%7Breturn c.get(a%2Cb%2Cd%2C"json")%7D%2Cpost%3Afunction(a%2Cb%2Cd%2Cf)%7Bif(c.isFunction(b))%7Bf%3Df%7C%7Cd%3Bd%3Db%3Bb%3D%7B%7D%7Dreturn c.ajax(%7Btype%3A"POST"%2Curl%3Aa%2Cdata%3Ab%2Csuccess%3Ad%2CdataType%3Af%7D)%7D%2CajaxSetup%3Afunction(a)%7Bc.extend(c.ajaxSettings%2Ca)%7D%2CajaxSettings%3A%7Burl%3Alocation.href%2C%0A%09global%3Atrue%2Ctype%3A"GET"%2CcontentType%3A"application%2Fx-www-form-urlencoded"%2CprocessData%3Atrue%2Casync%3Atrue%2Cxhr%3AA.XMLHttpRequest%26%26(A.location.protocol!%3D%3D"file%3A"%7C%7C!A.ActiveXObject)%3Ffunction()%7Breturn new A.XMLHttpRequest%7D%3Afunction()%7Btry%7Breturn new A.ActiveXObject("Microsoft.XMLHTTP")%7Dcatch(a)%7B%7D%7D%2Caccepts%3A%7Bxml%3A"application%2Fxml%2C text%2Fxml"%2Chtml%3A"text%2Fhtml"%2Cscript%3A"text%2Fjavascript%2C application%2Fjavascript"%2Cjson%3A"application%2Fjson%2C text%2Fjavascript"%2Ctext%3A"text%2Fplain"%2C_default%3A"*%2F*"%7D%7D%2ClastModified%3A%7B%7D%2Cetag%3A%7B%7D%2Cajax%3Afunction(a)%7Bfunction b()%7Be.success%26%26%0A%09e.success.call(k%2Co%2Ci%2Cx)%3Be.global%26%26f("ajaxSuccess"%2C%5Bx%2Ce%5D)%7Dfunction d()%7Be.complete%26%26e.complete.call(k%2Cx%2Ci)%3Be.global%26%26f("ajaxComplete"%2C%5Bx%2Ce%5D)%3Be.global%26%26!--c.active%26%26c.event.trigger("ajaxStop")%7Dfunction f(q%2Cp)%7B(e.context%3Fc(e.context)%3Ac.event).trigger(q%2Cp)%7Dvar e%3Dc.extend(true%2C%7B%7D%2Cc.ajaxSettings%2Ca)%2Cj%2Ci%2Co%2Ck%3Da%26%26a.context%7C%7Ce%2Cn%3De.type.toUpperCase()%3Bif(e.data%26%26e.processData%26%26typeof e.data!%3D%3D"string")e.data%3Dc.param(e.data%2Ce.traditional)%3Bif(e.dataType%3D%3D%3D"jsonp")%7Bif(n%3D%3D%3D"GET")N.test(e.url)%7C%7C(e.url%2B%3D(ka.test(e.url)%3F%0A%09"%26"%3A"%3F")%2B(e.jsonp%7C%7C"callback")%2B"%3D%3F")%3Belse if(!e.data%7C%7C!N.test(e.data))e.data%3D(e.data%3Fe.data%2B"%26"%3A"")%2B(e.jsonp%7C%7C"callback")%2B"%3D%3F"%3Be.dataType%3D"json"%7Dif(e.dataType%3D%3D%3D"json"%26%26(e.data%26%26N.test(e.data)%7C%7CN.test(e.url)))%7Bj%3De.jsonpCallback%7C%7C"jsonp"%2Bsb%2B%2B%3Bif(e.data)e.data%3D(e.data%2B"").replace(N%2C"%3D"%2Bj%2B"%241")%3Be.url%3De.url.replace(N%2C"%3D"%2Bj%2B"%241")%3Be.dataType%3D"script"%3BA%5Bj%5D%3DA%5Bj%5D%7C%7Cfunction(q)%7Bo%3Dq%3Bb()%3Bd()%3BA%5Bj%5D%3Dw%3Btry%7Bdelete A%5Bj%5D%7Dcatch(p)%7B%7Dz%26%26z.removeChild(C)%7D%7Dif(e.dataType%3D%3D%3D"script"%26%26e.cache%3D%3D%3Dnull)e.cache%3Dfalse%3Bif(e.cache%3D%3D%3D%0A%09false%26%26n%3D%3D%3D"GET")%7Bvar r%3DJ()%2Cu%3De.url.replace(wb%2C"%241_%3D"%2Br%2B"%242")%3Be.url%3Du%2B(u%3D%3D%3De.url%3F(ka.test(e.url)%3F"%26"%3A"%3F")%2B"_%3D"%2Br%3A"")%7Dif(e.data%26%26n%3D%3D%3D"GET")e.url%2B%3D(ka.test(e.url)%3F"%26"%3A"%3F")%2Be.data%3Be.global%26%26!c.active%2B%2B%26%26c.event.trigger("ajaxStart")%3Br%3D(r%3Dxb.exec(e.url))%26%26(r%5B1%5D%26%26r%5B1%5D!%3D%3Dlocation.protocol%7C%7Cr%5B2%5D!%3D%3Dlocation.host)%3Bif(e.dataType%3D%3D%3D"script"%26%26n%3D%3D%3D"GET"%26%26r)%7Bvar z%3Ds.getElementsByTagName("head")%5B0%5D%7C%7Cs.documentElement%2CC%3Ds.createElement("script")%3BC.src%3De.url%3Bif(e.scriptCharset)C.charset%3De.scriptCharset%3Bif(!j)%7Bvar B%3D%0A%09false%3BC.onload%3DC.onreadystatechange%3Dfunction()%7Bif(!B%26%26(!this.readyState%7C%7Cthis.readyState%3D%3D%3D"loaded"%7C%7Cthis.readyState%3D%3D%3D"complete"))%7BB%3Dtrue%3Bb()%3Bd()%3BC.onload%3DC.onreadystatechange%3Dnull%3Bz%26%26C.parentNode%26%26z.removeChild(C)%7D%7D%7Dz.insertBefore(C%2Cz.firstChild)%3Breturn w%7Dvar E%3Dfalse%2Cx%3De.xhr()%3Bif(x)%7Be.username%3Fx.open(n%2Ce.url%2Ce.async%2Ce.username%2Ce.password)%3Ax.open(n%2Ce.url%2Ce.async)%3Btry%7Bif(e.data%7C%7Ca%26%26a.contentType)x.setRequestHeader("Content-Type"%2Ce.contentType)%3Bif(e.ifModified)%7Bc.lastModified%5Be.url%5D%26%26x.setRequestHeader("If-Modified-Since"%2C%0A%09c.lastModified%5Be.url%5D)%3Bc.etag%5Be.url%5D%26%26x.setRequestHeader("If-None-Match"%2Cc.etag%5Be.url%5D)%7Dr%7C%7Cx.setRequestHeader("X-Requested-With"%2C"XMLHttpRequest")%3Bx.setRequestHeader("Accept"%2Ce.dataType%26%26e.accepts%5Be.dataType%5D%3Fe.accepts%5Be.dataType%5D%2B"%2C *%2F*"%3Ae.accepts._default)%7Dcatch(ga)%7B%7Dif(e.beforeSend%26%26e.beforeSend.call(k%2Cx%2Ce)%3D%3D%3Dfalse)%7Be.global%26%26!--c.active%26%26c.event.trigger("ajaxStop")%3Bx.abort()%3Breturn false%7De.global%26%26f("ajaxSend"%2C%5Bx%2Ce%5D)%3Bvar g%3Dx.onreadystatechange%3Dfunction(q)%7Bif(!x%7C%7Cx.readyState%3D%3D%3D0%7C%7Cq%3D%3D%3D"abort")%7BE%7C%7C%0A%09d()%3BE%3Dtrue%3Bif(x)x.onreadystatechange%3Dc.noop%7Delse if(!E%26%26x%26%26(x.readyState%3D%3D%3D4%7C%7Cq%3D%3D%3D"timeout"))%7BE%3Dtrue%3Bx.onreadystatechange%3Dc.noop%3Bi%3Dq%3D%3D%3D"timeout"%3F"timeout"%3A!c.httpSuccess(x)%3F"error"%3Ae.ifModified%26%26c.httpNotModified(x%2Ce.url)%3F"notmodified"%3A"success"%3Bvar p%3Bif(i%3D%3D%3D"success")try%7Bo%3Dc.httpData(x%2Ce.dataType%2Ce)%7Dcatch(v)%7Bi%3D"parsererror"%3Bp%3Dv%7Dif(i%3D%3D%3D"success"%7C%7Ci%3D%3D%3D"notmodified")j%7C%7Cb()%3Belse c.handleError(e%2Cx%2Ci%2Cp)%3Bd()%3Bq%3D%3D%3D"timeout"%26%26x.abort()%3Bif(e.async)x%3Dnull%7D%7D%3Btry%7Bvar h%3Dx.abort%3Bx.abort%3Dfunction()%7Bx%26%26h.call(x)%3B%0A%09g("abort")%7D%7Dcatch(l)%7B%7De.async%26%26e.timeout>0%26%26setTimeout(function()%7Bx%26%26!E%26%26g("timeout")%7D%2Ce.timeout)%3Btry%7Bx.send(n%3D%3D%3D"POST"%7C%7Cn%3D%3D%3D"PUT"%7C%7Cn%3D%3D%3D"DELETE"%3Fe.data%3Anull)%7Dcatch(m)%7Bc.handleError(e%2Cx%2Cnull%2Cm)%3Bd()%7De.async%7C%7Cg()%3Breturn x%7D%7D%2ChandleError%3Afunction(a%2Cb%2Cd%2Cf)%7Bif(a.error)a.error.call(a.context%7C%7Ca%2Cb%2Cd%2Cf)%3Bif(a.global)(a.context%3Fc(a.context)%3Ac.event).trigger("ajaxError"%2C%5Bb%2Ca%2Cf%5D)%7D%2Cactive%3A0%2ChttpSuccess%3Afunction(a)%7Btry%7Breturn!a.status%26%26location.protocol%3D%3D%3D"file%3A"%7C%7Ca.status>%3D200%26%26a.status<300%7C%7Ca.status%3D%3D%3D304%7C%7Ca.status%3D%3D%3D%0A%091223%7C%7Ca.status%3D%3D%3D0%7Dcatch(b)%7B%7Dreturn false%7D%2ChttpNotModified%3Afunction(a%2Cb)%7Bvar d%3Da.getResponseHeader("Last-Modified")%2Cf%3Da.getResponseHeader("Etag")%3Bif(d)c.lastModified%5Bb%5D%3Dd%3Bif(f)c.etag%5Bb%5D%3Df%3Breturn a.status%3D%3D%3D304%7C%7Ca.status%3D%3D%3D0%7D%2ChttpData%3Afunction(a%2Cb%2Cd)%7Bvar f%3Da.getResponseHeader("content-type")%7C%7C""%2Ce%3Db%3D%3D%3D"xml"%7C%7C!b%26%26f.indexOf("xml")>%3D0%3Ba%3De%3Fa.responseXML%3Aa.responseText%3Be%26%26a.documentElement.nodeName%3D%3D%3D"parsererror"%26%26c.error("parsererror")%3Bif(d%26%26d.dataFilter)a%3Dd.dataFilter(a%2Cb)%3Bif(typeof a%3D%3D%3D"string")if(b%3D%3D%3D%0A%09"json"%7C%7C!b%26%26f.indexOf("json")>%3D0)a%3Dc.parseJSON(a)%3Belse if(b%3D%3D%3D"script"%7C%7C!b%26%26f.indexOf("javascript")>%3D0)c.globalEval(a)%3Breturn a%7D%2Cparam%3Afunction(a%2Cb)%7Bfunction d(i%2Co)%7Bif(c.isArray(o))c.each(o%2Cfunction(k%2Cn)%7Bb%7C%7C%2F%5C%5B%5C%5D%24%2F.test(i)%3Ff(i%2Cn)%3Ad(i%2B"%5B"%2B(typeof n%3D%3D%3D"object"%7C%7Cc.isArray(n)%3Fk%3A"")%2B"%5D"%2Cn)%7D)%3Belse!b%26%26o!%3Dnull%26%26typeof o%3D%3D%3D"object"%3Fc.each(o%2Cfunction(k%2Cn)%7Bd(i%2B"%5B"%2Bk%2B"%5D"%2Cn)%7D)%3Af(i%2Co)%7Dfunction f(i%2Co)%7Bo%3Dc.isFunction(o)%3Fo()%3Ao%3Be%5Be.length%5D%3DencodeURIComponent(i)%2B"%3D"%2BencodeURIComponent(o)%7Dvar e%3D%5B%5D%3Bif(b%3D%3D%3Dw)b%3Dc.ajaxSettings.traditional%3B%0A%09if(c.isArray(a)%7C%7Ca.jquery)c.each(a%2Cfunction()%7Bf(this.name%2Cthis.value)%7D)%3Belse for(var j in a)d(j%2Ca%5Bj%5D)%3Breturn e.join("%26").replace(yb%2C"%2B")%7D%7D)%3Bvar la%3D%7B%7D%2CAb%3D%2Ftoggle%7Cshow%7Chide%2F%2CBb%3D%2F%5E(%5B%2B-%5D%3D)%3F(%5B%5Cd%2B-.%5D%2B)(.*)%24%2F%2CW%2Cva%3D%5B%5B"height"%2C"marginTop"%2C"marginBottom"%2C"paddingTop"%2C"paddingBottom"%5D%2C%5B"width"%2C"marginLeft"%2C"marginRight"%2C"paddingLeft"%2C"paddingRight"%5D%2C%5B"opacity"%5D%5D%3Bc.fn.extend(%7Bshow%3Afunction(a%2Cb)%7Bif(a%7C%7Ca%3D%3D%3D0)return this.animate(K("show"%2C3)%2Ca%2Cb)%3Belse%7Ba%3D0%3Bfor(b%3Dthis.length%3Ba<b%3Ba%2B%2B)%7Bvar d%3Dc.data(this%5Ba%5D%2C"olddisplay")%3B%0A%09this%5Ba%5D.style.display%3Dd%7C%7C""%3Bif(c.css(this%5Ba%5D%2C"display")%3D%3D%3D"none")%7Bd%3Dthis%5Ba%5D.nodeName%3Bvar f%3Bif(la%5Bd%5D)f%3Dla%5Bd%5D%3Belse%7Bvar e%3Dc("<"%2Bd%2B" %2F>").appendTo("body")%3Bf%3De.css("display")%3Bif(f%3D%3D%3D"none")f%3D"block"%3Be.remove()%3Bla%5Bd%5D%3Df%7Dc.data(this%5Ba%5D%2C"olddisplay"%2Cf)%7D%7Da%3D0%3Bfor(b%3Dthis.length%3Ba<b%3Ba%2B%2B)this%5Ba%5D.style.display%3Dc.data(this%5Ba%5D%2C"olddisplay")%7C%7C""%3Breturn this%7D%7D%2Chide%3Afunction(a%2Cb)%7Bif(a%7C%7Ca%3D%3D%3D0)return this.animate(K("hide"%2C3)%2Ca%2Cb)%3Belse%7Ba%3D0%3Bfor(b%3Dthis.length%3Ba<b%3Ba%2B%2B)%7Bvar d%3Dc.data(this%5Ba%5D%2C"olddisplay")%3B!d%26%26d!%3D%3D"none"%26%26c.data(this%5Ba%5D%2C%0A%09"olddisplay"%2Cc.css(this%5Ba%5D%2C"display"))%7Da%3D0%3Bfor(b%3Dthis.length%3Ba<b%3Ba%2B%2B)this%5Ba%5D.style.display%3D"none"%3Breturn this%7D%7D%2C_toggle%3Ac.fn.toggle%2Ctoggle%3Afunction(a%2Cb)%7Bvar d%3Dtypeof a%3D%3D%3D"boolean"%3Bif(c.isFunction(a)%26%26c.isFunction(b))this._toggle.apply(this%2Carguments)%3Belse a%3D%3Dnull%7C%7Cd%3Fthis.each(function()%7Bvar f%3Dd%3Fa%3Ac(this).is("%3Ahidden")%3Bc(this)%5Bf%3F"show"%3A"hide"%5D()%7D)%3Athis.animate(K("toggle"%2C3)%2Ca%2Cb)%3Breturn this%7D%2CfadeTo%3Afunction(a%2Cb%2Cd)%7Breturn this.filter("%3Ahidden").css("opacity"%2C0).show().end().animate(%7Bopacity%3Ab%7D%2Ca%2Cd)%7D%2C%0A%09animate%3Afunction(a%2Cb%2Cd%2Cf)%7Bvar e%3Dc.speed(b%2Cd%2Cf)%3Bif(c.isEmptyObject(a))return this.each(e.complete)%3Breturn this%5Be.queue%3D%3D%3Dfalse%3F"each"%3A"queue"%5D(function()%7Bvar j%3Dc.extend(%7B%7D%2Ce)%2Ci%2Co%3Dthis.nodeType%3D%3D%3D1%26%26c(this).is("%3Ahidden")%2Ck%3Dthis%3Bfor(i in a)%7Bvar n%3Di.replace(ia%2Cja)%3Bif(i!%3D%3Dn)%7Ba%5Bn%5D%3Da%5Bi%5D%3Bdelete a%5Bi%5D%3Bi%3Dn%7Dif(a%5Bi%5D%3D%3D%3D"hide"%26%26o%7C%7Ca%5Bi%5D%3D%3D%3D"show"%26%26!o)return j.complete.call(this)%3Bif((i%3D%3D%3D"height"%7C%7Ci%3D%3D%3D"width")%26%26this.style)%7Bj.display%3Dc.css(this%2C"display")%3Bj.overflow%3Dthis.style.overflow%7Dif(c.isArray(a%5Bi%5D))%7B(j.specialEasing%3D%0A%09j.specialEasing%7C%7C%7B%7D)%5Bi%5D%3Da%5Bi%5D%5B1%5D%3Ba%5Bi%5D%3Da%5Bi%5D%5B0%5D%7D%7Dif(j.overflow!%3Dnull)this.style.overflow%3D"hidden"%3Bj.curAnim%3Dc.extend(%7B%7D%2Ca)%3Bc.each(a%2Cfunction(r%2Cu)%7Bvar z%3Dnew c.fx(k%2Cj%2Cr)%3Bif(Ab.test(u))z%5Bu%3D%3D%3D"toggle"%3Fo%3F"show"%3A"hide"%3Au%5D(a)%3Belse%7Bvar C%3DBb.exec(u)%2CB%3Dz.cur(true)%7C%7C0%3Bif(C)%7Bu%3DparseFloat(C%5B2%5D)%3Bvar E%3DC%5B3%5D%7C%7C"px"%3Bif(E!%3D%3D"px")%7Bk.style%5Br%5D%3D(u%7C%7C1)%2BE%3BB%3D(u%7C%7C1)%2Fz.cur(true)*B%3Bk.style%5Br%5D%3DB%2BE%7Dif(C%5B1%5D)u%3D(C%5B1%5D%3D%3D%3D"-%3D"%3F-1%3A1)*u%2BB%3Bz.custom(B%2Cu%2CE)%7Delse z.custom(B%2Cu%2C"")%7D%7D)%3Breturn true%7D)%7D%2Cstop%3Afunction(a%2Cb)%7Bvar d%3Dc.timers%3Ba%26%26this.queue(%5B%5D)%3B%0A%09this.each(function()%7Bfor(var f%3Dd.length-1%3Bf>%3D0%3Bf--)if(d%5Bf%5D.elem%3D%3D%3Dthis)%7Bb%26%26d%5Bf%5D(true)%3Bd.splice(f%2C1)%7D%7D)%3Bb%7C%7Cthis.dequeue()%3Breturn this%7D%7D)%3Bc.each(%7BslideDown%3AK("show"%2C1)%2CslideUp%3AK("hide"%2C1)%2CslideToggle%3AK("toggle"%2C1)%2CfadeIn%3A%7Bopacity%3A"show"%7D%2CfadeOut%3A%7Bopacity%3A"hide"%7D%7D%2Cfunction(a%2Cb)%7Bc.fn%5Ba%5D%3Dfunction(d%2Cf)%7Breturn this.animate(b%2Cd%2Cf)%7D%7D)%3Bc.extend(%7Bspeed%3Afunction(a%2Cb%2Cd)%7Bvar f%3Da%26%26typeof a%3D%3D%3D"object"%3Fa%3A%7Bcomplete%3Ad%7C%7C!d%26%26b%7C%7Cc.isFunction(a)%26%26a%2Cduration%3Aa%2Ceasing%3Ad%26%26b%7C%7Cb%26%26!c.isFunction(b)%26%26b%7D%3Bf.duration%3Dc.fx.off%3F0%3Atypeof f.duration%3D%3D%3D%0A%09"number"%3Ff.duration%3Ac.fx.speeds%5Bf.duration%5D%7C%7Cc.fx.speeds._default%3Bf.old%3Df.complete%3Bf.complete%3Dfunction()%7Bf.queue!%3D%3Dfalse%26%26c(this).dequeue()%3Bc.isFunction(f.old)%26%26f.old.call(this)%7D%3Breturn f%7D%2Ceasing%3A%7Blinear%3Afunction(a%2Cb%2Cd%2Cf)%7Breturn d%2Bf*a%7D%2Cswing%3Afunction(a%2Cb%2Cd%2Cf)%7Breturn(-Math.cos(a*Math.PI)%2F2%2B0.5)*f%2Bd%7D%7D%2Ctimers%3A%5B%5D%2Cfx%3Afunction(a%2Cb%2Cd)%7Bthis.options%3Db%3Bthis.elem%3Da%3Bthis.prop%3Dd%3Bif(!b.orig)b.orig%3D%7B%7D%7D%7D)%3Bc.fx.prototype%3D%7Bupdate%3Afunction()%7Bthis.options.step%26%26this.options.step.call(this.elem%2Cthis.now%2Cthis)%3B(c.fx.step%5Bthis.prop%5D%7C%7C%0A%09c.fx.step._default)(this)%3Bif((this.prop%3D%3D%3D"height"%7C%7Cthis.prop%3D%3D%3D"width")%26%26this.elem.style)this.elem.style.display%3D"block"%7D%2Ccur%3Afunction(a)%7Bif(this.elem%5Bthis.prop%5D!%3Dnull%26%26(!this.elem.style%7C%7Cthis.elem.style%5Bthis.prop%5D%3D%3Dnull))return this.elem%5Bthis.prop%5D%3Breturn(a%3DparseFloat(c.css(this.elem%2Cthis.prop%2Ca)))%26%26a>-10000%3Fa%3AparseFloat(c.curCSS(this.elem%2Cthis.prop))%7C%7C0%7D%2Ccustom%3Afunction(a%2Cb%2Cd)%7Bfunction f(j)%7Breturn e.step(j)%7Dthis.startTime%3DJ()%3Bthis.start%3Da%3Bthis.end%3Db%3Bthis.unit%3Dd%7C%7Cthis.unit%7C%7C"px"%3Bthis.now%3Dthis.start%3B%0A%09this.pos%3Dthis.state%3D0%3Bvar e%3Dthis%3Bf.elem%3Dthis.elem%3Bif(f()%26%26c.timers.push(f)%26%26!W)W%3DsetInterval(c.fx.tick%2C13)%7D%2Cshow%3Afunction()%7Bthis.options.orig%5Bthis.prop%5D%3Dc.style(this.elem%2Cthis.prop)%3Bthis.options.show%3Dtrue%3Bthis.custom(this.prop%3D%3D%3D"width"%7C%7Cthis.prop%3D%3D%3D"height"%3F1%3A0%2Cthis.cur())%3Bc(this.elem).show()%7D%2Chide%3Afunction()%7Bthis.options.orig%5Bthis.prop%5D%3Dc.style(this.elem%2Cthis.prop)%3Bthis.options.hide%3Dtrue%3Bthis.custom(this.cur()%2C0)%7D%2Cstep%3Afunction(a)%7Bvar b%3DJ()%2Cd%3Dtrue%3Bif(a%7C%7Cb>%3Dthis.options.duration%2Bthis.startTime)%7Bthis.now%3D%0A%09this.end%3Bthis.pos%3Dthis.state%3D1%3Bthis.update()%3Bthis.options.curAnim%5Bthis.prop%5D%3Dtrue%3Bfor(var f in this.options.curAnim)if(this.options.curAnim%5Bf%5D!%3D%3Dtrue)d%3Dfalse%3Bif(d)%7Bif(this.options.display!%3Dnull)%7Bthis.elem.style.overflow%3Dthis.options.overflow%3Ba%3Dc.data(this.elem%2C"olddisplay")%3Bthis.elem.style.display%3Da%3Fa%3Athis.options.display%3Bif(c.css(this.elem%2C"display")%3D%3D%3D"none")this.elem.style.display%3D"block"%7Dthis.options.hide%26%26c(this.elem).hide()%3Bif(this.options.hide%7C%7Cthis.options.show)for(var e in this.options.curAnim)c.style(this.elem%2C%0A%09e%2Cthis.options.orig%5Be%5D)%3Bthis.options.complete.call(this.elem)%7Dreturn false%7Delse%7Be%3Db-this.startTime%3Bthis.state%3De%2Fthis.options.duration%3Ba%3Dthis.options.easing%7C%7C(c.easing.swing%3F"swing"%3A"linear")%3Bthis.pos%3Dc.easing%5Bthis.options.specialEasing%26%26this.options.specialEasing%5Bthis.prop%5D%7C%7Ca%5D(this.state%2Ce%2C0%2C1%2Cthis.options.duration)%3Bthis.now%3Dthis.start%2B(this.end-this.start)*this.pos%3Bthis.update()%7Dreturn true%7D%7D%3Bc.extend(c.fx%2C%7Btick%3Afunction()%7Bfor(var a%3Dc.timers%2Cb%3D0%3Bb<a.length%3Bb%2B%2B)a%5Bb%5D()%7C%7Ca.splice(b--%2C1)%3Ba.length%7C%7C%0A%09c.fx.stop()%7D%2Cstop%3Afunction()%7BclearInterval(W)%3BW%3Dnull%7D%2Cspeeds%3A%7Bslow%3A600%2Cfast%3A200%2C_default%3A400%7D%2Cstep%3A%7Bopacity%3Afunction(a)%7Bc.style(a.elem%2C"opacity"%2Ca.now)%7D%2C_default%3Afunction(a)%7Bif(a.elem.style%26%26a.elem.style%5Ba.prop%5D!%3Dnull)a.elem.style%5Ba.prop%5D%3D(a.prop%3D%3D%3D"width"%7C%7Ca.prop%3D%3D%3D"height"%3FMath.max(0%2Ca.now)%3Aa.now)%2Ba.unit%3Belse a.elem%5Ba.prop%5D%3Da.now%7D%7D%7D)%3Bif(c.expr%26%26c.expr.filters)c.expr.filters.animated%3Dfunction(a)%7Breturn c.grep(c.timers%2Cfunction(b)%7Breturn a%3D%3D%3Db.elem%7D).length%7D%3Bc.fn.offset%3D"getBoundingClientRect"in s.documentElement%3F%0A%09function(a)%7Bvar b%3Dthis%5B0%5D%3Bif(a)return this.each(function(e)%7Bc.offset.setOffset(this%2Ca%2Ce)%7D)%3Bif(!b%7C%7C!b.ownerDocument)return null%3Bif(b%3D%3D%3Db.ownerDocument.body)return c.offset.bodyOffset(b)%3Bvar d%3Db.getBoundingClientRect()%2Cf%3Db.ownerDocument%3Bb%3Df.body%3Bf%3Df.documentElement%3Breturn%7Btop%3Ad.top%2B(self.pageYOffset%7C%7Cc.support.boxModel%26%26f.scrollTop%7C%7Cb.scrollTop)-(f.clientTop%7C%7Cb.clientTop%7C%7C0)%2Cleft%3Ad.left%2B(self.pageXOffset%7C%7Cc.support.boxModel%26%26f.scrollLeft%7C%7Cb.scrollLeft)-(f.clientLeft%7C%7Cb.clientLeft%7C%7C0)%7D%7D%3Afunction(a)%7Bvar b%3D%0A%09this%5B0%5D%3Bif(a)return this.each(function(r)%7Bc.offset.setOffset(this%2Ca%2Cr)%7D)%3Bif(!b%7C%7C!b.ownerDocument)return null%3Bif(b%3D%3D%3Db.ownerDocument.body)return c.offset.bodyOffset(b)%3Bc.offset.initialize()%3Bvar d%3Db.offsetParent%2Cf%3Db%2Ce%3Db.ownerDocument%2Cj%2Ci%3De.documentElement%2Co%3De.body%3Bf%3D(e%3De.defaultView)%3Fe.getComputedStyle(b%2Cnull)%3Ab.currentStyle%3Bfor(var k%3Db.offsetTop%2Cn%3Db.offsetLeft%3B(b%3Db.parentNode)%26%26b!%3D%3Do%26%26b!%3D%3Di%3B)%7Bif(c.offset.supportsFixedPosition%26%26f.position%3D%3D%3D"fixed")break%3Bj%3De%3Fe.getComputedStyle(b%2Cnull)%3Ab.currentStyle%3B%0A%09k-%3Db.scrollTop%3Bn-%3Db.scrollLeft%3Bif(b%3D%3D%3Dd)%7Bk%2B%3Db.offsetTop%3Bn%2B%3Db.offsetLeft%3Bif(c.offset.doesNotAddBorder%26%26!(c.offset.doesAddBorderForTableAndCells%26%26%2F%5Et(able%7Cd%7Ch)%24%2Fi.test(b.nodeName)))%7Bk%2B%3DparseFloat(j.borderTopWidth)%7C%7C0%3Bn%2B%3DparseFloat(j.borderLeftWidth)%7C%7C0%7Df%3Dd%3Bd%3Db.offsetParent%7Dif(c.offset.subtractsBorderForOverflowNotVisible%26%26j.overflow!%3D%3D"visible")%7Bk%2B%3DparseFloat(j.borderTopWidth)%7C%7C0%3Bn%2B%3DparseFloat(j.borderLeftWidth)%7C%7C0%7Df%3Dj%7Dif(f.position%3D%3D%3D"relative"%7C%7Cf.position%3D%3D%3D"static")%7Bk%2B%3Do.offsetTop%3Bn%2B%3Do.offsetLeft%7Dif(c.offset.supportsFixedPosition%26%26%0A%09f.position%3D%3D%3D"fixed")%7Bk%2B%3DMath.max(i.scrollTop%2Co.scrollTop)%3Bn%2B%3DMath.max(i.scrollLeft%2Co.scrollLeft)%7Dreturn%7Btop%3Ak%2Cleft%3An%7D%7D%3Bc.offset%3D%7Binitialize%3Afunction()%7Bvar a%3Ds.body%2Cb%3Ds.createElement("div")%2Cd%2Cf%2Ce%2Cj%3DparseFloat(c.curCSS(a%2C"marginTop"%2Ctrue))%7C%7C0%3Bc.extend(b.style%2C%7Bposition%3A"absolute"%2Ctop%3A0%2Cleft%3A0%2Cmargin%3A0%2Cborder%3A0%2Cwidth%3A"1px"%2Cheight%3A"1px"%2Cvisibility%3A"hidden"%7D)%3Bb.innerHTML%3D"<div style%3D'position%3Aabsolute%3Btop%3A0%3Bleft%3A0%3Bmargin%3A0%3Bborder%3A5px solid %23000%3Bpadding%3A0%3Bwidth%3A1px%3Bheight%3A1px%3B'><div><%2Fdiv><%2Fdiv><table style%3D'position%3Aabsolute%3Btop%3A0%3Bleft%3A0%3Bmargin%3A0%3Bborder%3A5px solid %23000%3Bpadding%3A0%3Bwidth%3A1px%3Bheight%3A1px%3B' cellpadding%3D'0' cellspacing%3D'0'><tr><td><%2Ftd><%2Ftr><%2Ftable>"%3B%0A%09a.insertBefore(b%2Ca.firstChild)%3Bd%3Db.firstChild%3Bf%3Dd.firstChild%3Be%3Dd.nextSibling.firstChild.firstChild%3Bthis.doesNotAddBorder%3Df.offsetTop!%3D%3D5%3Bthis.doesAddBorderForTableAndCells%3De.offsetTop%3D%3D%3D5%3Bf.style.position%3D"fixed"%3Bf.style.top%3D"20px"%3Bthis.supportsFixedPosition%3Df.offsetTop%3D%3D%3D20%7C%7Cf.offsetTop%3D%3D%3D15%3Bf.style.position%3Df.style.top%3D""%3Bd.style.overflow%3D"hidden"%3Bd.style.position%3D"relative"%3Bthis.subtractsBorderForOverflowNotVisible%3Df.offsetTop%3D%3D%3D-5%3Bthis.doesNotIncludeMarginInBodyOffset%3Da.offsetTop!%3D%3Dj%3Ba.removeChild(b)%3B%0A%09c.offset.initialize%3Dc.noop%7D%2CbodyOffset%3Afunction(a)%7Bvar b%3Da.offsetTop%2Cd%3Da.offsetLeft%3Bc.offset.initialize()%3Bif(c.offset.doesNotIncludeMarginInBodyOffset)%7Bb%2B%3DparseFloat(c.curCSS(a%2C"marginTop"%2Ctrue))%7C%7C0%3Bd%2B%3DparseFloat(c.curCSS(a%2C"marginLeft"%2Ctrue))%7C%7C0%7Dreturn%7Btop%3Ab%2Cleft%3Ad%7D%7D%2CsetOffset%3Afunction(a%2Cb%2Cd)%7Bif(%2Fstatic%2F.test(c.curCSS(a%2C"position")))a.style.position%3D"relative"%3Bvar f%3Dc(a)%2Ce%3Df.offset()%2Cj%3DparseInt(c.curCSS(a%2C"top"%2Ctrue)%2C10)%7C%7C0%2Ci%3DparseInt(c.curCSS(a%2C"left"%2Ctrue)%2C10)%7C%7C0%3Bif(c.isFunction(b))b%3Db.call(a%2C%0A%09d%2Ce)%3Bd%3D%7Btop%3Ab.top-e.top%2Bj%2Cleft%3Ab.left-e.left%2Bi%7D%3B"using"in b%3Fb.using.call(a%2Cd)%3Af.css(d)%7D%7D%3Bc.fn.extend(%7Bposition%3Afunction()%7Bif(!this%5B0%5D)return null%3Bvar a%3Dthis%5B0%5D%2Cb%3Dthis.offsetParent()%2Cd%3Dthis.offset()%2Cf%3D%2F%5Ebody%7Chtml%24%2Fi.test(b%5B0%5D.nodeName)%3F%7Btop%3A0%2Cleft%3A0%7D%3Ab.offset()%3Bd.top-%3DparseFloat(c.curCSS(a%2C"marginTop"%2Ctrue))%7C%7C0%3Bd.left-%3DparseFloat(c.curCSS(a%2C"marginLeft"%2Ctrue))%7C%7C0%3Bf.top%2B%3DparseFloat(c.curCSS(b%5B0%5D%2C"borderTopWidth"%2Ctrue))%7C%7C0%3Bf.left%2B%3DparseFloat(c.curCSS(b%5B0%5D%2C"borderLeftWidth"%2Ctrue))%7C%7C0%3Breturn%7Btop%3Ad.top-%0A%09f.top%2Cleft%3Ad.left-f.left%7D%7D%2CoffsetParent%3Afunction()%7Breturn this.map(function()%7Bfor(var a%3Dthis.offsetParent%7C%7Cs.body%3Ba%26%26!%2F%5Ebody%7Chtml%24%2Fi.test(a.nodeName)%26%26c.css(a%2C"position")%3D%3D%3D"static"%3B)a%3Da.offsetParent%3Breturn a%7D)%7D%7D)%3Bc.each(%5B"Left"%2C"Top"%5D%2Cfunction(a%2Cb)%7Bvar d%3D"scroll"%2Bb%3Bc.fn%5Bd%5D%3Dfunction(f)%7Bvar e%3Dthis%5B0%5D%2Cj%3Bif(!e)return null%3Bif(f!%3D%3Dw)return this.each(function()%7Bif(j%3Dwa(this))j.scrollTo(!a%3Ff%3Ac(j).scrollLeft()%2Ca%3Ff%3Ac(j).scrollTop())%3Belse this%5Bd%5D%3Df%7D)%3Belse return(j%3Dwa(e))%3F"pageXOffset"in j%3Fj%5Ba%3F"pageYOffset"%3A%0A%09"pageXOffset"%5D%3Ac.support.boxModel%26%26j.document.documentElement%5Bd%5D%7C%7Cj.document.body%5Bd%5D%3Ae%5Bd%5D%7D%7D)%3Bc.each(%5B"Height"%2C"Width"%5D%2Cfunction(a%2Cb)%7Bvar d%3Db.toLowerCase()%3Bc.fn%5B"inner"%2Bb%5D%3Dfunction()%7Breturn this%5B0%5D%3Fc.css(this%5B0%5D%2Cd%2Cfalse%2C"padding")%3Anull%7D%3Bc.fn%5B"outer"%2Bb%5D%3Dfunction(f)%7Breturn this%5B0%5D%3Fc.css(this%5B0%5D%2Cd%2Cfalse%2Cf%3F"margin"%3A"border")%3Anull%7D%3Bc.fn%5Bd%5D%3Dfunction(f)%7Bvar e%3Dthis%5B0%5D%3Bif(!e)return f%3D%3Dnull%3Fnull%3Athis%3Bif(c.isFunction(f))return this.each(function(j)%7Bvar i%3Dc(this)%3Bi%5Bd%5D(f.call(this%2Cj%2Ci%5Bd%5D()))%7D)%3Breturn"scrollTo"in%0A%09e%26%26e.document%3Fe.document.compatMode%3D%3D%3D"CSS1Compat"%26%26e.document.documentElement%5B"client"%2Bb%5D%7C%7Ce.document.body%5B"client"%2Bb%5D%3Ae.nodeType%3D%3D%3D9%3FMath.max(e.documentElement%5B"client"%2Bb%5D%2Ce.body%5B"scroll"%2Bb%5D%2Ce.documentElement%5B"scroll"%2Bb%5D%2Ce.body%5B"offset"%2Bb%5D%2Ce.documentElement%5B"offset"%2Bb%5D)%3Af%3D%3D%3Dw%3Fc.css(e%2Cd)%3Athis.css(d%2Ctypeof f%3D%3D%3D"string"%3Ff%3Af%2B"px")%7D%7D)%3BA.jQuery%3DA.%24%3Dc%7D)(window)%3B%0A%09%0A%09%0A%09%0A%09%0A%09%0A%7D%0A%0A%0A%2F* Based on Alex Arnell's inheritance implementation. *%2F%0A%09%09%09var Class %3D %7B%0A%09%09%09  create%3A function() %7B%0A%09%09%09    var parent %3D null%2C properties %3D %24A(arguments)%3B%0A%09%09%09    if (Object.isFunction(properties%5B0%5D))%0A%09%09%09      parent %3D properties.shift()%3B%0A%0A%09%09%09    function klass() %7B%0A%09%09%09      this.initialize.apply(this%2C arguments)%3B%0A%09%09%09    %7D%0A%0A%09%09%09    Object.extend(klass%2C Class.Methods)%3B%0A%09%09%09    klass.superclass %3D parent%3B%0A%09%09%09    klass.subclasses %3D %5B%5D%3B%0A%0A%09%09%09    if (parent) %7B%0A%09%09%09      var subclass %3D function() %7B %7D%3B%0A%09%09%09      subclass.prototype %3D parent.prototype%3B%0A%09%09%09      klass.prototype %3D new subclass%3B%0A%09%09%09      parent.subclasses.push(klass)%3B%0A%09%09%09    %7D%0A%0A%09%09%09    for (var i %3D 0%3B i < properties.length%3B i%2B%2B)%0A%09%09%09      klass.addMethods(properties%5Bi%5D)%3B%0A%0A%09%09%09    if (!klass.prototype.initialize)%0A%09%09%09      klass.prototype.initialize %3D this.emptyFunction%3B%0A%0A%09%09%09    klass.prototype.constructor %3D klass%3B%0A%0A%09%09%09    return klass%3B%0A%09%09%09  %7D%2C%0A%09%09%09  emptyFunction%3Afunction () %7B%7D%2C%0A%0A%09%09%09%7D%3B%0A%0A%09%09%09Class.Methods %3D %7B%0A%09%09%09  addMethods%3A function(source) %7B%0A%09%09%09    var ancestor   %3D this.superclass %26%26 this.superclass.prototype%3B%0A%09%09%09    var properties %3D Object.keys(source)%3B%0A%0A%09%09%09    if (!Object.keys(%7B toString%3A true %7D).length)%0A%09%09%09      properties.push("toString"%2C "valueOf")%3B%0A%0A%09%09%09    for (var i %3D 0%2C length %3D properties.length%3B i < length%3B i%2B%2B) %7B%0A%09%09%09      var property %3D properties%5Bi%5D%2C value %3D source%5Bproperty%5D%3B%0A%09%09%09      if (ancestor %26%26 Object.isFunction(value) %26%26%0A%09%09%09%09  value.argumentNames().first() %3D%3D "%24super") %7B%0A%09%09%09%09var method %3D value%2C value %3D Object.extend((function(m) %7B%0A%09%09%09%09  return function() %7B return ancestor%5Bm%5D.apply(this%2C arguments) %7D%3B%0A%09%09%09%09%7D)(property).wrap(method)%2C %7B%0A%09%09%09%09  valueOf%3A  function() %7B return method %7D%2C%0A%09%09%09%09  toString%3A function() %7B return method.toString() %7D%0A%09%09%09%09%7D)%3B%0A%09%09%09      %7D%0A%09%09%09      this.prototype%5Bproperty%5D %3D value%3B%0A%09%09%09    %7D%0A%0A%09%09%09    return this%3B%0A%09%09%09  %7D%0A%09%09%09%7D%3B%0A%0A%09%09%09Object.extend %3D function(destination%2C source) %7B%0A%09%09%09  for (var property in source)%0A%09%09%09    destination%5Bproperty%5D %3D source%5Bproperty%5D%3B%0A%09%09%09  return destination%3B%0A%09%09%09%7D%3B%0A%0A%09%09%09Object.extend(Object%2C %7B%0A%09%09%09  inspect%3A function(object) %7B%0A%09%09%09    try %7B%0A%09%09%09      if (Object.isUndefined(object)) return 'undefined'%3B%0A%09%09%09      if (object %3D%3D%3D null) return 'null'%3B%0A%09%09%09      return object.inspect %3F object.inspect() %3A String(object)%3B%0A%09%09%09    %7D catch (e) %7B%0A%09%09%09      if (e instanceof RangeError) return '...'%3B%0A%09%09%09      throw e%3B%0A%09%09%09    %7D%0A%09%09%09  %7D%2C%0A%0A%09%09%09  toJSON%3A function(object) %7B%0A%09%09%09    var type %3D typeof object%3B%0A%09%09%09    switch (type) %7B%0A%09%09%09      case 'undefined'%3A%0A%09%09%09      case 'function'%3A%0A%09%09%09      case 'unknown'%3A return%3B%0A%09%09%09      case 'boolean'%3A return object.toString()%3B%0A%09%09%09    %7D%0A%0A%09%09%09    if (object %3D%3D%3D null) return 'null'%3B%0A%09%09%09    if (object.toJSON) return object.toJSON()%3B%0A%09%09%09    if (Object.isElement(object)) return%3B%0A%0A%09%09%09    var results %3D %5B%5D%3B%0A%09%09%09    for (var property in object) %7B%0A%09%09%09      var value %3D Object.toJSON(object%5Bproperty%5D)%3B%0A%09%09%09      if (!Object.isUndefined(value))%0A%09%09%09%09results.push(property.toJSON() %2B '%3A ' %2B value)%3B%0A%09%09%09    %7D%0A%0A%09%09%09    return '%7B' %2B results.join('%2C ') %2B '%7D'%3B%0A%09%09%09  %7D%2C%0A%0A%09%09%09  toQueryString%3A function(object) %7B%0A%09%09%09    return %24H(object).toQueryString()%3B%0A%09%09%09  %7D%2C%0A%0A%09%09%09  toHTML%3A function(object) %7B%0A%09%09%09    return object %26%26 object.toHTML %3F object.toHTML() %3A String.interpret(object)%3B%0A%09%09%09  %7D%2C%0A%0A%09%09%09  keys%3A function(object) %7B%0A%09%09%09    var keys %3D %5B%5D%3B%0A%09%09%09    for (var property in object)%0A%09%09%09      keys.push(property)%3B%0A%09%09%09    return keys%3B%0A%09%09%09  %7D%2C%0A%0A%09%09%09  values%3A function(object) %7B%0A%09%09%09    var values %3D %5B%5D%3B%0A%09%09%09    for (var property in object)%0A%09%09%09      values.push(object%5Bproperty%5D)%3B%0A%09%09%09    return values%3B%0A%09%09%09  %7D%2C%0A%0A%09%09%09  clone%3A function(object) %7B%0A%09%09%09    return Object.extend(%7B %7D%2C object)%3B%0A%09%09%09  %7D%2C%0A%0A%09%09%09  isElement%3A function(object) %7B%0A%09%09%09    return object %26%26 object.nodeType %3D%3D 1%3B%0A%09%09%09  %7D%2C%0A%0A%09%09%09  isArray%3A function(object) %7B%0A%09%09%09    return object !%3D null %26%26 typeof object %3D%3D "object" %26%26%0A%09%09%09      'splice' in object %26%26 'join' in object%3B%0A%09%09%09  %7D%2C%0A%0A%09%09%09  isHash%3A function(object) %7B%0A%09%09%09    return object instanceof Hash%3B%0A%09%09%09  %7D%2C%0A%0A%09%09%09  isFunction%3A function(object) %7B%0A%09%09%09    return typeof object %3D%3D "function"%3B%0A%09%09%09  %7D%2C%0A%0A%09%09%09  isString%3A function(object) %7B%0A%09%09%09    return typeof object %3D%3D "string"%3B%0A%09%09%09  %7D%2C%0A%0A%09%09%09  isNumber%3A function(object) %7B%0A%09%09%09    return typeof object %3D%3D "number"%3B%0A%09%09%09  %7D%2C%0A%0A%09%09%09  isUndefined%3A function(object) %7B%0A%09%09%09    return typeof object %3D%3D "undefined"%3B%0A%09%09%09  %7D%0A%09%09%09%7D)%3B%0A%0A%09%09%09function %24A(iterable) %7B%0A%09%09%09  if (!iterable) return %5B%5D%3B%0A%09%09%09  if (iterable.toArray) return iterable.toArray()%3B%0A%09%09%09  var length %3D iterable.length %7C%7C 0%2C results %3D new Array(length)%3B%0A%09%09%09  while (length--) results%5Blength%5D %3D iterable%5Blength%5D%3B%0A%09%09%09  return results%3B%0A%09%09%09%7D%0A%0A%09%09%09if (WebKit %3D navigator.userAgent.indexOf('AppleWebKit%2F') > -1) %7B%0A%09%09%09  %24A %3D function(iterable) %7B%0A%09%09%09    if (!iterable) return %5B%5D%3B%0A%09%09%09    if (!(Object.isFunction(iterable) %26%26 iterable %3D%3D '%5Bobject NodeList%5D') %26%26%0A%09%09%09%09iterable.toArray) return iterable.toArray()%3B%0A%09%09%09    var length %3D iterable.length %7C%7C 0%2C results %3D new Array(length)%3B%0A%09%09%09    while (length--) results%5Blength%5D %3D iterable%5Blength%5D%3B%0A%09%09%09    return results%3B%0A%09%09%09  %7D%3B%0A%09%09%09%7D%0A%0A%0A%09%09%09%2F* %0A%09%09%09 * Box2Djs (port of Box2DFlash 1.4.3.1) - http%3A%2F%2Fbox2d-js.sourceforge.net%2F%0A%09%09%09 * Single-filed and jsmined ( http%3A%2F%2Fcode.google.com%2Fp%2Fjsmin-php%2F ) by Mr.doob%0A%09%09%09 *%2F%0A%09%09%09%0A%09%09%09var b2Settings%3DClass.create()%3Bb2Settings.prototype%3D%7Binitialize%3Afunction()%7B%7D%7D%0A%09%09%09b2Settings.USHRT_MAX%3D0x0000ffff%3Bb2Settings.b2_pi%3DMath.PI%3Bb2Settings.b2_massUnitsPerKilogram%3D1.0%3Bb2Settings.b2_timeUnitsPerSecond%3D1.0%3Bb2Settings.b2_lengthUnitsPerMeter%3D30.0%3Bb2Settings.b2_maxManifoldPoints%3D2%3Bb2Settings.b2_maxShapesPerBody%3D64%3Bb2Settings.b2_maxPolyVertices%3D8%3Bb2Settings.b2_maxProxies%3D1024%3Bb2Settings.b2_maxPairs%3D8*b2Settings.b2_maxProxies%3Bb2Settings.b2_linearSlop%3D0.005*b2Settings.b2_lengthUnitsPerMeter%3Bb2Settings.b2_angularSlop%3D2.0%2F180.0*b2Settings.b2_pi%3Bb2Settings.b2_velocityThreshold%3D1.0*b2Settings.b2_lengthUnitsPerMeter%2Fb2Settings.b2_timeUnitsPerSecond%3Bb2Settings.b2_maxLinearCorrection%3D0.2*b2Settings.b2_lengthUnitsPerMeter%3Bb2Settings.b2_maxAngularCorrection%3D8.0%2F180.0*b2Settings.b2_pi%3Bb2Settings.b2_contactBaumgarte%3D0.2%3Bb2Settings.b2_timeToSleep%3D0.5*b2Settings.b2_timeUnitsPerSecond%3Bb2Settings.b2_linearSleepTolerance%3D0.01*b2Settings.b2_lengthUnitsPerMeter%2Fb2Settings.b2_timeUnitsPerSecond%3Bb2Settings.b2_angularSleepTolerance%3D2.0%2F180.0%2Fb2Settings.b2_timeUnitsPerSecond%3Bb2Settings.b2Assert%3Dfunction(a)%0A%09%09%09%7Bif(!a)%7Bvar nullVec%3BnullVec.x%2B%2B%3B%7D%7D%3B%0A%09%09%09var b2Vec2%3DClass.create()%3Bb2Vec2.prototype%3D%7Binitialize%3Afunction(x_%2Cy_)%7Bthis.x%3Dx_%3Bthis.y%3Dy_%3B%7D%2CSetZero%3Afunction()%7Bthis.x%3D0.0%3Bthis.y%3D0.0%3B%7D%2CSet%3Afunction(x_%2Cy_)%7Bthis.x%3Dx_%3Bthis.y%3Dy_%3B%7D%2CSetV%3Afunction(v)%7Bthis.x%3Dv.x%3Bthis.y%3Dv.y%3B%7D%2CNegative%3Afunction()%7Breturn new b2Vec2(-this.x%2C-this.y)%3B%7D%2CCopy%3Afunction()%7Breturn new b2Vec2(this.x%2Cthis.y)%3B%7D%2CAdd%3Afunction(v)%0A%09%09%09%7Bthis.x%2B%3Dv.x%3Bthis.y%2B%3Dv.y%3B%7D%2CSubtract%3Afunction(v)%0A%09%09%09%7Bthis.x-%3Dv.x%3Bthis.y-%3Dv.y%3B%7D%2CMultiply%3Afunction(a)%0A%09%09%09%7Bthis.x*%3Da%3Bthis.y*%3Da%3B%7D%2CMulM%3Afunction(A)%0A%09%09%09%7Bvar tX%3Dthis.x%3Bthis.x%3DA.col1.x*tX%2BA.col2.x*this.y%3Bthis.y%3DA.col1.y*tX%2BA.col2.y*this.y%3B%7D%2CMulTM%3Afunction(A)%0A%09%09%09%7Bvar tX%3Db2Math.b2Dot(this%2CA.col1)%3Bthis.y%3Db2Math.b2Dot(this%2CA.col2)%3Bthis.x%3DtX%3B%7D%2CCrossVF%3Afunction(s)%0A%09%09%09%7Bvar tX%3Dthis.x%3Bthis.x%3Ds*this.y%3Bthis.y%3D-s*tX%3B%7D%2CCrossFV%3Afunction(s)%0A%09%09%09%7Bvar tX%3Dthis.x%3Bthis.x%3D-s*this.y%3Bthis.y%3Ds*tX%3B%7D%2CMinV%3Afunction(b)%0A%09%09%09%7Bthis.x%3Dthis.x<b.x%3Fthis.x%3Ab.x%3Bthis.y%3Dthis.y<b.y%3Fthis.y%3Ab.y%3B%7D%2CMaxV%3Afunction(b)%0A%09%09%09%7Bthis.x%3Dthis.x>b.x%3Fthis.x%3Ab.x%3Bthis.y%3Dthis.y>b.y%3Fthis.y%3Ab.y%3B%7D%2CAbs%3Afunction()%0A%09%09%09%7Bthis.x%3DMath.abs(this.x)%3Bthis.y%3DMath.abs(this.y)%3B%7D%2CLength%3Afunction()%0A%09%09%09%7Breturn Math.sqrt(this.x*this.x%2Bthis.y*this.y)%3B%7D%2CNormalize%3Afunction()%0A%09%09%09%7Bvar length%3Dthis.Length()%3Bif(length<Number.MIN_VALUE)%0A%09%09%09%7Breturn 0.0%3B%7D%0A%09%09%09var invLength%3D1.0%2Flength%3Bthis.x*%3DinvLength%3Bthis.y*%3DinvLength%3Breturn length%3B%7D%2CIsValid%3Afunction()%0A%09%09%09%7Breturn b2Math.b2IsValid(this.x)%26%26b2Math.b2IsValid(this.y)%3B%7D%2Cx%3Anull%2Cy%3Anull%7D%3Bb2Vec2.Make%3Dfunction(x_%2Cy_)%0A%09%09%09%7Breturn new b2Vec2(x_%2Cy_)%3B%7D%3B%0A%09%09%09var b2Mat22%3DClass.create()%3Bb2Mat22.prototype%3D%7Binitialize%3Afunction(angle%2Cc1%2Cc2)%0A%09%09%09%7Bif(angle%3D%3Dnull)angle%3D0%3Bthis.col1%3Dnew b2Vec2()%3Bthis.col2%3Dnew b2Vec2()%3Bif(c1!%3Dnull%26%26c2!%3Dnull)%7Bthis.col1.SetV(c1)%3Bthis.col2.SetV(c2)%3B%7D%0A%09%09%09else%7Bvar c%3DMath.cos(angle)%3Bvar s%3DMath.sin(angle)%3Bthis.col1.x%3Dc%3Bthis.col2.x%3D-s%3Bthis.col1.y%3Ds%3Bthis.col2.y%3Dc%3B%7D%7D%2CSet%3Afunction(angle)%0A%09%09%09%7Bvar c%3DMath.cos(angle)%3Bvar s%3DMath.sin(angle)%3Bthis.col1.x%3Dc%3Bthis.col2.x%3D-s%3Bthis.col1.y%3Ds%3Bthis.col2.y%3Dc%3B%7D%2CSetVV%3Afunction(c1%2Cc2)%0A%09%09%09%7Bthis.col1.SetV(c1)%3Bthis.col2.SetV(c2)%3B%7D%2CCopy%3Afunction()%7Breturn new b2Mat22(0%2Cthis.col1%2Cthis.col2)%3B%7D%2CSetM%3Afunction(m)%0A%09%09%09%7Bthis.col1.SetV(m.col1)%3Bthis.col2.SetV(m.col2)%3B%7D%2CAddM%3Afunction(m)%0A%09%09%09%7Bthis.col1.x%2B%3Dm.col1.x%3Bthis.col1.y%2B%3Dm.col1.y%3Bthis.col2.x%2B%3Dm.col2.x%3Bthis.col2.y%2B%3Dm.col2.y%3B%7D%2CSetIdentity%3Afunction()%0A%09%09%09%7Bthis.col1.x%3D1.0%3Bthis.col2.x%3D0.0%3Bthis.col1.y%3D0.0%3Bthis.col2.y%3D1.0%3B%7D%2CSetZero%3Afunction()%0A%09%09%09%7Bthis.col1.x%3D0.0%3Bthis.col2.x%3D0.0%3Bthis.col1.y%3D0.0%3Bthis.col2.y%3D0.0%3B%7D%2CInvert%3Afunction(out)%0A%09%09%09%7Bvar a%3Dthis.col1.x%3Bvar b%3Dthis.col2.x%3Bvar c%3Dthis.col1.y%3Bvar d%3Dthis.col2.y%3Bvar det%3Da*d-b*c%3Bdet%3D1.0%2Fdet%3Bout.col1.x%3Ddet*d%3Bout.col2.x%3D-det*b%3Bout.col1.y%3D-det*c%3Bout.col2.y%3Ddet*a%3Breturn out%3B%7D%2CSolve%3Afunction(out%2CbX%2CbY)%0A%09%09%09%7Bvar a11%3Dthis.col1.x%3Bvar a12%3Dthis.col2.x%3Bvar a21%3Dthis.col1.y%3Bvar a22%3Dthis.col2.y%3Bvar det%3Da11*a22-a12*a21%3Bdet%3D1.0%2Fdet%3Bout.x%3Ddet*(a22*bX-a12*bY)%3Bout.y%3Ddet*(a11*bY-a21*bX)%3Breturn out%3B%7D%2CAbs%3Afunction()%0A%09%09%09%7Bthis.col1.Abs()%3Bthis.col2.Abs()%3B%7D%2Ccol1%3Anew b2Vec2()%2Ccol2%3Anew b2Vec2()%7D%3B%0A%09%09%09var b2Math%3DClass.create()%3Bb2Math.prototype%3D%7Binitialize%3Afunction()%7B%7D%7D%0A%09%09%09b2Math.b2IsValid%3Dfunction(x)%0A%09%09%09%7Breturn isFinite(x)%3B%7D%3Bb2Math.b2Dot%3Dfunction(a%2Cb)%0A%09%09%09%7Breturn a.x*b.x%2Ba.y*b.y%3B%7D%3Bb2Math.b2CrossVV%3Dfunction(a%2Cb)%0A%09%09%09%7Breturn a.x*b.y-a.y*b.x%3B%7D%3Bb2Math.b2CrossVF%3Dfunction(a%2Cs)%0A%09%09%09%7Bvar v%3Dnew b2Vec2(s*a.y%2C-s*a.x)%3Breturn v%3B%7D%3Bb2Math.b2CrossFV%3Dfunction(s%2Ca)%0A%09%09%09%7Bvar v%3Dnew b2Vec2(-s*a.y%2Cs*a.x)%3Breturn v%3B%7D%3Bb2Math.b2MulMV%3Dfunction(A%2Cv)%0A%09%09%09%7Bvar u%3Dnew b2Vec2(A.col1.x*v.x%2BA.col2.x*v.y%2CA.col1.y*v.x%2BA.col2.y*v.y)%3Breturn u%3B%7D%3Bb2Math.b2MulTMV%3Dfunction(A%2Cv)%0A%09%09%09%7Bvar u%3Dnew b2Vec2(b2Math.b2Dot(v%2CA.col1)%2Cb2Math.b2Dot(v%2CA.col2))%3Breturn u%3B%7D%3Bb2Math.AddVV%3Dfunction(a%2Cb)%0A%09%09%09%7Bvar v%3Dnew b2Vec2(a.x%2Bb.x%2Ca.y%2Bb.y)%3Breturn v%3B%7D%3Bb2Math.SubtractVV%3Dfunction(a%2Cb)%0A%09%09%09%7Bvar v%3Dnew b2Vec2(a.x-b.x%2Ca.y-b.y)%3Breturn v%3B%7D%3Bb2Math.MulFV%3Dfunction(s%2Ca)%0A%09%09%09%7Bvar v%3Dnew b2Vec2(s*a.x%2Cs*a.y)%3Breturn v%3B%7D%3Bb2Math.AddMM%3Dfunction(A%2CB)%0A%09%09%09%7Bvar C%3Dnew b2Mat22(0%2Cb2Math.AddVV(A.col1%2CB.col1)%2Cb2Math.AddVV(A.col2%2CB.col2))%3Breturn C%3B%7D%3Bb2Math.b2MulMM%3Dfunction(A%2CB)%0A%09%09%09%7Bvar C%3Dnew b2Mat22(0%2Cb2Math.b2MulMV(A%2CB.col1)%2Cb2Math.b2MulMV(A%2CB.col2))%3Breturn C%3B%7D%3Bb2Math.b2MulTMM%3Dfunction(A%2CB)%0A%09%09%09%7Bvar c1%3Dnew b2Vec2(b2Math.b2Dot(A.col1%2CB.col1)%2Cb2Math.b2Dot(A.col2%2CB.col1))%3Bvar c2%3Dnew b2Vec2(b2Math.b2Dot(A.col1%2CB.col2)%2Cb2Math.b2Dot(A.col2%2CB.col2))%3Bvar C%3Dnew b2Mat22(0%2Cc1%2Cc2)%3Breturn C%3B%7D%3Bb2Math.b2Abs%3Dfunction(a)%0A%09%09%09%7Breturn a>0.0%3Fa%3A-a%3B%7D%3Bb2Math.b2AbsV%3Dfunction(a)%0A%09%09%09%7Bvar b%3Dnew b2Vec2(b2Math.b2Abs(a.x)%2Cb2Math.b2Abs(a.y))%3Breturn b%3B%7D%3Bb2Math.b2AbsM%3Dfunction(A)%0A%09%09%09%7Bvar B%3Dnew b2Mat22(0%2Cb2Math.b2AbsV(A.col1)%2Cb2Math.b2AbsV(A.col2))%3Breturn B%3B%7D%3Bb2Math.b2Min%3Dfunction(a%2Cb)%0A%09%09%09%7Breturn a<b%3Fa%3Ab%3B%7D%3Bb2Math.b2MinV%3Dfunction(a%2Cb)%0A%09%09%09%7Bvar c%3Dnew b2Vec2(b2Math.b2Min(a.x%2Cb.x)%2Cb2Math.b2Min(a.y%2Cb.y))%3Breturn c%3B%7D%3Bb2Math.b2Max%3Dfunction(a%2Cb)%0A%09%09%09%7Breturn a>b%3Fa%3Ab%3B%7D%3Bb2Math.b2MaxV%3Dfunction(a%2Cb)%0A%09%09%09%7Bvar c%3Dnew b2Vec2(b2Math.b2Max(a.x%2Cb.x)%2Cb2Math.b2Max(a.y%2Cb.y))%3Breturn c%3B%7D%3Bb2Math.b2Clamp%3Dfunction(a%2Clow%2Chigh)%0A%09%09%09%7Breturn b2Math.b2Max(low%2Cb2Math.b2Min(a%2Chigh))%3B%7D%3Bb2Math.b2ClampV%3Dfunction(a%2Clow%2Chigh)%0A%09%09%09%7Breturn b2Math.b2MaxV(low%2Cb2Math.b2MinV(a%2Chigh))%3B%7D%3Bb2Math.b2Swap%3Dfunction(a%2Cb)%0A%09%09%09%7Bvar tmp%3Da%5B0%5D%3Ba%5B0%5D%3Db%5B0%5D%3Bb%5B0%5D%3Dtmp%3B%7D%3Bb2Math.b2Random%3Dfunction()%0A%09%09%09%7Breturn Math.random()*2-1%3B%7D%3Bb2Math.b2NextPowerOfTwo%3Dfunction(x)%0A%09%09%09%7Bx%7C%3D(x>>1)%260x7FFFFFFF%3Bx%7C%3D(x>>2)%260x3FFFFFFF%3Bx%7C%3D(x>>4)%260x0FFFFFFF%3Bx%7C%3D(x>>8)%260x00FFFFFF%3Bx%7C%3D(x>>16)%260x0000FFFF%3Breturn x%2B1%3B%7D%3Bb2Math.b2IsPowerOfTwo%3Dfunction(x)%0A%09%09%09%7Bvar result%3Dx>0%26%26(x%26(x-1))%3D%3D0%3Breturn result%3B%7D%3Bb2Math.tempVec2%3Dnew b2Vec2()%3Bb2Math.tempVec3%3Dnew b2Vec2()%3Bb2Math.tempVec4%3Dnew b2Vec2()%3Bb2Math.tempVec5%3Dnew b2Vec2()%3Bb2Math.tempMat%3Dnew b2Mat22()%3B%0A%09%09%09var b2AABB%3DClass.create()%3Bb2AABB.prototype%3D%7BIsValid%3Afunction()%7Bvar dX%3Dthis.maxVertex.x%3Bvar dY%3Dthis.maxVertex.y%3BdX%3Dthis.maxVertex.x%3BdY%3Dthis.maxVertex.y%3BdX-%3Dthis.minVertex.x%3BdY-%3Dthis.minVertex.y%3Bvar valid%3DdX>%3D0.0%26%26dY>%3D0.0%3Bvalid%3Dvalid%26%26this.minVertex.IsValid()%26%26this.maxVertex.IsValid()%3Breturn valid%3B%7D%2CminVertex%3Anew b2Vec2()%2CmaxVertex%3Anew b2Vec2()%2Cinitialize%3Afunction()%7Bthis.minVertex%3Dnew b2Vec2()%3Bthis.maxVertex%3Dnew b2Vec2()%3B%7D%7D%3B%0A%09%09%09var b2Bound%3DClass.create()%3Bb2Bound.prototype%3D%7BIsLower%3Afunction()%7Breturn(this.value%261)%3D%3D0%3B%7D%2CIsUpper%3Afunction()%7Breturn(this.value%261)%3D%3D1%3B%7D%2CSwap%3Afunction(b)%7Bvar tempValue%3Dthis.value%3Bvar tempProxyId%3Dthis.proxyId%3Bvar tempStabbingCount%3Dthis.stabbingCount%3Bthis.value%3Db.value%3Bthis.proxyId%3Db.proxyId%3Bthis.stabbingCount%3Db.stabbingCount%3Bb.value%3DtempValue%3Bb.proxyId%3DtempProxyId%3Bb.stabbingCount%3DtempStabbingCount%3B%7D%2Cvalue%3A0%2CproxyId%3A0%2CstabbingCount%3A0%2Cinitialize%3Afunction()%7B%7D%7D%0A%09%09%09%0A%09%09%09var b2BoundValues%3DClass.create()%3Bb2BoundValues.prototype%3D%7BlowerValues%3A%5B0%2C0%5D%2CupperValues%3A%5B0%2C0%5D%2Cinitialize%3Afunction()%7Bthis.lowerValues%3D%5B0%2C0%5D%3Bthis.upperValues%3D%5B0%2C0%5D%3B%7D%7D%0A%09%09%09%0A%09%09%09var b2Pair%3DClass.create()%3Bb2Pair.prototype%3D%7BSetBuffered%3Afunction()%7Bthis.status%7C%3Db2Pair.e_pairBuffered%3B%7D%2CClearBuffered%3Afunction()%7Bthis.status%26%3D~b2Pair.e_pairBuffered%3B%7D%2CIsBuffered%3Afunction()%7Breturn(this.status%26b2Pair.e_pairBuffered)%3D%3Db2Pair.e_pairBuffered%3B%7D%2CSetRemoved%3Afunction()%7Bthis.status%7C%3Db2Pair.e_pairRemoved%3B%7D%2CClearRemoved%3Afunction()%7Bthis.status%26%3D~b2Pair.e_pairRemoved%3B%7D%2CIsRemoved%3Afunction()%7Breturn(this.status%26b2Pair.e_pairRemoved)%3D%3Db2Pair.e_pairRemoved%3B%7D%2CSetFinal%3Afunction()%7Bthis.status%7C%3Db2Pair.e_pairFinal%3B%7D%2CIsFinal%3Afunction()%7Breturn(this.status%26b2Pair.e_pairFinal)%3D%3Db2Pair.e_pairFinal%3B%7D%2CuserData%3Anull%2CproxyId1%3A0%2CproxyId2%3A0%2Cnext%3A0%2Cstatus%3A0%2Cinitialize%3Afunction()%7B%7D%7D%3Bb2Pair.b2_nullPair%3Db2Settings.USHRT_MAX%3Bb2Pair.b2_nullProxy%3Db2Settings.USHRT_MAX%3Bb2Pair.b2_tableCapacity%3Db2Settings.b2_maxPairs%3Bb2Pair.b2_tableMask%3Db2Pair.b2_tableCapacity-1%3Bb2Pair.e_pairBuffered%3D0x0001%3Bb2Pair.e_pairRemoved%3D0x0002%3Bb2Pair.e_pairFinal%3D0x0004%3B%0A%09%09%09var b2PairCallback%3DClass.create()%3Bb2PairCallback.prototype%3D%7BPairAdded%3Afunction(proxyUserData1%2CproxyUserData2)%7Breturn null%7D%2CPairRemoved%3Afunction(proxyUserData1%2CproxyUserData2%2CpairUserData)%7B%7D%2Cinitialize%3Afunction()%7B%7D%7D%3B%0A%09%09%09var b2BufferedPair%3DClass.create()%3Bb2BufferedPair.prototype%3D%7BproxyId1%3A0%2CproxyId2%3A0%2Cinitialize%3Afunction()%7B%7D%7D%0A%09%09%09%0A%09%09%09var b2PairManager%3DClass.create()%3Bb2PairManager.prototype%3D%7Binitialize%3Afunction()%7Bvar i%3D0%3Bthis.m_hashTable%3Dnew Array(b2Pair.b2_tableCapacity)%3Bfor(i%3D0%3Bi<b2Pair.b2_tableCapacity%3B%2B%2Bi)%0A%09%09%09%7Bthis.m_hashTable%5Bi%5D%3Db2Pair.b2_nullPair%3B%7D%0A%09%09%09this.m_pairs%3Dnew Array(b2Settings.b2_maxPairs)%3Bfor(i%3D0%3Bi<b2Settings.b2_maxPairs%3B%2B%2Bi)%0A%09%09%09%7Bthis.m_pairs%5Bi%5D%3Dnew b2Pair()%3B%7D%0A%09%09%09this.m_pairBuffer%3Dnew Array(b2Settings.b2_maxPairs)%3Bfor(i%3D0%3Bi<b2Settings.b2_maxPairs%3B%2B%2Bi)%0A%09%09%09%7Bthis.m_pairBuffer%5Bi%5D%3Dnew b2BufferedPair()%3B%7D%0A%09%09%09for(i%3D0%3Bi<b2Settings.b2_maxPairs%3B%2B%2Bi)%0A%09%09%09%7Bthis.m_pairs%5Bi%5D.proxyId1%3Db2Pair.b2_nullProxy%3Bthis.m_pairs%5Bi%5D.proxyId2%3Db2Pair.b2_nullProxy%3Bthis.m_pairs%5Bi%5D.userData%3Dnull%3Bthis.m_pairs%5Bi%5D.status%3D0%3Bthis.m_pairs%5Bi%5D.next%3D(i%2B1)%3B%7D%0A%09%09%09this.m_pairs%5Bb2Settings.b2_maxPairs-1%5D.next%3Db2Pair.b2_nullPair%3Bthis.m_pairCount%3D0%3B%7D%2CInitialize%3Afunction(broadPhase%2Ccallback)%7Bthis.m_broadPhase%3DbroadPhase%3Bthis.m_callback%3Dcallback%3B%7D%2CAddBufferedPair%3Afunction(proxyId1%2CproxyId2)%7Bvar pair%3Dthis.AddPair(proxyId1%2CproxyId2)%3Bif(pair.IsBuffered()%3D%3Dfalse)%0A%09%09%09%7Bpair.SetBuffered()%3Bthis.m_pairBuffer%5Bthis.m_pairBufferCount%5D.proxyId1%3Dpair.proxyId1%3Bthis.m_pairBuffer%5Bthis.m_pairBufferCount%5D.proxyId2%3Dpair.proxyId2%3B%2B%2Bthis.m_pairBufferCount%3B%7D%0A%09%09%09pair.ClearRemoved()%3Bif(b2BroadPhase.s_validate)%0A%09%09%09%7Bthis.ValidateBuffer()%3B%7D%7D%2CRemoveBufferedPair%3Afunction(proxyId1%2CproxyId2)%7Bvar pair%3Dthis.Find(proxyId1%2CproxyId2)%3Bif(pair%3D%3Dnull)%0A%09%09%09%7Breturn%3B%7D%0A%09%09%09if(pair.IsBuffered()%3D%3Dfalse)%0A%09%09%09%7Bpair.SetBuffered()%3Bthis.m_pairBuffer%5Bthis.m_pairBufferCount%5D.proxyId1%3Dpair.proxyId1%3Bthis.m_pairBuffer%5Bthis.m_pairBufferCount%5D.proxyId2%3Dpair.proxyId2%3B%2B%2Bthis.m_pairBufferCount%3B%7D%0A%09%09%09pair.SetRemoved()%3Bif(b2BroadPhase.s_validate)%0A%09%09%09%7Bthis.ValidateBuffer()%3B%7D%7D%2CCommit%3Afunction()%7Bvar i%3D0%3Bvar removeCount%3D0%3Bvar proxies%3Dthis.m_broadPhase.m_proxyPool%3Bfor(i%3D0%3Bi<this.m_pairBufferCount%3B%2B%2Bi)%0A%09%09%09%7Bvar pair%3Dthis.Find(this.m_pairBuffer%5Bi%5D.proxyId1%2Cthis.m_pairBuffer%5Bi%5D.proxyId2)%3Bpair.ClearBuffered()%3Bvar proxy1%3Dproxies%5Bpair.proxyId1%5D%3Bvar proxy2%3Dproxies%5Bpair.proxyId2%5D%3Bif(pair.IsRemoved())%0A%09%09%09%7Bif(pair.IsFinal()%3D%3Dtrue)%0A%09%09%09%7Bthis.m_callback.PairRemoved(proxy1.userData%2Cproxy2.userData%2Cpair.userData)%3B%7D%0A%09%09%09this.m_pairBuffer%5BremoveCount%5D.proxyId1%3Dpair.proxyId1%3Bthis.m_pairBuffer%5BremoveCount%5D.proxyId2%3Dpair.proxyId2%3B%2B%2BremoveCount%3B%7D%0A%09%09%09else%0A%09%09%09%7Bif(pair.IsFinal()%3D%3Dfalse)%0A%09%09%09%7Bpair.userData%3Dthis.m_callback.PairAdded(proxy1.userData%2Cproxy2.userData)%3Bpair.SetFinal()%3B%7D%7D%7D%0A%09%09%09for(i%3D0%3Bi<removeCount%3B%2B%2Bi)%0A%09%09%09%7Bthis.RemovePair(this.m_pairBuffer%5Bi%5D.proxyId1%2Cthis.m_pairBuffer%5Bi%5D.proxyId2)%3B%7D%0A%09%09%09this.m_pairBufferCount%3D0%3Bif(b2BroadPhase.s_validate)%0A%09%09%09%7Bthis.ValidateTable()%3B%7D%7D%2CAddPair%3Afunction(proxyId1%2CproxyId2)%7Bif(proxyId1>proxyId2)%7Bvar temp%3DproxyId1%3BproxyId1%3DproxyId2%3BproxyId2%3Dtemp%3B%7D%0A%09%09%09var hash%3Db2PairManager.Hash(proxyId1%2CproxyId2)%26b2Pair.b2_tableMask%3Bvar pair%3Dpair%3Dthis.FindHash(proxyId1%2CproxyId2%2Chash)%3Bif(pair!%3Dnull)%0A%09%09%09%7Breturn pair%3B%7D%0A%09%09%09var pIndex%3Dthis.m_freePair%3Bpair%3Dthis.m_pairs%5BpIndex%5D%3Bthis.m_freePair%3Dpair.next%3Bpair.proxyId1%3DproxyId1%3Bpair.proxyId2%3DproxyId2%3Bpair.status%3D0%3Bpair.userData%3Dnull%3Bpair.next%3Dthis.m_hashTable%5Bhash%5D%3Bthis.m_hashTable%5Bhash%5D%3DpIndex%3B%2B%2Bthis.m_pairCount%3Breturn pair%3B%7D%2CRemovePair%3Afunction(proxyId1%2CproxyId2)%7Bif(proxyId1>proxyId2)%7Bvar temp%3DproxyId1%3BproxyId1%3DproxyId2%3BproxyId2%3Dtemp%3B%7D%0A%09%09%09var hash%3Db2PairManager.Hash(proxyId1%2CproxyId2)%26b2Pair.b2_tableMask%3Bvar node%3Dthis.m_hashTable%5Bhash%5D%3Bvar pNode%3Dnull%3Bwhile(node!%3Db2Pair.b2_nullPair)%0A%09%09%09%7Bif(b2PairManager.Equals(this.m_pairs%5Bnode%5D%2CproxyId1%2CproxyId2))%0A%09%09%09%7Bvar index%3Dnode%3Bif(pNode)%7BpNode.next%3Dthis.m_pairs%5Bnode%5D.next%3B%7D%0A%09%09%09else%7Bthis.m_hashTable%5Bhash%5D%3Dthis.m_pairs%5Bnode%5D.next%3B%7D%0A%09%09%09var pair%3Dthis.m_pairs%5Bindex%5D%3Bvar userData%3Dpair.userData%3Bpair.next%3Dthis.m_freePair%3Bpair.proxyId1%3Db2Pair.b2_nullProxy%3Bpair.proxyId2%3Db2Pair.b2_nullProxy%3Bpair.userData%3Dnull%3Bpair.status%3D0%3Bthis.m_freePair%3Dindex%3B--this.m_pairCount%3Breturn userData%3B%7D%0A%09%09%09else%0A%09%09%09%7BpNode%3Dthis.m_pairs%5Bnode%5D%3Bnode%3DpNode.next%3B%7D%7D%0A%09%09%09return null%3B%7D%2CFind%3Afunction(proxyId1%2CproxyId2)%7Bif(proxyId1>proxyId2)%7Bvar temp%3DproxyId1%3BproxyId1%3DproxyId2%3BproxyId2%3Dtemp%3B%7D%0A%09%09%09var hash%3Db2PairManager.Hash(proxyId1%2CproxyId2)%26b2Pair.b2_tableMask%3Breturn this.FindHash(proxyId1%2CproxyId2%2Chash)%3B%7D%2CFindHash%3Afunction(proxyId1%2CproxyId2%2Chash)%7Bvar index%3Dthis.m_hashTable%5Bhash%5D%3Bwhile(index!%3Db2Pair.b2_nullPair%26%26b2PairManager.Equals(this.m_pairs%5Bindex%5D%2CproxyId1%2CproxyId2)%3D%3Dfalse)%0A%09%09%09%7Bindex%3Dthis.m_pairs%5Bindex%5D.next%3B%7D%0A%09%09%09if(index%3D%3Db2Pair.b2_nullPair)%0A%09%09%09%7Breturn null%3B%7D%0A%09%09%09return this.m_pairs%5Bindex%5D%3B%7D%2CValidateBuffer%3Afunction()%7B%7D%2CValidateTable%3Afunction()%7B%7D%2Cm_broadPhase%3Anull%2Cm_callback%3Anull%2Cm_pairs%3Anull%2Cm_freePair%3A0%2Cm_pairCount%3A0%2Cm_pairBuffer%3Anull%2Cm_pairBufferCount%3A0%2Cm_hashTable%3Anull%7D%3Bb2PairManager.Hash%3Dfunction(proxyId1%2CproxyId2)%0A%09%09%09%7Bvar key%3D((proxyId2<<16)%260xffff0000)%7CproxyId1%3Bkey%3D~key%2B((key<<15)%260xFFFF8000)%3Bkey%3Dkey%5E((key>>12)%260x000fffff)%3Bkey%3Dkey%2B((key<<2)%260xFFFFFFFC)%3Bkey%3Dkey%5E((key>>4)%260x0fffffff)%3Bkey%3Dkey*2057%3Bkey%3Dkey%5E((key>>16)%260x0000ffff)%3Breturn key%3B%7D%3Bb2PairManager.Equals%3Dfunction(pair%2CproxyId1%2CproxyId2)%0A%09%09%09%7Breturn(pair.proxyId1%3D%3DproxyId1%26%26pair.proxyId2%3D%3DproxyId2)%3B%7D%3Bb2PairManager.EqualsPair%3Dfunction(pair1%2Cpair2)%0A%09%09%09%7Breturn pair1.proxyId1%3D%3Dpair2.proxyId1%26%26pair1.proxyId2%3D%3Dpair2.proxyId2%3B%7D%3B%0A%09%09%09var b2BroadPhase%3DClass.create()%3Bb2BroadPhase.prototype%3D%7Binitialize%3Afunction(worldAABB%2Ccallback)%7Bthis.m_pairManager%3Dnew b2PairManager()%3Bthis.m_proxyPool%3Dnew Array(b2Settings.b2_maxPairs)%3Bthis.m_bounds%3Dnew Array(2*b2Settings.b2_maxProxies)%3Bthis.m_queryResults%3Dnew Array(b2Settings.b2_maxProxies)%3Bthis.m_quantizationFactor%3Dnew b2Vec2()%3Bvar i%3D0%3Bthis.m_pairManager.Initialize(this%2Ccallback)%3Bthis.m_worldAABB%3DworldAABB%3Bthis.m_proxyCount%3D0%3Bfor(i%3D0%3Bi<b2Settings.b2_maxProxies%3Bi%2B%2B)%7Bthis.m_queryResults%5Bi%5D%3D0%3B%7D%0A%09%09%09this.m_bounds%3Dnew Array(2)%3Bfor(i%3D0%3Bi<2%3Bi%2B%2B)%7Bthis.m_bounds%5Bi%5D%3Dnew Array(2*b2Settings.b2_maxProxies)%3Bfor(var j%3D0%3Bj<2*b2Settings.b2_maxProxies%3Bj%2B%2B)%7Bthis.m_bounds%5Bi%5D%5Bj%5D%3Dnew b2Bound()%3B%7D%7D%0A%09%09%09var dX%3DworldAABB.maxVertex.x%3Bvar dY%3DworldAABB.maxVertex.y%3BdX-%3DworldAABB.minVertex.x%3BdY-%3DworldAABB.minVertex.y%3Bthis.m_quantizationFactor.x%3Db2Settings.USHRT_MAX%2FdX%3Bthis.m_quantizationFactor.y%3Db2Settings.USHRT_MAX%2FdY%3Bvar tProxy%3Bfor(i%3D0%3Bi<b2Settings.b2_maxProxies-1%3B%2B%2Bi)%0A%09%09%09%7BtProxy%3Dnew b2Proxy()%3Bthis.m_proxyPool%5Bi%5D%3DtProxy%3BtProxy.SetNext(i%2B1)%3BtProxy.timeStamp%3D0%3BtProxy.overlapCount%3Db2BroadPhase.b2_invalid%3BtProxy.userData%3Dnull%3B%7D%0A%09%09%09tProxy%3Dnew b2Proxy()%3Bthis.m_proxyPool%5Bb2Settings.b2_maxProxies-1%5D%3DtProxy%3BtProxy.SetNext(b2Pair.b2_nullProxy)%3BtProxy.timeStamp%3D0%3BtProxy.overlapCount%3Db2BroadPhase.b2_invalid%3BtProxy.userData%3Dnull%3Bthis.m_freeProxy%3D0%3Bthis.m_timeStamp%3D1%3Bthis.m_queryResultCount%3D0%3B%7D%2CInRange%3Afunction(aabb)%7Bvar dX%3Bvar dY%3Bvar d2X%3Bvar d2Y%3BdX%3Daabb.minVertex.x%3BdY%3Daabb.minVertex.y%3BdX-%3Dthis.m_worldAABB.maxVertex.x%3BdY-%3Dthis.m_worldAABB.maxVertex.y%3Bd2X%3Dthis.m_worldAABB.minVertex.x%3Bd2Y%3Dthis.m_worldAABB.minVertex.y%3Bd2X-%3Daabb.maxVertex.x%3Bd2Y-%3Daabb.maxVertex.y%3BdX%3Db2Math.b2Max(dX%2Cd2X)%3BdY%3Db2Math.b2Max(dY%2Cd2Y)%3Breturn b2Math.b2Max(dX%2CdY)<0.0%3B%7D%2CGetProxy%3Afunction(proxyId)%7Bif(proxyId%3D%3Db2Pair.b2_nullProxy%7C%7Cthis.m_proxyPool%5BproxyId%5D.IsValid()%3D%3Dfalse)%0A%09%09%09%7Breturn null%3B%7D%0A%09%09%09return this.m_proxyPool%5BproxyId%5D%3B%7D%2CCreateProxy%3Afunction(aabb%2CuserData)%7Bvar index%3D0%3Bvar proxy%3Bvar proxyId%3Dthis.m_freeProxy%3Bproxy%3Dthis.m_proxyPool%5BproxyId%5D%3Bthis.m_freeProxy%3Dproxy.GetNext()%3Bproxy.overlapCount%3D0%3Bproxy.userData%3DuserData%3Bvar boundCount%3D2*this.m_proxyCount%3Bvar lowerValues%3Dnew Array()%3Bvar upperValues%3Dnew Array()%3Bthis.ComputeBounds(lowerValues%2CupperValues%2Caabb)%3Bfor(var axis%3D0%3Baxis<2%3B%2B%2Baxis)%0A%09%09%09%7Bvar bounds%3Dthis.m_bounds%5Baxis%5D%3Bvar lowerIndex%3D0%3Bvar upperIndex%3D0%3Bvar lowerIndexOut%3D%5BlowerIndex%5D%3Bvar upperIndexOut%3D%5BupperIndex%5D%3Bthis.Query(lowerIndexOut%2CupperIndexOut%2ClowerValues%5Baxis%5D%2CupperValues%5Baxis%5D%2Cbounds%2CboundCount%2Caxis)%3BlowerIndex%3DlowerIndexOut%5B0%5D%3BupperIndex%3DupperIndexOut%5B0%5D%3Bvar tArr%3Dnew Array()%3Bvar j%3D0%3Bvar tEnd%3DboundCount-upperIndex%0A%09%09%09var tBound1%3Bvar tBound2%3Bfor(j%3D0%3Bj<tEnd%3Bj%2B%2B)%7BtArr%5Bj%5D%3Dnew b2Bound()%3BtBound1%3DtArr%5Bj%5D%3BtBound2%3Dbounds%5BupperIndex%2Bj%5D%3BtBound1.value%3DtBound2.value%3BtBound1.proxyId%3DtBound2.proxyId%3BtBound1.stabbingCount%3DtBound2.stabbingCount%3B%7D%0A%09%09%09tEnd%3DtArr.length%3Bvar tIndex%3DupperIndex%2B2%3Bfor(j%3D0%3Bj<tEnd%3Bj%2B%2B)%7BtBound2%3DtArr%5Bj%5D%3BtBound1%3Dbounds%5BtIndex%2Bj%5D%0A%09%09%09tBound1.value%3DtBound2.value%3BtBound1.proxyId%3DtBound2.proxyId%3BtBound1.stabbingCount%3DtBound2.stabbingCount%3B%7D%0A%09%09%09tArr%3Dnew Array()%3BtEnd%3DupperIndex-lowerIndex%3Bfor(j%3D0%3Bj<tEnd%3Bj%2B%2B)%7BtArr%5Bj%5D%3Dnew b2Bound()%3BtBound1%3DtArr%5Bj%5D%3BtBound2%3Dbounds%5BlowerIndex%2Bj%5D%3BtBound1.value%3DtBound2.value%3BtBound1.proxyId%3DtBound2.proxyId%3BtBound1.stabbingCount%3DtBound2.stabbingCount%3B%7D%0A%09%09%09tEnd%3DtArr.length%3BtIndex%3DlowerIndex%2B1%3Bfor(j%3D0%3Bj<tEnd%3Bj%2B%2B)%7BtBound2%3DtArr%5Bj%5D%3BtBound1%3Dbounds%5BtIndex%2Bj%5D%0A%09%09%09tBound1.value%3DtBound2.value%3BtBound1.proxyId%3DtBound2.proxyId%3BtBound1.stabbingCount%3DtBound2.stabbingCount%3B%7D%0A%09%09%09%2B%2BupperIndex%3Bbounds%5BlowerIndex%5D.value%3DlowerValues%5Baxis%5D%3Bbounds%5BlowerIndex%5D.proxyId%3DproxyId%3Bbounds%5BupperIndex%5D.value%3DupperValues%5Baxis%5D%3Bbounds%5BupperIndex%5D.proxyId%3DproxyId%3Bbounds%5BlowerIndex%5D.stabbingCount%3DlowerIndex%3D%3D0%3F0%3Abounds%5BlowerIndex-1%5D.stabbingCount%3Bbounds%5BupperIndex%5D.stabbingCount%3Dbounds%5BupperIndex-1%5D.stabbingCount%3Bfor(index%3DlowerIndex%3Bindex<upperIndex%3B%2B%2Bindex)%0A%09%09%09%7Bbounds%5Bindex%5D.stabbingCount%2B%2B%3B%7D%0A%09%09%09for(index%3DlowerIndex%3Bindex<boundCount%2B2%3B%2B%2Bindex)%0A%09%09%09%7Bvar proxy2%3Dthis.m_proxyPool%5Bbounds%5Bindex%5D.proxyId%5D%3Bif(bounds%5Bindex%5D.IsLower())%0A%09%09%09%7Bproxy2.lowerBounds%5Baxis%5D%3Dindex%3B%7D%0A%09%09%09else%0A%09%09%09%7Bproxy2.upperBounds%5Baxis%5D%3Dindex%3B%7D%7D%7D%0A%09%09%09%2B%2Bthis.m_proxyCount%3Bfor(var i%3D0%3Bi<this.m_queryResultCount%3B%2B%2Bi)%0A%09%09%09%7Bthis.m_pairManager.AddBufferedPair(proxyId%2Cthis.m_queryResults%5Bi%5D)%3B%7D%0A%09%09%09this.m_pairManager.Commit()%3Bthis.m_queryResultCount%3D0%3Bthis.IncrementTimeStamp()%3Breturn proxyId%3B%7D%2CDestroyProxy%3Afunction(proxyId)%7Bvar proxy%3Dthis.m_proxyPool%5BproxyId%5D%3Bvar boundCount%3D2*this.m_proxyCount%3Bfor(var axis%3D0%3Baxis<2%3B%2B%2Baxis)%0A%09%09%09%7Bvar bounds%3Dthis.m_bounds%5Baxis%5D%3Bvar lowerIndex%3Dproxy.lowerBounds%5Baxis%5D%3Bvar upperIndex%3Dproxy.upperBounds%5Baxis%5D%3Bvar lowerValue%3Dbounds%5BlowerIndex%5D.value%3Bvar upperValue%3Dbounds%5BupperIndex%5D.value%3Bvar tArr%3Dnew Array()%3Bvar j%3D0%3Bvar tEnd%3DupperIndex-lowerIndex-1%3Bvar tBound1%3Bvar tBound2%3Bfor(j%3D0%3Bj<tEnd%3Bj%2B%2B)%7BtArr%5Bj%5D%3Dnew b2Bound()%3BtBound1%3DtArr%5Bj%5D%3BtBound2%3Dbounds%5BlowerIndex%2B1%2Bj%5D%3BtBound1.value%3DtBound2.value%3BtBound1.proxyId%3DtBound2.proxyId%3BtBound1.stabbingCount%3DtBound2.stabbingCount%3B%7D%0A%09%09%09tEnd%3DtArr.length%3Bvar tIndex%3DlowerIndex%3Bfor(j%3D0%3Bj<tEnd%3Bj%2B%2B)%7BtBound2%3DtArr%5Bj%5D%3BtBound1%3Dbounds%5BtIndex%2Bj%5D%0A%09%09%09tBound1.value%3DtBound2.value%3BtBound1.proxyId%3DtBound2.proxyId%3BtBound1.stabbingCount%3DtBound2.stabbingCount%3B%7D%0A%09%09%09tArr%3Dnew Array()%3BtEnd%3DboundCount-upperIndex-1%3Bfor(j%3D0%3Bj<tEnd%3Bj%2B%2B)%7BtArr%5Bj%5D%3Dnew b2Bound()%3BtBound1%3DtArr%5Bj%5D%3BtBound2%3Dbounds%5BupperIndex%2B1%2Bj%5D%3BtBound1.value%3DtBound2.value%3BtBound1.proxyId%3DtBound2.proxyId%3BtBound1.stabbingCount%3DtBound2.stabbingCount%3B%7D%0A%09%09%09tEnd%3DtArr.length%3BtIndex%3DupperIndex-1%3Bfor(j%3D0%3Bj<tEnd%3Bj%2B%2B)%7BtBound2%3DtArr%5Bj%5D%3BtBound1%3Dbounds%5BtIndex%2Bj%5D%0A%09%09%09tBound1.value%3DtBound2.value%3BtBound1.proxyId%3DtBound2.proxyId%3BtBound1.stabbingCount%3DtBound2.stabbingCount%3B%7D%0A%09%09%09tEnd%3DboundCount-2%3Bfor(var index%3DlowerIndex%3Bindex<tEnd%3B%2B%2Bindex)%0A%09%09%09%7Bvar proxy2%3Dthis.m_proxyPool%5Bbounds%5Bindex%5D.proxyId%5D%3Bif(bounds%5Bindex%5D.IsLower())%0A%09%09%09%7Bproxy2.lowerBounds%5Baxis%5D%3Dindex%3B%7D%0A%09%09%09else%0A%09%09%09%7Bproxy2.upperBounds%5Baxis%5D%3Dindex%3B%7D%7D%0A%09%09%09tEnd%3DupperIndex-1%3Bfor(var index2%3DlowerIndex%3Bindex2<tEnd%3B%2B%2Bindex2)%0A%09%09%09%7Bbounds%5Bindex2%5D.stabbingCount--%3B%7D%0A%09%09%09this.Query(%5B0%5D%2C%5B0%5D%2ClowerValue%2CupperValue%2Cbounds%2CboundCount-2%2Caxis)%3B%7D%0A%09%09%09for(var i%3D0%3Bi<this.m_queryResultCount%3B%2B%2Bi)%0A%09%09%09%7Bthis.m_pairManager.RemoveBufferedPair(proxyId%2Cthis.m_queryResults%5Bi%5D)%3B%7D%0A%09%09%09this.m_pairManager.Commit()%3Bthis.m_queryResultCount%3D0%3Bthis.IncrementTimeStamp()%3Bproxy.userData%3Dnull%3Bproxy.overlapCount%3Db2BroadPhase.b2_invalid%3Bproxy.lowerBounds%5B0%5D%3Db2BroadPhase.b2_invalid%3Bproxy.lowerBounds%5B1%5D%3Db2BroadPhase.b2_invalid%3Bproxy.upperBounds%5B0%5D%3Db2BroadPhase.b2_invalid%3Bproxy.upperBounds%5B1%5D%3Db2BroadPhase.b2_invalid%3Bproxy.SetNext(this.m_freeProxy)%3Bthis.m_freeProxy%3DproxyId%3B--this.m_proxyCount%3B%7D%2CMoveProxy%3Afunction(proxyId%2Caabb)%7Bvar axis%3D0%3Bvar index%3D0%3Bvar bound%3Bvar prevBound%0A%09%09%09var nextBound%0A%09%09%09var nextProxyId%3D0%3Bvar nextProxy%3Bif(proxyId%3D%3Db2Pair.b2_nullProxy%7C%7Cb2Settings.b2_maxProxies<%3DproxyId)%0A%09%09%09%7Breturn%3B%7D%0A%09%09%09if(aabb.IsValid()%3D%3Dfalse)%0A%09%09%09%7Breturn%3B%7D%0A%09%09%09var boundCount%3D2*this.m_proxyCount%3Bvar proxy%3Dthis.m_proxyPool%5BproxyId%5D%3Bvar newValues%3Dnew b2BoundValues()%3Bthis.ComputeBounds(newValues.lowerValues%2CnewValues.upperValues%2Caabb)%3Bvar oldValues%3Dnew b2BoundValues()%3Bfor(axis%3D0%3Baxis<2%3B%2B%2Baxis)%0A%09%09%09%7BoldValues.lowerValues%5Baxis%5D%3Dthis.m_bounds%5Baxis%5D%5Bproxy.lowerBounds%5Baxis%5D%5D.value%3BoldValues.upperValues%5Baxis%5D%3Dthis.m_bounds%5Baxis%5D%5Bproxy.upperBounds%5Baxis%5D%5D.value%3B%7D%0A%09%09%09for(axis%3D0%3Baxis<2%3B%2B%2Baxis)%0A%09%09%09%7Bvar bounds%3Dthis.m_bounds%5Baxis%5D%3Bvar lowerIndex%3Dproxy.lowerBounds%5Baxis%5D%3Bvar upperIndex%3Dproxy.upperBounds%5Baxis%5D%3Bvar lowerValue%3DnewValues.lowerValues%5Baxis%5D%3Bvar upperValue%3DnewValues.upperValues%5Baxis%5D%3Bvar deltaLower%3DlowerValue-bounds%5BlowerIndex%5D.value%3Bvar deltaUpper%3DupperValue-bounds%5BupperIndex%5D.value%3Bbounds%5BlowerIndex%5D.value%3DlowerValue%3Bbounds%5BupperIndex%5D.value%3DupperValue%3Bif(deltaLower<0)%0A%09%09%09%7Bindex%3DlowerIndex%3Bwhile(index>0%26%26lowerValue<bounds%5Bindex-1%5D.value)%0A%09%09%09%7Bbound%3Dbounds%5Bindex%5D%3BprevBound%3Dbounds%5Bindex-1%5D%3Bvar prevProxyId%3DprevBound.proxyId%3Bvar prevProxy%3Dthis.m_proxyPool%5BprevBound.proxyId%5D%3BprevBound.stabbingCount%2B%2B%3Bif(prevBound.IsUpper()%3D%3Dtrue)%0A%09%09%09%7Bif(this.TestOverlap(newValues%2CprevProxy))%0A%09%09%09%7Bthis.m_pairManager.AddBufferedPair(proxyId%2CprevProxyId)%3B%7D%0A%09%09%09prevProxy.upperBounds%5Baxis%5D%2B%2B%3Bbound.stabbingCount%2B%2B%3B%7D%0A%09%09%09else%0A%09%09%09%7BprevProxy.lowerBounds%5Baxis%5D%2B%2B%3Bbound.stabbingCount--%3B%7D%0A%09%09%09proxy.lowerBounds%5Baxis%5D--%3Bbound.Swap(prevBound)%3B--index%3B%7D%7D%0A%09%09%09if(deltaUpper>0)%0A%09%09%09%7Bindex%3DupperIndex%3Bwhile(index<boundCount-1%26%26bounds%5Bindex%2B1%5D.value<%3DupperValue)%0A%09%09%09%7Bbound%3Dbounds%5Bindex%5D%3BnextBound%3Dbounds%5Bindex%2B1%5D%3BnextProxyId%3DnextBound.proxyId%3BnextProxy%3Dthis.m_proxyPool%5BnextProxyId%5D%3BnextBound.stabbingCount%2B%2B%3Bif(nextBound.IsLower()%3D%3Dtrue)%0A%09%09%09%7Bif(this.TestOverlap(newValues%2CnextProxy))%0A%09%09%09%7Bthis.m_pairManager.AddBufferedPair(proxyId%2CnextProxyId)%3B%7D%0A%09%09%09nextProxy.lowerBounds%5Baxis%5D--%3Bbound.stabbingCount%2B%2B%3B%7D%0A%09%09%09else%0A%09%09%09%7BnextProxy.upperBounds%5Baxis%5D--%3Bbound.stabbingCount--%3B%7D%0A%09%09%09proxy.upperBounds%5Baxis%5D%2B%2B%3Bbound.Swap(nextBound)%3Bindex%2B%2B%3B%7D%7D%0A%09%09%09if(deltaLower>0)%0A%09%09%09%7Bindex%3DlowerIndex%3Bwhile(index<boundCount-1%26%26bounds%5Bindex%2B1%5D.value<%3DlowerValue)%0A%09%09%09%7Bbound%3Dbounds%5Bindex%5D%3BnextBound%3Dbounds%5Bindex%2B1%5D%3BnextProxyId%3DnextBound.proxyId%3BnextProxy%3Dthis.m_proxyPool%5BnextProxyId%5D%3BnextBound.stabbingCount--%3Bif(nextBound.IsUpper())%0A%09%09%09%7Bif(this.TestOverlap(oldValues%2CnextProxy))%0A%09%09%09%7Bthis.m_pairManager.RemoveBufferedPair(proxyId%2CnextProxyId)%3B%7D%0A%09%09%09nextProxy.upperBounds%5Baxis%5D--%3Bbound.stabbingCount--%3B%7D%0A%09%09%09else%0A%09%09%09%7BnextProxy.lowerBounds%5Baxis%5D--%3Bbound.stabbingCount%2B%2B%3B%7D%0A%09%09%09proxy.lowerBounds%5Baxis%5D%2B%2B%3Bbound.Swap(nextBound)%3Bindex%2B%2B%3B%7D%7D%0A%09%09%09if(deltaUpper<0)%0A%09%09%09%7Bindex%3DupperIndex%3Bwhile(index>0%26%26upperValue<bounds%5Bindex-1%5D.value)%0A%09%09%09%7Bbound%3Dbounds%5Bindex%5D%3BprevBound%3Dbounds%5Bindex-1%5D%3BprevProxyId%3DprevBound.proxyId%3BprevProxy%3Dthis.m_proxyPool%5BprevProxyId%5D%3BprevBound.stabbingCount--%3Bif(prevBound.IsLower()%3D%3Dtrue)%0A%09%09%09%7Bif(this.TestOverlap(oldValues%2CprevProxy))%0A%09%09%09%7Bthis.m_pairManager.RemoveBufferedPair(proxyId%2CprevProxyId)%3B%7D%0A%09%09%09prevProxy.lowerBounds%5Baxis%5D%2B%2B%3Bbound.stabbingCount--%3B%7D%0A%09%09%09else%0A%09%09%09%7BprevProxy.upperBounds%5Baxis%5D%2B%2B%3Bbound.stabbingCount%2B%2B%3B%7D%0A%09%09%09proxy.upperBounds%5Baxis%5D--%3Bbound.Swap(prevBound)%3Bindex--%3B%7D%7D%7D%7D%2CCommit%3Afunction()%7Bthis.m_pairManager.Commit()%3B%7D%2CQueryAABB%3Afunction(aabb%2CuserData%2CmaxCount)%7Bvar lowerValues%3Dnew Array()%3Bvar upperValues%3Dnew Array()%3Bthis.ComputeBounds(lowerValues%2CupperValues%2Caabb)%3Bvar lowerIndex%3D0%3Bvar upperIndex%3D0%3Bvar lowerIndexOut%3D%5BlowerIndex%5D%3Bvar upperIndexOut%3D%5BupperIndex%5D%3Bthis.Query(lowerIndexOut%2CupperIndexOut%2ClowerValues%5B0%5D%2CupperValues%5B0%5D%2Cthis.m_bounds%5B0%5D%2C2*this.m_proxyCount%2C0)%3Bthis.Query(lowerIndexOut%2CupperIndexOut%2ClowerValues%5B1%5D%2CupperValues%5B1%5D%2Cthis.m_bounds%5B1%5D%2C2*this.m_proxyCount%2C1)%3Bvar count%3D0%3Bfor(var i%3D0%3Bi<this.m_queryResultCount%26%26count<maxCount%3B%2B%2Bi%2C%2B%2Bcount)%0A%09%09%09%7Bvar proxy%3Dthis.m_proxyPool%5Bthis.m_queryResults%5Bi%5D%5D%3BuserData%5Bi%5D%3Dproxy.userData%3B%7D%0A%09%09%09this.m_queryResultCount%3D0%3Bthis.IncrementTimeStamp()%3Breturn count%3B%7D%2CValidate%3Afunction()%7Bvar pair%3Bvar proxy1%3Bvar proxy2%3Bvar overlap%3Bfor(var axis%3D0%3Baxis<2%3B%2B%2Baxis)%0A%09%09%09%7Bvar bounds%3Dthis.m_bounds%5Baxis%5D%3Bvar boundCount%3D2*this.m_proxyCount%3Bvar stabbingCount%3D0%3Bfor(var i%3D0%3Bi<boundCount%3B%2B%2Bi)%0A%09%09%09%7Bvar bound%3Dbounds%5Bi%5D%3Bif(bound.IsLower()%3D%3Dtrue)%0A%09%09%09%7BstabbingCount%2B%2B%3B%7D%0A%09%09%09else%0A%09%09%09%7BstabbingCount--%3B%7D%7D%7D%7D%2CComputeBounds%3Afunction(lowerValues%2CupperValues%2Caabb)%0A%09%09%09%7Bvar minVertexX%3Daabb.minVertex.x%3Bvar minVertexY%3Daabb.minVertex.y%3BminVertexX%3Db2Math.b2Min(minVertexX%2Cthis.m_worldAABB.maxVertex.x)%3BminVertexY%3Db2Math.b2Min(minVertexY%2Cthis.m_worldAABB.maxVertex.y)%3BminVertexX%3Db2Math.b2Max(minVertexX%2Cthis.m_worldAABB.minVertex.x)%3BminVertexY%3Db2Math.b2Max(minVertexY%2Cthis.m_worldAABB.minVertex.y)%3Bvar maxVertexX%3Daabb.maxVertex.x%3Bvar maxVertexY%3Daabb.maxVertex.y%3BmaxVertexX%3Db2Math.b2Min(maxVertexX%2Cthis.m_worldAABB.maxVertex.x)%3BmaxVertexY%3Db2Math.b2Min(maxVertexY%2Cthis.m_worldAABB.maxVertex.y)%3BmaxVertexX%3Db2Math.b2Max(maxVertexX%2Cthis.m_worldAABB.minVertex.x)%3BmaxVertexY%3Db2Math.b2Max(maxVertexY%2Cthis.m_worldAABB.minVertex.y)%3BlowerValues%5B0%5D%3D(this.m_quantizationFactor.x*(minVertexX-this.m_worldAABB.minVertex.x))%26(b2Settings.USHRT_MAX-1)%3BupperValues%5B0%5D%3D((this.m_quantizationFactor.x*(maxVertexX-this.m_worldAABB.minVertex.x))%260x0000ffff)%7C1%3BlowerValues%5B1%5D%3D(this.m_quantizationFactor.y*(minVertexY-this.m_worldAABB.minVertex.y))%26(b2Settings.USHRT_MAX-1)%3BupperValues%5B1%5D%3D((this.m_quantizationFactor.y*(maxVertexY-this.m_worldAABB.minVertex.y))%260x0000ffff)%7C1%3B%7D%2CTestOverlapValidate%3Afunction(p1%2Cp2)%7Bfor(var axis%3D0%3Baxis<2%3B%2B%2Baxis)%0A%09%09%09%7Bvar bounds%3Dthis.m_bounds%5Baxis%5D%3Bif(bounds%5Bp1.lowerBounds%5Baxis%5D%5D.value>bounds%5Bp2.upperBounds%5Baxis%5D%5D.value)%0A%09%09%09return false%3Bif(bounds%5Bp1.upperBounds%5Baxis%5D%5D.value<bounds%5Bp2.lowerBounds%5Baxis%5D%5D.value)%0A%09%09%09return false%3B%7D%0A%09%09%09return true%3B%7D%2CTestOverlap%3Afunction(b%2Cp)%0A%09%09%09%7Bfor(var axis%3D0%3Baxis<2%3B%2B%2Baxis)%0A%09%09%09%7Bvar bounds%3Dthis.m_bounds%5Baxis%5D%3Bif(b.lowerValues%5Baxis%5D>bounds%5Bp.upperBounds%5Baxis%5D%5D.value)%0A%09%09%09return false%3Bif(b.upperValues%5Baxis%5D<bounds%5Bp.lowerBounds%5Baxis%5D%5D.value)%0A%09%09%09return false%3B%7D%0A%09%09%09return true%3B%7D%2CQuery%3Afunction(lowerQueryOut%2CupperQueryOut%2ClowerValue%2CupperValue%2Cbounds%2CboundCount%2Caxis)%7Bvar lowerQuery%3Db2BroadPhase.BinarySearch(bounds%2CboundCount%2ClowerValue)%3Bvar upperQuery%3Db2BroadPhase.BinarySearch(bounds%2CboundCount%2CupperValue)%3Bfor(var j%3DlowerQuery%3Bj<upperQuery%3B%2B%2Bj)%0A%09%09%09%7Bif(bounds%5Bj%5D.IsLower())%0A%09%09%09%7Bthis.IncrementOverlapCount(bounds%5Bj%5D.proxyId)%3B%7D%7D%0A%09%09%09if(lowerQuery>0)%0A%09%09%09%7Bvar i%3DlowerQuery-1%3Bvar s%3Dbounds%5Bi%5D.stabbingCount%3Bwhile(s)%0A%09%09%09%7Bif(bounds%5Bi%5D.IsLower())%0A%09%09%09%7Bvar proxy%3Dthis.m_proxyPool%5Bbounds%5Bi%5D.proxyId%5D%3Bif(lowerQuery<%3Dproxy.upperBounds%5Baxis%5D)%0A%09%09%09%7Bthis.IncrementOverlapCount(bounds%5Bi%5D.proxyId)%3B--s%3B%7D%7D%0A%09%09%09--i%3B%7D%7D%0A%09%09%09lowerQueryOut%5B0%5D%3DlowerQuery%3BupperQueryOut%5B0%5D%3DupperQuery%3B%7D%2CIncrementOverlapCount%3Afunction(proxyId)%7Bvar proxy%3Dthis.m_proxyPool%5BproxyId%5D%3Bif(proxy.timeStamp<this.m_timeStamp)%0A%09%09%09%7Bproxy.timeStamp%3Dthis.m_timeStamp%3Bproxy.overlapCount%3D1%3B%7D%0A%09%09%09else%0A%09%09%09%7Bproxy.overlapCount%3D2%3Bthis.m_queryResults%5Bthis.m_queryResultCount%5D%3DproxyId%3B%2B%2Bthis.m_queryResultCount%3B%7D%7D%2CIncrementTimeStamp%3Afunction()%7Bif(this.m_timeStamp%3D%3Db2Settings.USHRT_MAX)%0A%09%09%09%7Bfor(var i%3D0%3Bi<b2Settings.b2_maxProxies%3B%2B%2Bi)%0A%09%09%09%7Bthis.m_proxyPool%5Bi%5D.timeStamp%3D0%3B%7D%0A%09%09%09this.m_timeStamp%3D1%3B%7D%0A%09%09%09else%0A%09%09%09%7B%2B%2Bthis.m_timeStamp%3B%7D%7D%2Cm_pairManager%3Anew b2PairManager()%2Cm_proxyPool%3Anew Array(b2Settings.b2_maxPairs)%2Cm_freeProxy%3A0%2Cm_bounds%3Anew Array(2*b2Settings.b2_maxProxies)%2Cm_queryResults%3Anew Array(b2Settings.b2_maxProxies)%2Cm_queryResultCount%3A0%2Cm_worldAABB%3Anull%2Cm_quantizationFactor%3Anew b2Vec2()%2Cm_proxyCount%3A0%2Cm_timeStamp%3A0%7D%3Bb2BroadPhase.s_validate%3Dfalse%3Bb2BroadPhase.b2_invalid%3Db2Settings.USHRT_MAX%3Bb2BroadPhase.b2_nullEdge%3Db2Settings.USHRT_MAX%3Bb2BroadPhase.BinarySearch%3Dfunction(bounds%2Ccount%2Cvalue)%0A%09%09%09%7Bvar low%3D0%3Bvar high%3Dcount-1%3Bwhile(low<%3Dhigh)%0A%09%09%09%7Bvar mid%3DMath.floor((low%2Bhigh)%2F2)%3Bif(bounds%5Bmid%5D.value>value)%0A%09%09%09%7Bhigh%3Dmid-1%3B%7D%0A%09%09%09else if(bounds%5Bmid%5D.value<value)%0A%09%09%09%7Blow%3Dmid%2B1%3B%7D%0A%09%09%09else%0A%09%09%09%7Breturn(mid)%3B%7D%7D%0A%09%09%09return(low)%3B%7D%3B%0A%09%09%09var b2Collision%3DClass.create()%3Bb2Collision.prototype%3D%7Binitialize%3Afunction()%7B%7D%7D%0A%09%09%09b2Collision.b2_nullFeature%3D0x000000ff%3Bb2Collision.ClipSegmentToLine%3Dfunction(vOut%2CvIn%2Cnormal%2Coffset)%0A%09%09%09%7Bvar numOut%3D0%3Bvar vIn0%3DvIn%5B0%5D.v%3Bvar vIn1%3DvIn%5B1%5D.v%3Bvar distance0%3Db2Math.b2Dot(normal%2CvIn%5B0%5D.v)-offset%3Bvar distance1%3Db2Math.b2Dot(normal%2CvIn%5B1%5D.v)-offset%3Bif(distance0<%3D0.0)vOut%5BnumOut%2B%2B%5D%3DvIn%5B0%5D%3Bif(distance1<%3D0.0)vOut%5BnumOut%2B%2B%5D%3DvIn%5B1%5D%3Bif(distance0*distance1<0.0)%0A%09%09%09%7Bvar interp%3Ddistance0%2F(distance0-distance1)%3Bvar tVec%3DvOut%5BnumOut%5D.v%3BtVec.x%3DvIn0.x%2Binterp*(vIn1.x-vIn0.x)%3BtVec.y%3DvIn0.y%2Binterp*(vIn1.y-vIn0.y)%3Bif(distance0>0.0)%0A%09%09%09%7BvOut%5BnumOut%5D.id%3DvIn%5B0%5D.id%3B%7D%0A%09%09%09else%0A%09%09%09%7BvOut%5BnumOut%5D.id%3DvIn%5B1%5D.id%3B%7D%0A%09%09%09%2B%2BnumOut%3B%7D%0A%09%09%09return numOut%3B%7D%3Bb2Collision.EdgeSeparation%3Dfunction(poly1%2Cedge1%2Cpoly2)%0A%09%09%09%7Bvar vert1s%3Dpoly1.m_vertices%3Bvar count2%3Dpoly2.m_vertexCount%3Bvar vert2s%3Dpoly2.m_vertices%3Bvar normalX%3Dpoly1.m_normals%5Bedge1%5D.x%3Bvar normalY%3Dpoly1.m_normals%5Bedge1%5D.y%3Bvar tX%3DnormalX%3Bvar tMat%3Dpoly1.m_R%3BnormalX%3DtMat.col1.x*tX%2BtMat.col2.x*normalY%3BnormalY%3DtMat.col1.y*tX%2BtMat.col2.y*normalY%3Bvar normalLocal2X%3DnormalX%3Bvar normalLocal2Y%3DnormalY%3BtMat%3Dpoly2.m_R%3BtX%3DnormalLocal2X*tMat.col1.x%2BnormalLocal2Y*tMat.col1.y%3BnormalLocal2Y%3DnormalLocal2X*tMat.col2.x%2BnormalLocal2Y*tMat.col2.y%3BnormalLocal2X%3DtX%3Bvar vertexIndex2%3D0%3Bvar minDot%3DNumber.MAX_VALUE%3Bfor(var i%3D0%3Bi<count2%3B%2B%2Bi)%0A%09%09%09%7Bvar tVec%3Dvert2s%5Bi%5D%3Bvar dot%3DtVec.x*normalLocal2X%2BtVec.y*normalLocal2Y%3Bif(dot<minDot)%0A%09%09%09%7BminDot%3Ddot%3BvertexIndex2%3Di%3B%7D%7D%0A%09%09%09tMat%3Dpoly1.m_R%3Bvar v1X%3Dpoly1.m_position.x%2B(tMat.col1.x*vert1s%5Bedge1%5D.x%2BtMat.col2.x*vert1s%5Bedge1%5D.y)%0A%09%09%09var v1Y%3Dpoly1.m_position.y%2B(tMat.col1.y*vert1s%5Bedge1%5D.x%2BtMat.col2.y*vert1s%5Bedge1%5D.y)%0A%09%09%09tMat%3Dpoly2.m_R%3Bvar v2X%3Dpoly2.m_position.x%2B(tMat.col1.x*vert2s%5BvertexIndex2%5D.x%2BtMat.col2.x*vert2s%5BvertexIndex2%5D.y)%0A%09%09%09var v2Y%3Dpoly2.m_position.y%2B(tMat.col1.y*vert2s%5BvertexIndex2%5D.x%2BtMat.col2.y*vert2s%5BvertexIndex2%5D.y)%0A%09%09%09v2X-%3Dv1X%3Bv2Y-%3Dv1Y%3Bvar separation%3Dv2X*normalX%2Bv2Y*normalY%3Breturn separation%3B%7D%3Bb2Collision.FindMaxSeparation%3Dfunction(edgeIndex%2Cpoly1%2Cpoly2%2Cconservative)%0A%09%09%09%7Bvar count1%3Dpoly1.m_vertexCount%3Bvar dX%3Dpoly2.m_position.x-poly1.m_position.x%3Bvar dY%3Dpoly2.m_position.y-poly1.m_position.y%3Bvar dLocal1X%3D(dX*poly1.m_R.col1.x%2BdY*poly1.m_R.col1.y)%3Bvar dLocal1Y%3D(dX*poly1.m_R.col2.x%2BdY*poly1.m_R.col2.y)%3Bvar edge%3D0%3Bvar maxDot%3D-Number.MAX_VALUE%3Bfor(var i%3D0%3Bi<count1%3B%2B%2Bi)%0A%09%09%09%7Bvar dot%3D(poly1.m_normals%5Bi%5D.x*dLocal1X%2Bpoly1.m_normals%5Bi%5D.y*dLocal1Y)%3Bif(dot>maxDot)%0A%09%09%09%7BmaxDot%3Ddot%3Bedge%3Di%3B%7D%7D%0A%09%09%09var s%3Db2Collision.EdgeSeparation(poly1%2Cedge%2Cpoly2)%3Bif(s>0.0%26%26conservative%3D%3Dfalse)%0A%09%09%09%7Breturn s%3B%7D%0A%09%09%09var prevEdge%3Dedge-1>%3D0%3Fedge-1%3Acount1-1%3Bvar sPrev%3Db2Collision.EdgeSeparation(poly1%2CprevEdge%2Cpoly2)%3Bif(sPrev>0.0%26%26conservative%3D%3Dfalse)%0A%09%09%09%7Breturn sPrev%3B%7D%0A%09%09%09var nextEdge%3Dedge%2B1<count1%3Fedge%2B1%3A0%3Bvar sNext%3Db2Collision.EdgeSeparation(poly1%2CnextEdge%2Cpoly2)%3Bif(sNext>0.0%26%26conservative%3D%3Dfalse)%0A%09%09%09%7Breturn sNext%3B%7D%0A%09%09%09var bestEdge%3D0%3Bvar bestSeparation%3Bvar increment%3D0%3Bif(sPrev>s%26%26sPrev>sNext)%0A%09%09%09%7Bincrement%3D-1%3BbestEdge%3DprevEdge%3BbestSeparation%3DsPrev%3B%7D%0A%09%09%09else if(sNext>s)%0A%09%09%09%7Bincrement%3D1%3BbestEdge%3DnextEdge%3BbestSeparation%3DsNext%3B%7D%0A%09%09%09else%0A%09%09%09%7BedgeIndex%5B0%5D%3Dedge%3Breturn s%3B%7D%0A%09%09%09while(true)%0A%09%09%09%7Bif(increment%3D%3D-1)%0A%09%09%09edge%3DbestEdge-1>%3D0%3FbestEdge-1%3Acount1-1%3Belse%0A%09%09%09edge%3DbestEdge%2B1<count1%3FbestEdge%2B1%3A0%3Bs%3Db2Collision.EdgeSeparation(poly1%2Cedge%2Cpoly2)%3Bif(s>0.0%26%26conservative%3D%3Dfalse)%0A%09%09%09%7Breturn s%3B%7D%0A%09%09%09if(s>bestSeparation)%0A%09%09%09%7BbestEdge%3Dedge%3BbestSeparation%3Ds%3B%7D%0A%09%09%09else%0A%09%09%09%7Bbreak%3B%7D%7D%0A%09%09%09edgeIndex%5B0%5D%3DbestEdge%3Breturn bestSeparation%3B%7D%3Bb2Collision.FindIncidentEdge%3Dfunction(c%2Cpoly1%2Cedge1%2Cpoly2)%0A%09%09%09%7Bvar count1%3Dpoly1.m_vertexCount%3Bvar vert1s%3Dpoly1.m_vertices%3Bvar count2%3Dpoly2.m_vertexCount%3Bvar vert2s%3Dpoly2.m_vertices%3Bvar vertex11%3Dedge1%3Bvar vertex12%3Dedge1%2B1%3D%3Dcount1%3F0%3Aedge1%2B1%3Bvar tVec%3Dvert1s%5Bvertex12%5D%3Bvar normal1Local1X%3DtVec.x%3Bvar normal1Local1Y%3DtVec.y%3BtVec%3Dvert1s%5Bvertex11%5D%3Bnormal1Local1X-%3DtVec.x%3Bnormal1Local1Y-%3DtVec.y%3Bvar tX%3Dnormal1Local1X%3Bnormal1Local1X%3Dnormal1Local1Y%3Bnormal1Local1Y%3D-tX%3Bvar invLength%3D1.0%2FMath.sqrt(normal1Local1X*normal1Local1X%2Bnormal1Local1Y*normal1Local1Y)%3Bnormal1Local1X*%3DinvLength%3Bnormal1Local1Y*%3DinvLength%3Bvar normal1X%3Dnormal1Local1X%3Bvar normal1Y%3Dnormal1Local1Y%3BtX%3Dnormal1X%3Bvar tMat%3Dpoly1.m_R%3Bnormal1X%3DtMat.col1.x*tX%2BtMat.col2.x*normal1Y%3Bnormal1Y%3DtMat.col1.y*tX%2BtMat.col2.y*normal1Y%3Bvar normal1Local2X%3Dnormal1X%3Bvar normal1Local2Y%3Dnormal1Y%3BtMat%3Dpoly2.m_R%3BtX%3Dnormal1Local2X*tMat.col1.x%2Bnormal1Local2Y*tMat.col1.y%3Bnormal1Local2Y%3Dnormal1Local2X*tMat.col2.x%2Bnormal1Local2Y*tMat.col2.y%3Bnormal1Local2X%3DtX%3Bvar vertex21%3D0%3Bvar vertex22%3D0%3Bvar minDot%3DNumber.MAX_VALUE%3Bfor(var i%3D0%3Bi<count2%3B%2B%2Bi)%0A%09%09%09%7Bvar i1%3Di%3Bvar i2%3Di%2B1<count2%3Fi%2B1%3A0%3BtVec%3Dvert2s%5Bi2%5D%3Bvar normal2Local2X%3DtVec.x%3Bvar normal2Local2Y%3DtVec.y%3BtVec%3Dvert2s%5Bi1%5D%3Bnormal2Local2X-%3DtVec.x%3Bnormal2Local2Y-%3DtVec.y%3BtX%3Dnormal2Local2X%3Bnormal2Local2X%3Dnormal2Local2Y%3Bnormal2Local2Y%3D-tX%3BinvLength%3D1.0%2FMath.sqrt(normal2Local2X*normal2Local2X%2Bnormal2Local2Y*normal2Local2Y)%3Bnormal2Local2X*%3DinvLength%3Bnormal2Local2Y*%3DinvLength%3Bvar dot%3Dnormal2Local2X*normal1Local2X%2Bnormal2Local2Y*normal1Local2Y%3Bif(dot<minDot)%0A%09%09%09%7BminDot%3Ddot%3Bvertex21%3Di1%3Bvertex22%3Di2%3B%7D%7D%0A%09%09%09var tClip%3BtClip%3Dc%5B0%5D%3BtVec%3DtClip.v%3BtVec.SetV(vert2s%5Bvertex21%5D)%3BtVec.MulM(poly2.m_R)%3BtVec.Add(poly2.m_position)%3BtClip.id.features.referenceFace%3Dedge1%3BtClip.id.features.incidentEdge%3Dvertex21%3BtClip.id.features.incidentVertex%3Dvertex21%3BtClip%3Dc%5B1%5D%3BtVec%3DtClip.v%3BtVec.SetV(vert2s%5Bvertex22%5D)%3BtVec.MulM(poly2.m_R)%3BtVec.Add(poly2.m_position)%3BtClip.id.features.referenceFace%3Dedge1%3BtClip.id.features.incidentEdge%3Dvertex21%3BtClip.id.features.incidentVertex%3Dvertex22%3B%7D%3Bb2Collision.b2CollidePolyTempVec%3Dnew b2Vec2()%3Bb2Collision.b2CollidePoly%3Dfunction(manifold%2CpolyA%2CpolyB%2Cconservative)%0A%09%09%09%7Bmanifold.pointCount%3D0%3Bvar edgeA%3D0%3Bvar edgeAOut%3D%5BedgeA%5D%3Bvar separationA%3Db2Collision.FindMaxSeparation(edgeAOut%2CpolyA%2CpolyB%2Cconservative)%3BedgeA%3DedgeAOut%5B0%5D%3Bif(separationA>0.0%26%26conservative%3D%3Dfalse)%0A%09%09%09return%3Bvar edgeB%3D0%3Bvar edgeBOut%3D%5BedgeB%5D%3Bvar separationB%3Db2Collision.FindMaxSeparation(edgeBOut%2CpolyB%2CpolyA%2Cconservative)%3BedgeB%3DedgeBOut%5B0%5D%3Bif(separationB>0.0%26%26conservative%3D%3Dfalse)%0A%09%09%09return%3Bvar poly1%3Bvar poly2%3Bvar edge1%3D0%3Bvar flip%3D0%3Bvar k_relativeTol%3D0.98%3Bvar k_absoluteTol%3D0.001%3Bif(separationB>k_relativeTol*separationA%2Bk_absoluteTol)%0A%09%09%09%7Bpoly1%3DpolyB%3Bpoly2%3DpolyA%3Bedge1%3DedgeB%3Bflip%3D1%3B%7D%0A%09%09%09else%0A%09%09%09%7Bpoly1%3DpolyA%3Bpoly2%3DpolyB%3Bedge1%3DedgeA%3Bflip%3D0%3B%7D%0A%09%09%09var incidentEdge%3D%5Bnew ClipVertex()%2Cnew ClipVertex()%5D%3Bb2Collision.FindIncidentEdge(incidentEdge%2Cpoly1%2Cedge1%2Cpoly2)%3Bvar count1%3Dpoly1.m_vertexCount%3Bvar vert1s%3Dpoly1.m_vertices%3Bvar v11%3Dvert1s%5Bedge1%5D%3Bvar v12%3Dedge1%2B1<count1%3Fvert1s%5Bedge1%2B1%5D%3Avert1s%5B0%5D%3Bvar dvX%3Dv12.x-v11.x%3Bvar dvY%3Dv12.y-v11.y%3Bvar sideNormalX%3Dv12.x-v11.x%3Bvar sideNormalY%3Dv12.y-v11.y%3Bvar tX%3DsideNormalX%3Bvar tMat%3Dpoly1.m_R%3BsideNormalX%3DtMat.col1.x*tX%2BtMat.col2.x*sideNormalY%3BsideNormalY%3DtMat.col1.y*tX%2BtMat.col2.y*sideNormalY%3Bvar invLength%3D1.0%2FMath.sqrt(sideNormalX*sideNormalX%2BsideNormalY*sideNormalY)%3BsideNormalX*%3DinvLength%3BsideNormalY*%3DinvLength%3Bvar frontNormalX%3DsideNormalX%3Bvar frontNormalY%3DsideNormalY%3BtX%3DfrontNormalX%3BfrontNormalX%3DfrontNormalY%3BfrontNormalY%3D-tX%3Bvar v11X%3Dv11.x%3Bvar v11Y%3Dv11.y%3BtX%3Dv11X%3BtMat%3Dpoly1.m_R%3Bv11X%3DtMat.col1.x*tX%2BtMat.col2.x*v11Y%3Bv11Y%3DtMat.col1.y*tX%2BtMat.col2.y*v11Y%3Bv11X%2B%3Dpoly1.m_position.x%3Bv11Y%2B%3Dpoly1.m_position.y%3Bvar v12X%3Dv12.x%3Bvar v12Y%3Dv12.y%3BtX%3Dv12X%3BtMat%3Dpoly1.m_R%3Bv12X%3DtMat.col1.x*tX%2BtMat.col2.x*v12Y%3Bv12Y%3DtMat.col1.y*tX%2BtMat.col2.y*v12Y%3Bv12X%2B%3Dpoly1.m_position.x%3Bv12Y%2B%3Dpoly1.m_position.y%3Bvar frontOffset%3DfrontNormalX*v11X%2BfrontNormalY*v11Y%3Bvar sideOffset1%3D-(sideNormalX*v11X%2BsideNormalY*v11Y)%3Bvar sideOffset2%3DsideNormalX*v12X%2BsideNormalY*v12Y%3Bvar clipPoints1%3D%5Bnew ClipVertex()%2Cnew ClipVertex()%5D%3Bvar clipPoints2%3D%5Bnew ClipVertex()%2Cnew ClipVertex()%5D%3Bvar np%3D0%3Bb2Collision.b2CollidePolyTempVec.Set(-sideNormalX%2C-sideNormalY)%3Bnp%3Db2Collision.ClipSegmentToLine(clipPoints1%2CincidentEdge%2Cb2Collision.b2CollidePolyTempVec%2CsideOffset1)%3Bif(np<2)%0A%09%09%09return%3Bb2Collision.b2CollidePolyTempVec.Set(sideNormalX%2CsideNormalY)%3Bnp%3Db2Collision.ClipSegmentToLine(clipPoints2%2CclipPoints1%2Cb2Collision.b2CollidePolyTempVec%2CsideOffset2)%3Bif(np<2)%0A%09%09%09return%3Bif(flip)%7Bmanifold.normal.Set(-frontNormalX%2C-frontNormalY)%3B%7D%0A%09%09%09else%7Bmanifold.normal.Set(frontNormalX%2CfrontNormalY)%3B%7D%0A%09%09%09var pointCount%3D0%3Bfor(var i%3D0%3Bi<b2Settings.b2_maxManifoldPoints%3B%2B%2Bi)%0A%09%09%09%7Bvar tVec%3DclipPoints2%5Bi%5D.v%3Bvar separation%3D(frontNormalX*tVec.x%2BfrontNormalY*tVec.y)-frontOffset%3Bif(separation<%3D0.0%7C%7Cconservative%3D%3Dtrue)%0A%09%09%09%7Bvar cp%3Dmanifold.points%5BpointCount%5D%3Bcp.separation%3Dseparation%3Bcp.position.SetV(clipPoints2%5Bi%5D.v)%3Bcp.id.Set(clipPoints2%5Bi%5D.id)%3Bcp.id.features.flip%3Dflip%3B%2B%2BpointCount%3B%7D%7D%0A%09%09%09manifold.pointCount%3DpointCount%3B%7D%3Bb2Collision.b2CollideCircle%3Dfunction(manifold%2Ccircle1%2Ccircle2%2Cconservative)%0A%09%09%09%7Bmanifold.pointCount%3D0%3Bvar dX%3Dcircle2.m_position.x-circle1.m_position.x%3Bvar dY%3Dcircle2.m_position.y-circle1.m_position.y%3Bvar distSqr%3DdX*dX%2BdY*dY%3Bvar radiusSum%3Dcircle1.m_radius%2Bcircle2.m_radius%3Bif(distSqr>radiusSum*radiusSum%26%26conservative%3D%3Dfalse)%0A%09%09%09%7Breturn%3B%7D%0A%09%09%09var separation%3Bif(distSqr<Number.MIN_VALUE)%0A%09%09%09%7Bseparation%3D-radiusSum%3Bmanifold.normal.Set(0.0%2C1.0)%3B%7D%0A%09%09%09else%0A%09%09%09%7Bvar dist%3DMath.sqrt(distSqr)%3Bseparation%3Ddist-radiusSum%3Bvar a%3D1.0%2Fdist%3Bmanifold.normal.x%3Da*dX%3Bmanifold.normal.y%3Da*dY%3B%7D%0A%09%09%09manifold.pointCount%3D1%3Bvar tPoint%3Dmanifold.points%5B0%5D%3BtPoint.id.set_key(0)%3BtPoint.separation%3Dseparation%3BtPoint.position.x%3Dcircle2.m_position.x-(circle2.m_radius*manifold.normal.x)%3BtPoint.position.y%3Dcircle2.m_position.y-(circle2.m_radius*manifold.normal.y)%3B%7D%3Bb2Collision.b2CollidePolyAndCircle%3Dfunction(manifold%2Cpoly%2Ccircle%2Cconservative)%0A%09%09%09%7Bmanifold.pointCount%3D0%3Bvar tPoint%3Bvar dX%3Bvar dY%3Bvar xLocalX%3Dcircle.m_position.x-poly.m_position.x%3Bvar xLocalY%3Dcircle.m_position.y-poly.m_position.y%3Bvar tMat%3Dpoly.m_R%3Bvar tX%3DxLocalX*tMat.col1.x%2BxLocalY*tMat.col1.y%3BxLocalY%3DxLocalX*tMat.col2.x%2BxLocalY*tMat.col2.y%3BxLocalX%3DtX%3Bvar dist%3Bvar normalIndex%3D0%3Bvar separation%3D-Number.MAX_VALUE%3Bvar radius%3Dcircle.m_radius%3Bfor(var i%3D0%3Bi<poly.m_vertexCount%3B%2B%2Bi)%0A%09%09%09%7Bvar s%3Dpoly.m_normals%5Bi%5D.x*(xLocalX-poly.m_vertices%5Bi%5D.x)%2Bpoly.m_normals%5Bi%5D.y*(xLocalY-poly.m_vertices%5Bi%5D.y)%3Bif(s>radius)%0A%09%09%09%7Breturn%3B%7D%0A%09%09%09if(s>separation)%0A%09%09%09%7Bseparation%3Ds%3BnormalIndex%3Di%3B%7D%7D%0A%09%09%09if(separation<Number.MIN_VALUE)%0A%09%09%09%7Bmanifold.pointCount%3D1%3Bvar tVec%3Dpoly.m_normals%5BnormalIndex%5D%3Bmanifold.normal.x%3DtMat.col1.x*tVec.x%2BtMat.col2.x*tVec.y%3Bmanifold.normal.y%3DtMat.col1.y*tVec.x%2BtMat.col2.y*tVec.y%3BtPoint%3Dmanifold.points%5B0%5D%3BtPoint.id.features.incidentEdge%3DnormalIndex%3BtPoint.id.features.incidentVertex%3Db2Collision.b2_nullFeature%3BtPoint.id.features.referenceFace%3Db2Collision.b2_nullFeature%3BtPoint.id.features.flip%3D0%3BtPoint.position.x%3Dcircle.m_position.x-radius*manifold.normal.x%3BtPoint.position.y%3Dcircle.m_position.y-radius*manifold.normal.y%3BtPoint.separation%3Dseparation-radius%3Breturn%3B%7D%0A%09%09%09var vertIndex1%3DnormalIndex%3Bvar vertIndex2%3DvertIndex1%2B1<poly.m_vertexCount%3FvertIndex1%2B1%3A0%3Bvar eX%3Dpoly.m_vertices%5BvertIndex2%5D.x-poly.m_vertices%5BvertIndex1%5D.x%3Bvar eY%3Dpoly.m_vertices%5BvertIndex2%5D.y-poly.m_vertices%5BvertIndex1%5D.y%3Bvar length%3DMath.sqrt(eX*eX%2BeY*eY)%3BeX%2F%3Dlength%3BeY%2F%3Dlength%3Bif(length<Number.MIN_VALUE)%0A%09%09%09%7BdX%3DxLocalX-poly.m_vertices%5BvertIndex1%5D.x%3BdY%3DxLocalY-poly.m_vertices%5BvertIndex1%5D.y%3Bdist%3DMath.sqrt(dX*dX%2BdY*dY)%3BdX%2F%3Ddist%3BdY%2F%3Ddist%3Bif(dist>radius)%0A%09%09%09%7Breturn%3B%7D%0A%09%09%09manifold.pointCount%3D1%3Bmanifold.normal.Set(tMat.col1.x*dX%2BtMat.col2.x*dY%2CtMat.col1.y*dX%2BtMat.col2.y*dY)%3BtPoint%3Dmanifold.points%5B0%5D%3BtPoint.id.features.incidentEdge%3Db2Collision.b2_nullFeature%3BtPoint.id.features.incidentVertex%3DvertIndex1%3BtPoint.id.features.referenceFace%3Db2Collision.b2_nullFeature%3BtPoint.id.features.flip%3D0%3BtPoint.position.x%3Dcircle.m_position.x-radius*manifold.normal.x%3BtPoint.position.y%3Dcircle.m_position.y-radius*manifold.normal.y%3BtPoint.separation%3Ddist-radius%3Breturn%3B%7D%0A%09%09%09var u%3D(xLocalX-poly.m_vertices%5BvertIndex1%5D.x)*eX%2B(xLocalY-poly.m_vertices%5BvertIndex1%5D.y)*eY%3BtPoint%3Dmanifold.points%5B0%5D%3BtPoint.id.features.incidentEdge%3Db2Collision.b2_nullFeature%3BtPoint.id.features.incidentVertex%3Db2Collision.b2_nullFeature%3BtPoint.id.features.referenceFace%3Db2Collision.b2_nullFeature%3BtPoint.id.features.flip%3D0%3Bvar pX%2CpY%3Bif(u<%3D0.0)%0A%09%09%09%7BpX%3Dpoly.m_vertices%5BvertIndex1%5D.x%3BpY%3Dpoly.m_vertices%5BvertIndex1%5D.y%3BtPoint.id.features.incidentVertex%3DvertIndex1%3B%7D%0A%09%09%09else if(u>%3Dlength)%0A%09%09%09%7BpX%3Dpoly.m_vertices%5BvertIndex2%5D.x%3BpY%3Dpoly.m_vertices%5BvertIndex2%5D.y%3BtPoint.id.features.incidentVertex%3DvertIndex2%3B%7D%0A%09%09%09else%0A%09%09%09%7BpX%3DeX*u%2Bpoly.m_vertices%5BvertIndex1%5D.x%3BpY%3DeY*u%2Bpoly.m_vertices%5BvertIndex1%5D.y%3BtPoint.id.features.incidentEdge%3DvertIndex1%3B%7D%0A%09%09%09dX%3DxLocalX-pX%3BdY%3DxLocalY-pY%3Bdist%3DMath.sqrt(dX*dX%2BdY*dY)%3BdX%2F%3Ddist%3BdY%2F%3Ddist%3Bif(dist>radius)%0A%09%09%09%7Breturn%3B%7D%0A%09%09%09manifold.pointCount%3D1%3Bmanifold.normal.Set(tMat.col1.x*dX%2BtMat.col2.x*dY%2CtMat.col1.y*dX%2BtMat.col2.y*dY)%3BtPoint.position.x%3Dcircle.m_position.x-radius*manifold.normal.x%3BtPoint.position.y%3Dcircle.m_position.y-radius*manifold.normal.y%3BtPoint.separation%3Ddist-radius%3B%7D%3Bb2Collision.b2TestOverlap%3Dfunction(a%2Cb)%0A%09%09%09%7Bvar t1%3Db.minVertex%3Bvar t2%3Da.maxVertex%3Bvar d1X%3Dt1.x-t2.x%3Bvar d1Y%3Dt1.y-t2.y%3Bt1%3Da.minVertex%3Bt2%3Db.maxVertex%3Bvar d2X%3Dt1.x-t2.x%3Bvar d2Y%3Dt1.y-t2.y%3Bif(d1X>0.0%7C%7Cd1Y>0.0)%0A%09%09%09return false%3Bif(d2X>0.0%7C%7Cd2Y>0.0)%0A%09%09%09return false%3Breturn true%3B%7D%3B%0A%09%09%09var Features%3DClass.create()%3BFeatures.prototype%3D%7Bset_referenceFace%3Afunction(value)%7Bthis._referenceFace%3Dvalue%3Bthis._m_id._key%3D(this._m_id._key%260xffffff00)%7C(this._referenceFace%260x000000ff)%7D%2Cget_referenceFace%3Afunction()%7Breturn this._referenceFace%3B%7D%2C_referenceFace%3A0%2Cset_incidentEdge%3Afunction(value)%7Bthis._incidentEdge%3Dvalue%3Bthis._m_id._key%3D(this._m_id._key%260xffff00ff)%7C((this._incidentEdge<<8)%260x0000ff00)%7D%2Cget_incidentEdge%3Afunction()%7Breturn this._incidentEdge%3B%7D%2C_incidentEdge%3A0%2Cset_incidentVertex%3Afunction(value)%7Bthis._incidentVertex%3Dvalue%3Bthis._m_id._key%3D(this._m_id._key%260xff00ffff)%7C((this._incidentVertex<<16)%260x00ff0000)%7D%2Cget_incidentVertex%3Afunction()%7Breturn this._incidentVertex%3B%7D%2C_incidentVertex%3A0%2Cset_flip%3Afunction(value)%7Bthis._flip%3Dvalue%3Bthis._m_id._key%3D(this._m_id._key%260x00ffffff)%7C((this._flip<<24)%260xff000000)%7D%2Cget_flip%3Afunction()%7Breturn this._flip%3B%7D%2C_flip%3A0%2C_m_id%3Anull%2Cinitialize%3Afunction()%7B%7D%7D%3B%0A%09%09%09var b2ContactID%3DClass.create()%3Bb2ContactID.prototype%3D%7Binitialize%3Afunction()%7Bthis.features%3Dnew Features()%3Bthis.features._m_id%3Dthis%3B%7D%2CSet%3Afunction(id)%7Bthis.set_key(id._key)%3B%7D%2CCopy%3Afunction()%7Bvar id%3Dnew b2ContactID()%3Bid.set_key(this._key)%3Breturn id%3B%7D%2Cget_key%3Afunction()%7Breturn this._key%3B%7D%2Cset_key%3Afunction(value)%7Bthis._key%3Dvalue%3Bthis.features._referenceFace%3Dthis._key%260x000000ff%3Bthis.features._incidentEdge%3D((this._key%260x0000ff00)>>8)%260x000000ff%3Bthis.features._incidentVertex%3D((this._key%260x00ff0000)>>16)%260x000000ff%3Bthis.features._flip%3D((this._key%260xff000000)>>24)%260x000000ff%3B%7D%2Cfeatures%3Anew Features()%2C_key%3A0%7D%3B%0A%09%09%09var b2ContactPoint%3DClass.create()%3Bb2ContactPoint.prototype%3D%7Bposition%3Anew b2Vec2()%2Cseparation%3Anull%2CnormalImpulse%3Anull%2CtangentImpulse%3Anull%2Cid%3Anew b2ContactID()%2Cinitialize%3Afunction()%7Bthis.position%3Dnew b2Vec2()%3Bthis.id%3Dnew b2ContactID()%3B%7D%7D%3Bvar b2Distance%3DClass.create()%3Bb2Distance.prototype%3D%7Binitialize%3Afunction()%7B%7D%7D%3Bb2Distance.ProcessTwo%3Dfunction(p1Out%2Cp2Out%2Cp1s%2Cp2s%2Cpoints)%0A%09%09%09%7Bvar rX%3D-points%5B1%5D.x%3Bvar rY%3D-points%5B1%5D.y%3Bvar dX%3Dpoints%5B0%5D.x-points%5B1%5D.x%3Bvar dY%3Dpoints%5B0%5D.y-points%5B1%5D.y%3Bvar length%3DMath.sqrt(dX*dX%2BdY*dY)%3BdX%2F%3Dlength%3BdY%2F%3Dlength%3Bvar lambda%3DrX*dX%2BrY*dY%3Bif(lambda<%3D0.0%7C%7Clength<Number.MIN_VALUE)%0A%09%09%09%7Bp1Out.SetV(p1s%5B1%5D)%3Bp2Out.SetV(p2s%5B1%5D)%3Bp1s%5B0%5D.SetV(p1s%5B1%5D)%3Bp2s%5B0%5D.SetV(p2s%5B1%5D)%3Bpoints%5B0%5D.SetV(points%5B1%5D)%3Breturn 1%3B%7D%0A%09%09%09lambda%2F%3Dlength%3Bp1Out.x%3Dp1s%5B1%5D.x%2Blambda*(p1s%5B0%5D.x-p1s%5B1%5D.x)%3Bp1Out.y%3Dp1s%5B1%5D.y%2Blambda*(p1s%5B0%5D.y-p1s%5B1%5D.y)%3Bp2Out.x%3Dp2s%5B1%5D.x%2Blambda*(p2s%5B0%5D.x-p2s%5B1%5D.x)%3Bp2Out.y%3Dp2s%5B1%5D.y%2Blambda*(p2s%5B0%5D.y-p2s%5B1%5D.y)%3Breturn 2%3B%7D%3Bb2Distance.ProcessThree%3Dfunction(p1Out%2Cp2Out%2Cp1s%2Cp2s%2Cpoints)%0A%09%09%09%7Bvar aX%3Dpoints%5B0%5D.x%3Bvar aY%3Dpoints%5B0%5D.y%3Bvar bX%3Dpoints%5B1%5D.x%3Bvar bY%3Dpoints%5B1%5D.y%3Bvar cX%3Dpoints%5B2%5D.x%3Bvar cY%3Dpoints%5B2%5D.y%3Bvar abX%3DbX-aX%3Bvar abY%3DbY-aY%3Bvar acX%3DcX-aX%3Bvar acY%3DcY-aY%3Bvar bcX%3DcX-bX%3Bvar bcY%3DcY-bY%3Bvar sn%3D-(aX*abX%2BaY*abY)%3Bvar sd%3D(bX*abX%2BbY*abY)%3Bvar tn%3D-(aX*acX%2BaY*acY)%3Bvar td%3D(cX*acX%2BcY*acY)%3Bvar un%3D-(bX*bcX%2BbY*bcY)%3Bvar ud%3D(cX*bcX%2BcY*bcY)%3Bif(td<%3D0.0%26%26ud<%3D0.0)%0A%09%09%09%7Bp1Out.SetV(p1s%5B2%5D)%3Bp2Out.SetV(p2s%5B2%5D)%3Bp1s%5B0%5D.SetV(p1s%5B2%5D)%3Bp2s%5B0%5D.SetV(p2s%5B2%5D)%3Bpoints%5B0%5D.SetV(points%5B2%5D)%3Breturn 1%3B%7D%0A%09%09%09var n%3DabX*acY-abY*acX%3Bvar vc%3Dn*(aX*bY-aY*bX)%3Bvar va%3Dn*(bX*cY-bY*cX)%3Bif(va<%3D0.0%26%26un>%3D0.0%26%26ud>%3D0.0)%0A%09%09%09%7Bvar lambda%3Dun%2F(un%2Bud)%3Bp1Out.x%3Dp1s%5B1%5D.x%2Blambda*(p1s%5B2%5D.x-p1s%5B1%5D.x)%3Bp1Out.y%3Dp1s%5B1%5D.y%2Blambda*(p1s%5B2%5D.y-p1s%5B1%5D.y)%3Bp2Out.x%3Dp2s%5B1%5D.x%2Blambda*(p2s%5B2%5D.x-p2s%5B1%5D.x)%3Bp2Out.y%3Dp2s%5B1%5D.y%2Blambda*(p2s%5B2%5D.y-p2s%5B1%5D.y)%3Bp1s%5B0%5D.SetV(p1s%5B2%5D)%3Bp2s%5B0%5D.SetV(p2s%5B2%5D)%3Bpoints%5B0%5D.SetV(points%5B2%5D)%3Breturn 2%3B%7D%0A%09%09%09var vb%3Dn*(cX*aY-cY*aX)%3Bif(vb<%3D0.0%26%26tn>%3D0.0%26%26td>%3D0.0)%0A%09%09%09%7Bvar lambda%3Dtn%2F(tn%2Btd)%3Bp1Out.x%3Dp1s%5B0%5D.x%2Blambda*(p1s%5B2%5D.x-p1s%5B0%5D.x)%3Bp1Out.y%3Dp1s%5B0%5D.y%2Blambda*(p1s%5B2%5D.y-p1s%5B0%5D.y)%3Bp2Out.x%3Dp2s%5B0%5D.x%2Blambda*(p2s%5B2%5D.x-p2s%5B0%5D.x)%3Bp2Out.y%3Dp2s%5B0%5D.y%2Blambda*(p2s%5B2%5D.y-p2s%5B0%5D.y)%3Bp1s%5B1%5D.SetV(p1s%5B2%5D)%3Bp2s%5B1%5D.SetV(p2s%5B2%5D)%3Bpoints%5B1%5D.SetV(points%5B2%5D)%3Breturn 2%3B%7D%0A%09%09%09var denom%3Dva%2Bvb%2Bvc%3Bdenom%3D1.0%2Fdenom%3Bvar u%3Dva*denom%3Bvar v%3Dvb*denom%3Bvar w%3D1.0-u-v%3Bp1Out.x%3Du*p1s%5B0%5D.x%2Bv*p1s%5B1%5D.x%2Bw*p1s%5B2%5D.x%3Bp1Out.y%3Du*p1s%5B0%5D.y%2Bv*p1s%5B1%5D.y%2Bw*p1s%5B2%5D.y%3Bp2Out.x%3Du*p2s%5B0%5D.x%2Bv*p2s%5B1%5D.x%2Bw*p2s%5B2%5D.x%3Bp2Out.y%3Du*p2s%5B0%5D.y%2Bv*p2s%5B1%5D.y%2Bw*p2s%5B2%5D.y%3Breturn 3%3B%7D%3Bb2Distance.InPoinsts%3Dfunction(w%2Cpoints%2CpointCount)%0A%09%09%09%7Bfor(var i%3D0%3Bi<pointCount%3B%2B%2Bi)%0A%09%09%09%7Bif(w.x%3D%3Dpoints%5Bi%5D.x%26%26w.y%3D%3Dpoints%5Bi%5D.y)%0A%09%09%09%7Breturn true%3B%7D%7D%0A%09%09%09return false%3B%7D%3Bb2Distance.Distance%3Dfunction(p1Out%2Cp2Out%2Cshape1%2Cshape2)%0A%09%09%09%7Bvar p1s%3Dnew Array(3)%3Bvar p2s%3Dnew Array(3)%3Bvar points%3Dnew Array(3)%3Bvar pointCount%3D0%3Bp1Out.SetV(shape1.m_position)%3Bp2Out.SetV(shape2.m_position)%3Bvar vSqr%3D0.0%3Bvar maxIterations%3D20%3Bfor(var iter%3D0%3Biter<maxIterations%3B%2B%2Biter)%0A%09%09%09%7Bvar vX%3Dp2Out.x-p1Out.x%3Bvar vY%3Dp2Out.y-p1Out.y%3Bvar w1%3Dshape1.Support(vX%2CvY)%3Bvar w2%3Dshape2.Support(-vX%2C-vY)%3BvSqr%3D(vX*vX%2BvY*vY)%3Bvar wX%3Dw2.x-w1.x%3Bvar wY%3Dw2.y-w1.y%3Bvar vw%3D(vX*wX%2BvY*wY)%3Bif(vSqr-b2Dot(vX*wX%2BvY*wY)<%3D0.01*vSqr)%0A%09%09%09%7Bif(pointCount%3D%3D0)%0A%09%09%09%7Bp1Out.SetV(w1)%3Bp2Out.SetV(w2)%3B%7D%0A%09%09%09b2Distance.g_GJK_Iterations%3Diter%3Breturn Math.sqrt(vSqr)%3B%7D%0A%09%09%09switch(pointCount)%0A%09%09%09%7Bcase 0%3Ap1s%5B0%5D.SetV(w1)%3Bp2s%5B0%5D.SetV(w2)%3Bpoints%5B0%5D%3Dw%3Bp1Out.SetV(p1s%5B0%5D)%3Bp2Out.SetV(p2s%5B0%5D)%3B%2B%2BpointCount%3Bbreak%3Bcase 1%3Ap1s%5B1%5D.SetV(w1)%3Bp2s%5B1%5D.SetV(w2)%3Bpoints%5B1%5D.x%3DwX%3Bpoints%5B1%5D.y%3DwY%3BpointCount%3Db2Distance.ProcessTwo(p1Out%2Cp2Out%2Cp1s%2Cp2s%2Cpoints)%3Bbreak%3Bcase 2%3Ap1s%5B2%5D.SetV(w1)%3Bp2s%5B2%5D.SetV(w2)%3Bpoints%5B2%5D.x%3DwX%3Bpoints%5B2%5D.y%3DwY%3BpointCount%3Db2Distance.ProcessThree(p1Out%2Cp2Out%2Cp1s%2Cp2s%2Cpoints)%3Bbreak%3B%7D%0A%09%09%09if(pointCount%3D%3D3)%0A%09%09%09%7Bb2Distance.g_GJK_Iterations%3Diter%3Breturn 0.0%3B%7D%0A%09%09%09var maxSqr%3D-Number.MAX_VALUE%3Bfor(var i%3D0%3Bi<pointCount%3B%2B%2Bi)%0A%09%09%09%7BmaxSqr%3Db2Math.b2Max(maxSqr%2C(points%5Bi%5D.x*points%5Bi%5D.x%2Bpoints%5Bi%5D.y*points%5Bi%5D.y))%3B%7D%0A%09%09%09if(pointCount%3D%3D3%7C%7CvSqr<%3D100.0*Number.MIN_VALUE*maxSqr)%0A%09%09%09%7Bb2Distance.g_GJK_Iterations%3Diter%3Breturn Math.sqrt(vSqr)%3B%7D%7D%0A%09%09%09b2Distance.g_GJK_Iterations%3DmaxIterations%3Breturn Math.sqrt(vSqr)%3B%7D%3Bb2Distance.g_GJK_Iterations%3D0%3B%0A%09%09%09var b2Manifold%3DClass.create()%3Bb2Manifold.prototype%3D%7Binitialize%3Afunction()%7Bthis.points%3Dnew Array(b2Settings.b2_maxManifoldPoints)%3Bfor(var i%3D0%3Bi<b2Settings.b2_maxManifoldPoints%3Bi%2B%2B)%7Bthis.points%5Bi%5D%3Dnew b2ContactPoint()%3B%7D%0A%09%09%09this.normal%3Dnew b2Vec2()%3B%7D%2Cpoints%3Anull%2Cnormal%3Anull%2CpointCount%3A0%7D%3B%0A%09%09%09var b2OBB%3DClass.create()%3Bb2OBB.prototype%3D%7BR%3Anew b2Mat22()%2Ccenter%3Anew b2Vec2()%2Cextents%3Anew b2Vec2()%2Cinitialize%3Afunction()%7Bthis.R%3Dnew b2Mat22()%3Bthis.center%3Dnew b2Vec2()%3Bthis.extents%3Dnew b2Vec2()%3B%7D%7D%3B%0A%09%09%09var b2Proxy%3DClass.create()%3Bb2Proxy.prototype%3D%7BGetNext%3Afunction()%7Breturn this.lowerBounds%5B0%5D%3B%7D%2CSetNext%3Afunction(next)%7Bthis.lowerBounds%5B0%5D%3Dnext%3B%7D%2CIsValid%3Afunction()%7Breturn this.overlapCount!%3Db2BroadPhase.b2_invalid%3B%7D%2ClowerBounds%3A%5B(0)%2C(0)%5D%2CupperBounds%3A%5B(0)%2C(0)%5D%2CoverlapCount%3A0%2CtimeStamp%3A0%2CuserData%3Anull%2Cinitialize%3Afunction()%7Bthis.lowerBounds%3D%5B(0)%2C(0)%5D%3Bthis.upperBounds%3D%5B(0)%2C(0)%5D%3B%7D%7D%0A%09%09%09%0A%09%09%09var ClipVertex%3DClass.create()%3BClipVertex.prototype%3D%7Bv%3Anew b2Vec2()%2Cid%3Anew b2ContactID()%2Cinitialize%3Afunction()%7Bthis.v%3Dnew b2Vec2()%3Bthis.id%3Dnew b2ContactID()%3B%7D%7D%3Bvar b2Shape%3DClass.create()%3Bb2Shape.prototype%3D%7BTestPoint%3Afunction(p)%7Breturn false%7D%2CGetUserData%3Afunction()%7Breturn this.m_userData%3B%7D%2CGetType%3Afunction()%7Breturn this.m_type%3B%7D%2CGetBody%3Afunction()%7Breturn this.m_body%3B%7D%2CGetPosition%3Afunction()%7Breturn this.m_position%3B%7D%2CGetRotationMatrix%3Afunction()%7Breturn this.m_R%3B%7D%2CResetProxy%3Afunction(broadPhase)%7B%7D%2CGetNext%3Afunction()%7Breturn this.m_next%3B%7D%2Cinitialize%3Afunction(def%2Cbody)%7Bthis.m_R%3Dnew b2Mat22()%3Bthis.m_position%3Dnew b2Vec2()%3Bthis.m_userData%3Ddef.userData%3Bthis.m_friction%3Ddef.friction%3Bthis.m_restitution%3Ddef.restitution%3Bthis.m_body%3Dbody%3Bthis.m_proxyId%3Db2Pair.b2_nullProxy%3Bthis.m_maxRadius%3D0.0%3Bthis.m_categoryBits%3Ddef.categoryBits%3Bthis.m_maskBits%3Ddef.maskBits%3Bthis.m_groupIndex%3Ddef.groupIndex%3B%7D%2CDestroyProxy%3Afunction()%0A%09%09%09%7Bif(this.m_proxyId!%3Db2Pair.b2_nullProxy)%0A%09%09%09%7Bthis.m_body.m_world.m_broadPhase.DestroyProxy(this.m_proxyId)%3Bthis.m_proxyId%3Db2Pair.b2_nullProxy%3B%7D%7D%2CSynchronize%3Afunction(position1%2CR1%2Cposition2%2CR2)%7B%7D%2CQuickSync%3Afunction(position%2CR)%7B%7D%2CSupport%3Afunction(dX%2CdY%2Cout)%7B%7D%2CGetMaxRadius%3Afunction()%7Breturn this.m_maxRadius%3B%7D%2Cm_next%3Anull%2Cm_R%3Anew b2Mat22()%2Cm_position%3Anew b2Vec2()%2Cm_type%3A0%2Cm_userData%3Anull%2Cm_body%3Anull%2Cm_friction%3Anull%2Cm_restitution%3Anull%2Cm_maxRadius%3Anull%2Cm_proxyId%3A0%2Cm_categoryBits%3A0%2Cm_maskBits%3A0%2Cm_groupIndex%3A0%7D%3Bb2Shape.Create%3Dfunction(def%2Cbody%2Ccenter)%7Bswitch(def.type)%0A%09%09%09%7Bcase b2Shape.e_circleShape%3A%7Breturn new b2CircleShape(def%2Cbody%2Ccenter)%3B%7D%0A%09%09%09case b2Shape.e_boxShape%3Acase b2Shape.e_polyShape%3A%7Breturn new b2PolyShape(def%2Cbody%2Ccenter)%3B%7D%7D%0A%09%09%09return null%3B%7D%3Bb2Shape.Destroy%3Dfunction(shape)%0A%09%09%09%7Bif(shape.m_proxyId!%3Db2Pair.b2_nullProxy)%0A%09%09%09shape.m_body.m_world.m_broadPhase.DestroyProxy(shape.m_proxyId)%3B%7D%3Bb2Shape.e_unknownShape%3D-1%3Bb2Shape.e_circleShape%3D0%3Bb2Shape.e_boxShape%3D1%3Bb2Shape.e_polyShape%3D2%3Bb2Shape.e_meshShape%3D3%3Bb2Shape.e_shapeTypeCount%3D4%3Bb2Shape.PolyMass%3Dfunction(massData%2Cvs%2Ccount%2Crho)%0A%09%09%09%7Bvar center%3Dnew b2Vec2()%3Bcenter.SetZero()%3Bvar area%3D0.0%3Bvar I%3D0.0%3Bvar pRef%3Dnew b2Vec2(0.0%2C0.0)%3Bvar inv3%3D1.0%2F3.0%3Bfor(var i%3D0%3Bi<count%3B%2B%2Bi)%0A%09%09%09%7Bvar p1%3DpRef%3Bvar p2%3Dvs%5Bi%5D%3Bvar p3%3Di%2B1<count%3Fvs%5Bi%2B1%5D%3Avs%5B0%5D%3Bvar e1%3Db2Math.SubtractVV(p2%2Cp1)%3Bvar e2%3Db2Math.SubtractVV(p3%2Cp1)%3Bvar D%3Db2Math.b2CrossVV(e1%2Ce2)%3Bvar triangleArea%3D0.5*D%3Barea%2B%3DtriangleArea%3Bvar tVec%3Dnew b2Vec2()%3BtVec.SetV(p1)%3BtVec.Add(p2)%3BtVec.Add(p3)%3BtVec.Multiply(inv3*triangleArea)%3Bcenter.Add(tVec)%3Bvar px%3Dp1.x%3Bvar py%3Dp1.y%3Bvar ex1%3De1.x%3Bvar ey1%3De1.y%3Bvar ex2%3De2.x%3Bvar ey2%3De2.y%3Bvar intx2%3Dinv3*(0.25*(ex1*ex1%2Bex2*ex1%2Bex2*ex2)%2B(px*ex1%2Bpx*ex2))%2B0.5*px*px%3Bvar inty2%3Dinv3*(0.25*(ey1*ey1%2Bey2*ey1%2Bey2*ey2)%2B(py*ey1%2Bpy*ey2))%2B0.5*py*py%3BI%2B%3DD*(intx2%2Binty2)%3B%7D%0A%09%09%09massData.mass%3Drho*area%3Bcenter.Multiply(1.0%2Farea)%3BmassData.center%3Dcenter%3BI%3Drho*(I-area*b2Math.b2Dot(center%2Ccenter))%3BmassData.I%3DI%3B%7D%3Bb2Shape.PolyCentroid%3Dfunction(vs%2Ccount%2Cout)%0A%09%09%09%7Bvar cX%3D0.0%3Bvar cY%3D0.0%3Bvar area%3D0.0%3Bvar pRefX%3D0.0%3Bvar pRefY%3D0.0%3Bvar inv3%3D1.0%2F3.0%3Bfor(var i%3D0%3Bi<count%3B%2B%2Bi)%0A%09%09%09%7Bvar p1X%3DpRefX%3Bvar p1Y%3DpRefY%3Bvar p2X%3Dvs%5Bi%5D.x%3Bvar p2Y%3Dvs%5Bi%5D.y%3Bvar p3X%3Di%2B1<count%3Fvs%5Bi%2B1%5D.x%3Avs%5B0%5D.x%3Bvar p3Y%3Di%2B1<count%3Fvs%5Bi%2B1%5D.y%3Avs%5B0%5D.y%3Bvar e1X%3Dp2X-p1X%3Bvar e1Y%3Dp2Y-p1Y%3Bvar e2X%3Dp3X-p1X%3Bvar e2Y%3Dp3Y-p1Y%3Bvar D%3D(e1X*e2Y-e1Y*e2X)%3Bvar triangleArea%3D0.5*D%3Barea%2B%3DtriangleArea%3BcX%2B%3DtriangleArea*inv3*(p1X%2Bp2X%2Bp3X)%3BcY%2B%3DtriangleArea*inv3*(p1Y%2Bp2Y%2Bp3Y)%3B%7D%0A%09%09%09cX*%3D1.0%2Farea%3BcY*%3D1.0%2Farea%3Bout.Set(cX%2CcY)%3B%7D%3B%0A%09%09%09var b2ShapeDef%3DClass.create()%3Bb2ShapeDef.prototype%3D%7Binitialize%3Afunction()%0A%09%09%09%7Bthis.type%3Db2Shape.e_unknownShape%3Bthis.userData%3Dnull%3Bthis.localPosition%3Dnew b2Vec2(0.0%2C0.0)%3Bthis.localRotation%3D0.0%3Bthis.friction%3D0.2%3Bthis.restitution%3D0.0%3Bthis.density%3D0.0%3Bthis.categoryBits%3D0x0001%3Bthis.maskBits%3D0xFFFF%3Bthis.groupIndex%3D0%3B%7D%2CComputeMass%3Afunction(massData)%0A%09%09%09%7BmassData.center%3Dnew b2Vec2(0.0%2C0.0)%0A%09%09%09if(this.density%3D%3D0.0)%0A%09%09%09%7BmassData.mass%3D0.0%3BmassData.center.Set(0.0%2C0.0)%3BmassData.I%3D0.0%3B%7D%3Bswitch(this.type)%0A%09%09%09%7Bcase b2Shape.e_circleShape%3A%7Bvar circle%3Dthis%3BmassData.mass%3Dthis.density*b2Settings.b2_pi*circle.radius*circle.radius%3BmassData.center.Set(0.0%2C0.0)%3BmassData.I%3D0.5*(massData.mass)*circle.radius*circle.radius%3B%7D%0A%09%09%09break%3Bcase b2Shape.e_boxShape%3A%7Bvar box%3Dthis%3BmassData.mass%3D4.0*this.density*box.extents.x*box.extents.y%3BmassData.center.Set(0.0%2C0.0)%3BmassData.I%3DmassData.mass%2F3.0*b2Math.b2Dot(box.extents%2Cbox.extents)%3B%7D%0A%09%09%09break%3Bcase b2Shape.e_polyShape%3A%7Bvar poly%3Dthis%3Bb2Shape.PolyMass(massData%2Cpoly.vertices%2Cpoly.vertexCount%2Cthis.density)%3B%7D%0A%09%09%09break%3Bdefault%3AmassData.mass%3D0.0%3BmassData.center.Set(0.0%2C0.0)%3BmassData.I%3D0.0%3Bbreak%3B%7D%7D%2Ctype%3A0%2CuserData%3Anull%2ClocalPosition%3Anull%2ClocalRotation%3Anull%2Cfriction%3Anull%2Crestitution%3Anull%2Cdensity%3Anull%2CcategoryBits%3A0%2CmaskBits%3A0%2CgroupIndex%3A0%7D%3B%0A%09%09%09var b2BoxDef%3DClass.create()%3BObject.extend(b2BoxDef.prototype%2Cb2ShapeDef.prototype)%3BObject.extend(b2BoxDef.prototype%2C%7Binitialize%3Afunction()%0A%09%09%09%7Bthis.type%3Db2Shape.e_unknownShape%3Bthis.userData%3Dnull%3Bthis.localPosition%3Dnew b2Vec2(0.0%2C0.0)%3Bthis.localRotation%3D0.0%3Bthis.friction%3D0.2%3Bthis.restitution%3D0.0%3Bthis.density%3D0.0%3Bthis.categoryBits%3D0x0001%3Bthis.maskBits%3D0xFFFF%3Bthis.groupIndex%3D0%3Bthis.type%3Db2Shape.e_boxShape%3Bthis.extents%3Dnew b2Vec2(1.0%2C1.0)%3B%7D%2Cextents%3Anull%7D)%3B%0A%09%09%09var b2CircleDef%3DClass.create()%3BObject.extend(b2CircleDef.prototype%2Cb2ShapeDef.prototype)%3BObject.extend(b2CircleDef.prototype%2C%7Binitialize%3Afunction()%0A%09%09%09%7Bthis.type%3Db2Shape.e_unknownShape%3Bthis.userData%3Dnull%3Bthis.localPosition%3Dnew b2Vec2(0.0%2C0.0)%3Bthis.localRotation%3D0.0%3Bthis.friction%3D0.2%3Bthis.restitution%3D0.0%3Bthis.density%3D0.0%3Bthis.categoryBits%3D0x0001%3Bthis.maskBits%3D0xFFFF%3Bthis.groupIndex%3D0%3Bthis.type%3Db2Shape.e_circleShape%3Bthis.radius%3D1.0%3B%7D%2Cradius%3Anull%7D)%3Bvar b2CircleShape%3DClass.create()%3BObject.extend(b2CircleShape.prototype%2Cb2Shape.prototype)%3BObject.extend(b2CircleShape.prototype%2C%7BTestPoint%3Afunction(p)%7Bvar d%3Dnew b2Vec2()%3Bd.SetV(p)%3Bd.Subtract(this.m_position)%3Breturn b2Math.b2Dot(d%2Cd)<%3Dthis.m_radius*this.m_radius%3B%7D%2Cinitialize%3Afunction(def%2Cbody%2ClocalCenter)%7Bthis.m_R%3Dnew b2Mat22()%3Bthis.m_position%3Dnew b2Vec2()%3Bthis.m_userData%3Ddef.userData%3Bthis.m_friction%3Ddef.friction%3Bthis.m_restitution%3Ddef.restitution%3Bthis.m_body%3Dbody%3Bthis.m_proxyId%3Db2Pair.b2_nullProxy%3Bthis.m_maxRadius%3D0.0%3Bthis.m_categoryBits%3Ddef.categoryBits%3Bthis.m_maskBits%3Ddef.maskBits%3Bthis.m_groupIndex%3Ddef.groupIndex%3Bthis.m_localPosition%3Dnew b2Vec2()%3Bvar circle%3Ddef%3Bthis.m_localPosition.Set(def.localPosition.x-localCenter.x%2Cdef.localPosition.y-localCenter.y)%3Bthis.m_type%3Db2Shape.e_circleShape%3Bthis.m_radius%3Dcircle.radius%3Bthis.m_R.SetM(this.m_body.m_R)%3Bvar rX%3Dthis.m_R.col1.x*this.m_localPosition.x%2Bthis.m_R.col2.x*this.m_localPosition.y%3Bvar rY%3Dthis.m_R.col1.y*this.m_localPosition.x%2Bthis.m_R.col2.y*this.m_localPosition.y%3Bthis.m_position.x%3Dthis.m_body.m_position.x%2BrX%3Bthis.m_position.y%3Dthis.m_body.m_position.y%2BrY%3Bthis.m_maxRadius%3DMath.sqrt(rX*rX%2BrY*rY)%2Bthis.m_radius%3Bvar aabb%3Dnew b2AABB()%3Baabb.minVertex.Set(this.m_position.x-this.m_radius%2Cthis.m_position.y-this.m_radius)%3Baabb.maxVertex.Set(this.m_position.x%2Bthis.m_radius%2Cthis.m_position.y%2Bthis.m_radius)%3Bvar broadPhase%3Dthis.m_body.m_world.m_broadPhase%3Bif(broadPhase.InRange(aabb))%0A%09%09%09%7Bthis.m_proxyId%3DbroadPhase.CreateProxy(aabb%2Cthis)%3B%7D%0A%09%09%09else%0A%09%09%09%7Bthis.m_proxyId%3Db2Pair.b2_nullProxy%3B%7D%0A%09%09%09if(this.m_proxyId%3D%3Db2Pair.b2_nullProxy)%0A%09%09%09%7Bthis.m_body.Freeze()%3B%7D%7D%2CSynchronize%3Afunction(position1%2CR1%2Cposition2%2CR2)%7Bthis.m_R.SetM(R2)%3Bthis.m_position.x%3D(R2.col1.x*this.m_localPosition.x%2BR2.col2.x*this.m_localPosition.y)%2Bposition2.x%3Bthis.m_position.y%3D(R2.col1.y*this.m_localPosition.x%2BR2.col2.y*this.m_localPosition.y)%2Bposition2.y%3Bif(this.m_proxyId%3D%3Db2Pair.b2_nullProxy)%0A%09%09%09%7Breturn%3B%7D%0A%09%09%09var p1X%3Dposition1.x%2B(R1.col1.x*this.m_localPosition.x%2BR1.col2.x*this.m_localPosition.y)%3Bvar p1Y%3Dposition1.y%2B(R1.col1.y*this.m_localPosition.x%2BR1.col2.y*this.m_localPosition.y)%3Bvar lowerX%3DMath.min(p1X%2Cthis.m_position.x)%3Bvar lowerY%3DMath.min(p1Y%2Cthis.m_position.y)%3Bvar upperX%3DMath.max(p1X%2Cthis.m_position.x)%3Bvar upperY%3DMath.max(p1Y%2Cthis.m_position.y)%3Bvar aabb%3Dnew b2AABB()%3Baabb.minVertex.Set(lowerX-this.m_radius%2ClowerY-this.m_radius)%3Baabb.maxVertex.Set(upperX%2Bthis.m_radius%2CupperY%2Bthis.m_radius)%3Bvar broadPhase%3Dthis.m_body.m_world.m_broadPhase%3Bif(broadPhase.InRange(aabb))%0A%09%09%09%7BbroadPhase.MoveProxy(this.m_proxyId%2Caabb)%3B%7D%0A%09%09%09else%0A%09%09%09%7Bthis.m_body.Freeze()%3B%7D%7D%2CQuickSync%3Afunction(position%2CR)%7Bthis.m_R.SetM(R)%3Bthis.m_position.x%3D(R.col1.x*this.m_localPosition.x%2BR.col2.x*this.m_localPosition.y)%2Bposition.x%3Bthis.m_position.y%3D(R.col1.y*this.m_localPosition.x%2BR.col2.y*this.m_localPosition.y)%2Bposition.y%3B%7D%2CResetProxy%3Afunction(broadPhase)%0A%09%09%09%7Bif(this.m_proxyId%3D%3Db2Pair.b2_nullProxy)%0A%09%09%09%7Breturn%3B%7D%0A%09%09%09var proxy%3DbroadPhase.GetProxy(this.m_proxyId)%3BbroadPhase.DestroyProxy(this.m_proxyId)%3Bproxy%3Dnull%3Bvar aabb%3Dnew b2AABB()%3Baabb.minVertex.Set(this.m_position.x-this.m_radius%2Cthis.m_position.y-this.m_radius)%3Baabb.maxVertex.Set(this.m_position.x%2Bthis.m_radius%2Cthis.m_position.y%2Bthis.m_radius)%3Bif(broadPhase.InRange(aabb))%0A%09%09%09%7Bthis.m_proxyId%3DbroadPhase.CreateProxy(aabb%2Cthis)%3B%7D%0A%09%09%09else%0A%09%09%09%7Bthis.m_proxyId%3Db2Pair.b2_nullProxy%3B%7D%0A%09%09%09if(this.m_proxyId%3D%3Db2Pair.b2_nullProxy)%0A%09%09%09%7Bthis.m_body.Freeze()%3B%7D%7D%2CSupport%3Afunction(dX%2CdY%2Cout)%0A%09%09%09%7Bvar len%3DMath.sqrt(dX*dX%2BdY*dY)%3BdX%2F%3Dlen%3BdY%2F%3Dlen%3Bout.Set(this.m_position.x%2Bthis.m_radius*dX%2Cthis.m_position.y%2Bthis.m_radius*dY)%3B%7D%2Cm_localPosition%3Anew b2Vec2()%2Cm_radius%3Anull%7D)%3B%0A%09%09%09var b2MassData%3DClass.create()%3Bb2MassData.prototype%3D%7Bmass%3A0.0%2Ccenter%3Anew b2Vec2(0%2C0)%2CI%3A0.0%2Cinitialize%3Afunction()%7Bthis.center%3Dnew b2Vec2(0%2C0)%3B%7D%7D%0A%09%09%09%0A%09%09%09var b2PolyDef%3DClass.create()%3BObject.extend(b2PolyDef.prototype%2Cb2ShapeDef.prototype)%3BObject.extend(b2PolyDef.prototype%2C%7Binitialize%3Afunction()%0A%09%09%09%7Bthis.type%3Db2Shape.e_unknownShape%3Bthis.userData%3Dnull%3Bthis.localPosition%3Dnew b2Vec2(0.0%2C0.0)%3Bthis.localRotation%3D0.0%3Bthis.friction%3D0.2%3Bthis.restitution%3D0.0%3Bthis.density%3D0.0%3Bthis.categoryBits%3D0x0001%3Bthis.maskBits%3D0xFFFF%3Bthis.groupIndex%3D0%3Bthis.vertices%3Dnew Array(b2Settings.b2_maxPolyVertices)%3Bthis.type%3Db2Shape.e_polyShape%3Bthis.vertexCount%3D0%3Bfor(var i%3D0%3Bi<b2Settings.b2_maxPolyVertices%3Bi%2B%2B)%7Bthis.vertices%5Bi%5D%3Dnew b2Vec2()%3B%7D%7D%2Cvertices%3Anew Array(b2Settings.b2_maxPolyVertices)%2CvertexCount%3A0%7D)%3Bvar b2PolyShape%3DClass.create()%3BObject.extend(b2PolyShape.prototype%2Cb2Shape.prototype)%3BObject.extend(b2PolyShape.prototype%2C%7BTestPoint%3Afunction(p)%7Bvar pLocal%3Dnew b2Vec2()%3BpLocal.SetV(p)%3BpLocal.Subtract(this.m_position)%3BpLocal.MulTM(this.m_R)%3Bfor(var i%3D0%3Bi<this.m_vertexCount%3B%2B%2Bi)%0A%09%09%09%7Bvar tVec%3Dnew b2Vec2()%3BtVec.SetV(pLocal)%3BtVec.Subtract(this.m_vertices%5Bi%5D)%3Bvar dot%3Db2Math.b2Dot(this.m_normals%5Bi%5D%2CtVec)%3Bif(dot>0.0)%0A%09%09%09%7Breturn false%3B%7D%7D%0A%09%09%09return true%3B%7D%2Cinitialize%3Afunction(def%2Cbody%2CnewOrigin)%7Bthis.m_R%3Dnew b2Mat22()%3Bthis.m_position%3Dnew b2Vec2()%3Bthis.m_userData%3Ddef.userData%3Bthis.m_friction%3Ddef.friction%3Bthis.m_restitution%3Ddef.restitution%3Bthis.m_body%3Dbody%3Bthis.m_proxyId%3Db2Pair.b2_nullProxy%3Bthis.m_maxRadius%3D0.0%3Bthis.m_categoryBits%3Ddef.categoryBits%3Bthis.m_maskBits%3Ddef.maskBits%3Bthis.m_groupIndex%3Ddef.groupIndex%3Bthis.syncAABB%3Dnew b2AABB()%3Bthis.syncMat%3Dnew b2Mat22()%3Bthis.m_localCentroid%3Dnew b2Vec2()%3Bthis.m_localOBB%3Dnew b2OBB()%3Bvar i%3D0%3Bvar hX%3Bvar hY%3Bvar tVec%3Bvar aabb%3Dnew b2AABB()%3Bthis.m_vertices%3Dnew Array(b2Settings.b2_maxPolyVertices)%3Bthis.m_coreVertices%3Dnew Array(b2Settings.b2_maxPolyVertices)%3Bthis.m_normals%3Dnew Array(b2Settings.b2_maxPolyVertices)%3Bthis.m_type%3Db2Shape.e_polyShape%3Bvar localR%3Dnew b2Mat22(def.localRotation)%3Bif(def.type%3D%3Db2Shape.e_boxShape)%0A%09%09%09%7Bthis.m_localCentroid.x%3Ddef.localPosition.x-newOrigin.x%3Bthis.m_localCentroid.y%3Ddef.localPosition.y-newOrigin.y%3Bvar box%3Ddef%3Bthis.m_vertexCount%3D4%3BhX%3Dbox.extents.x%3BhY%3Dbox.extents.y%3Bvar hcX%3DMath.max(0.0%2ChX-2.0*b2Settings.b2_linearSlop)%3Bvar hcY%3DMath.max(0.0%2ChY-2.0*b2Settings.b2_linearSlop)%3BtVec%3Dthis.m_vertices%5B0%5D%3Dnew b2Vec2()%3BtVec.x%3DlocalR.col1.x*hX%2BlocalR.col2.x*hY%3BtVec.y%3DlocalR.col1.y*hX%2BlocalR.col2.y*hY%3BtVec%3Dthis.m_vertices%5B1%5D%3Dnew b2Vec2()%3BtVec.x%3DlocalR.col1.x*-hX%2BlocalR.col2.x*hY%3BtVec.y%3DlocalR.col1.y*-hX%2BlocalR.col2.y*hY%3BtVec%3Dthis.m_vertices%5B2%5D%3Dnew b2Vec2()%3BtVec.x%3DlocalR.col1.x*-hX%2BlocalR.col2.x*-hY%3BtVec.y%3DlocalR.col1.y*-hX%2BlocalR.col2.y*-hY%3BtVec%3Dthis.m_vertices%5B3%5D%3Dnew b2Vec2()%3BtVec.x%3DlocalR.col1.x*hX%2BlocalR.col2.x*-hY%3BtVec.y%3DlocalR.col1.y*hX%2BlocalR.col2.y*-hY%3BtVec%3Dthis.m_coreVertices%5B0%5D%3Dnew b2Vec2()%3BtVec.x%3DlocalR.col1.x*hcX%2BlocalR.col2.x*hcY%3BtVec.y%3DlocalR.col1.y*hcX%2BlocalR.col2.y*hcY%3BtVec%3Dthis.m_coreVertices%5B1%5D%3Dnew b2Vec2()%3BtVec.x%3DlocalR.col1.x*-hcX%2BlocalR.col2.x*hcY%3BtVec.y%3DlocalR.col1.y*-hcX%2BlocalR.col2.y*hcY%3BtVec%3Dthis.m_coreVertices%5B2%5D%3Dnew b2Vec2()%3BtVec.x%3DlocalR.col1.x*-hcX%2BlocalR.col2.x*-hcY%3BtVec.y%3DlocalR.col1.y*-hcX%2BlocalR.col2.y*-hcY%3BtVec%3Dthis.m_coreVertices%5B3%5D%3Dnew b2Vec2()%3BtVec.x%3DlocalR.col1.x*hcX%2BlocalR.col2.x*-hcY%3BtVec.y%3DlocalR.col1.y*hcX%2BlocalR.col2.y*-hcY%3B%7D%0A%09%09%09else%0A%09%09%09%7Bvar poly%3Ddef%3Bthis.m_vertexCount%3Dpoly.vertexCount%3Bb2Shape.PolyCentroid(poly.vertices%2Cpoly.vertexCount%2Cb2PolyShape.tempVec)%3Bvar centroidX%3Db2PolyShape.tempVec.x%3Bvar centroidY%3Db2PolyShape.tempVec.y%3Bthis.m_localCentroid.x%3Ddef.localPosition.x%2B(localR.col1.x*centroidX%2BlocalR.col2.x*centroidY)-newOrigin.x%3Bthis.m_localCentroid.y%3Ddef.localPosition.y%2B(localR.col1.y*centroidX%2BlocalR.col2.y*centroidY)-newOrigin.y%3Bfor(i%3D0%3Bi<this.m_vertexCount%3B%2B%2Bi)%0A%09%09%09%7Bthis.m_vertices%5Bi%5D%3Dnew b2Vec2()%3Bthis.m_coreVertices%5Bi%5D%3Dnew b2Vec2()%3BhX%3Dpoly.vertices%5Bi%5D.x-centroidX%3BhY%3Dpoly.vertices%5Bi%5D.y-centroidY%3Bthis.m_vertices%5Bi%5D.x%3DlocalR.col1.x*hX%2BlocalR.col2.x*hY%3Bthis.m_vertices%5Bi%5D.y%3DlocalR.col1.y*hX%2BlocalR.col2.y*hY%3Bvar uX%3Dthis.m_vertices%5Bi%5D.x%3Bvar uY%3Dthis.m_vertices%5Bi%5D.y%3Bvar length%3DMath.sqrt(uX*uX%2BuY*uY)%3Bif(length>Number.MIN_VALUE)%0A%09%09%09%7BuX*%3D1.0%2Flength%3BuY*%3D1.0%2Flength%3B%7D%0A%09%09%09this.m_coreVertices%5Bi%5D.x%3Dthis.m_vertices%5Bi%5D.x-2.0*b2Settings.b2_linearSlop*uX%3Bthis.m_coreVertices%5Bi%5D.y%3Dthis.m_vertices%5Bi%5D.y-2.0*b2Settings.b2_linearSlop*uY%3B%7D%7D%0A%09%09%09var minVertexX%3DNumber.MAX_VALUE%3Bvar minVertexY%3DNumber.MAX_VALUE%3Bvar maxVertexX%3D-Number.MAX_VALUE%3Bvar maxVertexY%3D-Number.MAX_VALUE%3Bthis.m_maxRadius%3D0.0%3Bfor(i%3D0%3Bi<this.m_vertexCount%3B%2B%2Bi)%0A%09%09%09%7Bvar v%3Dthis.m_vertices%5Bi%5D%3BminVertexX%3DMath.min(minVertexX%2Cv.x)%3BminVertexY%3DMath.min(minVertexY%2Cv.y)%3BmaxVertexX%3DMath.max(maxVertexX%2Cv.x)%3BmaxVertexY%3DMath.max(maxVertexY%2Cv.y)%3Bthis.m_maxRadius%3DMath.max(this.m_maxRadius%2Cv.Length())%3B%7D%0A%09%09%09this.m_localOBB.R.SetIdentity()%3Bthis.m_localOBB.center.Set((minVertexX%2BmaxVertexX)*0.5%2C(minVertexY%2BmaxVertexY)*0.5)%3Bthis.m_localOBB.extents.Set((maxVertexX-minVertexX)*0.5%2C(maxVertexY-minVertexY)*0.5)%3Bvar i1%3D0%3Bvar i2%3D0%3Bfor(i%3D0%3Bi<this.m_vertexCount%3B%2B%2Bi)%0A%09%09%09%7Bthis.m_normals%5Bi%5D%3Dnew b2Vec2()%3Bi1%3Di%3Bi2%3Di%2B1<this.m_vertexCount%3Fi%2B1%3A0%3Bthis.m_normals%5Bi%5D.x%3Dthis.m_vertices%5Bi2%5D.y-this.m_vertices%5Bi1%5D.y%3Bthis.m_normals%5Bi%5D.y%3D-(this.m_vertices%5Bi2%5D.x-this.m_vertices%5Bi1%5D.x)%3Bthis.m_normals%5Bi%5D.Normalize()%3B%7D%0A%09%09%09for(i%3D0%3Bi<this.m_vertexCount%3B%2B%2Bi)%0A%09%09%09%7Bi1%3Di%3Bi2%3Di%2B1<this.m_vertexCount%3Fi%2B1%3A0%3B%7D%0A%09%09%09this.m_R.SetM(this.m_body.m_R)%3Bthis.m_position.x%3Dthis.m_body.m_position.x%2B(this.m_R.col1.x*this.m_localCentroid.x%2Bthis.m_R.col2.x*this.m_localCentroid.y)%3Bthis.m_position.y%3Dthis.m_body.m_position.y%2B(this.m_R.col1.y*this.m_localCentroid.x%2Bthis.m_R.col2.y*this.m_localCentroid.y)%3Bb2PolyShape.tAbsR.col1.x%3Dthis.m_R.col1.x*this.m_localOBB.R.col1.x%2Bthis.m_R.col2.x*this.m_localOBB.R.col1.y%3Bb2PolyShape.tAbsR.col1.y%3Dthis.m_R.col1.y*this.m_localOBB.R.col1.x%2Bthis.m_R.col2.y*this.m_localOBB.R.col1.y%3Bb2PolyShape.tAbsR.col2.x%3Dthis.m_R.col1.x*this.m_localOBB.R.col2.x%2Bthis.m_R.col2.x*this.m_localOBB.R.col2.y%3Bb2PolyShape.tAbsR.col2.y%3Dthis.m_R.col1.y*this.m_localOBB.R.col2.x%2Bthis.m_R.col2.y*this.m_localOBB.R.col2.y%3Bb2PolyShape.tAbsR.Abs()%0A%09%09%09hX%3Db2PolyShape.tAbsR.col1.x*this.m_localOBB.extents.x%2Bb2PolyShape.tAbsR.col2.x*this.m_localOBB.extents.y%3BhY%3Db2PolyShape.tAbsR.col1.y*this.m_localOBB.extents.x%2Bb2PolyShape.tAbsR.col2.y*this.m_localOBB.extents.y%3Bvar positionX%3Dthis.m_position.x%2B(this.m_R.col1.x*this.m_localOBB.center.x%2Bthis.m_R.col2.x*this.m_localOBB.center.y)%3Bvar positionY%3Dthis.m_position.y%2B(this.m_R.col1.y*this.m_localOBB.center.x%2Bthis.m_R.col2.y*this.m_localOBB.center.y)%3Baabb.minVertex.x%3DpositionX-hX%3Baabb.minVertex.y%3DpositionY-hY%3Baabb.maxVertex.x%3DpositionX%2BhX%3Baabb.maxVertex.y%3DpositionY%2BhY%3Bvar broadPhase%3Dthis.m_body.m_world.m_broadPhase%3Bif(broadPhase.InRange(aabb))%0A%09%09%09%7Bthis.m_proxyId%3DbroadPhase.CreateProxy(aabb%2Cthis)%3B%7D%0A%09%09%09else%0A%09%09%09%7Bthis.m_proxyId%3Db2Pair.b2_nullProxy%3B%7D%0A%09%09%09if(this.m_proxyId%3D%3Db2Pair.b2_nullProxy)%0A%09%09%09%7Bthis.m_body.Freeze()%3B%7D%7D%2CsyncAABB%3Anew b2AABB()%2CsyncMat%3Anew b2Mat22()%2CSynchronize%3Afunction(position1%2CR1%2Cposition2%2CR2)%7Bthis.m_R.SetM(R2)%3Bthis.m_position.x%3Dthis.m_body.m_position.x%2B(R2.col1.x*this.m_localCentroid.x%2BR2.col2.x*this.m_localCentroid.y)%3Bthis.m_position.y%3Dthis.m_body.m_position.y%2B(R2.col1.y*this.m_localCentroid.x%2BR2.col2.y*this.m_localCentroid.y)%3Bif(this.m_proxyId%3D%3Db2Pair.b2_nullProxy)%0A%09%09%09%7Breturn%3B%7D%0A%09%09%09var hX%3Bvar hY%3Bvar v1%3DR1.col1%3Bvar v2%3DR1.col2%3Bvar v3%3Dthis.m_localOBB.R.col1%3Bvar v4%3Dthis.m_localOBB.R.col2%3Bthis.syncMat.col1.x%3Dv1.x*v3.x%2Bv2.x*v3.y%3Bthis.syncMat.col1.y%3Dv1.y*v3.x%2Bv2.y*v3.y%3Bthis.syncMat.col2.x%3Dv1.x*v4.x%2Bv2.x*v4.y%3Bthis.syncMat.col2.y%3Dv1.y*v4.x%2Bv2.y*v4.y%3Bthis.syncMat.Abs()%3BhX%3Dthis.m_localCentroid.x%2Bthis.m_localOBB.center.x%3BhY%3Dthis.m_localCentroid.y%2Bthis.m_localOBB.center.y%3Bvar centerX%3Dposition1.x%2B(R1.col1.x*hX%2BR1.col2.x*hY)%3Bvar centerY%3Dposition1.y%2B(R1.col1.y*hX%2BR1.col2.y*hY)%3BhX%3Dthis.syncMat.col1.x*this.m_localOBB.extents.x%2Bthis.syncMat.col2.x*this.m_localOBB.extents.y%3BhY%3Dthis.syncMat.col1.y*this.m_localOBB.extents.x%2Bthis.syncMat.col2.y*this.m_localOBB.extents.y%3Bthis.syncAABB.minVertex.x%3DcenterX-hX%3Bthis.syncAABB.minVertex.y%3DcenterY-hY%3Bthis.syncAABB.maxVertex.x%3DcenterX%2BhX%3Bthis.syncAABB.maxVertex.y%3DcenterY%2BhY%3Bv1%3DR2.col1%3Bv2%3DR2.col2%3Bv3%3Dthis.m_localOBB.R.col1%3Bv4%3Dthis.m_localOBB.R.col2%3Bthis.syncMat.col1.x%3Dv1.x*v3.x%2Bv2.x*v3.y%3Bthis.syncMat.col1.y%3Dv1.y*v3.x%2Bv2.y*v3.y%3Bthis.syncMat.col2.x%3Dv1.x*v4.x%2Bv2.x*v4.y%3Bthis.syncMat.col2.y%3Dv1.y*v4.x%2Bv2.y*v4.y%3Bthis.syncMat.Abs()%3BhX%3Dthis.m_localCentroid.x%2Bthis.m_localOBB.center.x%3BhY%3Dthis.m_localCentroid.y%2Bthis.m_localOBB.center.y%3BcenterX%3Dposition2.x%2B(R2.col1.x*hX%2BR2.col2.x*hY)%3BcenterY%3Dposition2.y%2B(R2.col1.y*hX%2BR2.col2.y*hY)%3BhX%3Dthis.syncMat.col1.x*this.m_localOBB.extents.x%2Bthis.syncMat.col2.x*this.m_localOBB.extents.y%3BhY%3Dthis.syncMat.col1.y*this.m_localOBB.extents.x%2Bthis.syncMat.col2.y*this.m_localOBB.extents.y%3Bthis.syncAABB.minVertex.x%3DMath.min(this.syncAABB.minVertex.x%2CcenterX-hX)%3Bthis.syncAABB.minVertex.y%3DMath.min(this.syncAABB.minVertex.y%2CcenterY-hY)%3Bthis.syncAABB.maxVertex.x%3DMath.max(this.syncAABB.maxVertex.x%2CcenterX%2BhX)%3Bthis.syncAABB.maxVertex.y%3DMath.max(this.syncAABB.maxVertex.y%2CcenterY%2BhY)%3Bvar broadPhase%3Dthis.m_body.m_world.m_broadPhase%3Bif(broadPhase.InRange(this.syncAABB))%0A%09%09%09%7BbroadPhase.MoveProxy(this.m_proxyId%2Cthis.syncAABB)%3B%7D%0A%09%09%09else%0A%09%09%09%7Bthis.m_body.Freeze()%3B%7D%7D%2CQuickSync%3Afunction(position%2CR)%7Bthis.m_R.SetM(R)%3Bthis.m_position.x%3Dposition.x%2B(R.col1.x*this.m_localCentroid.x%2BR.col2.x*this.m_localCentroid.y)%3Bthis.m_position.y%3Dposition.y%2B(R.col1.y*this.m_localCentroid.x%2BR.col2.y*this.m_localCentroid.y)%3B%7D%2CResetProxy%3Afunction(broadPhase)%7Bif(this.m_proxyId%3D%3Db2Pair.b2_nullProxy)%0A%09%09%09%7Breturn%3B%7D%0A%09%09%09var proxy%3DbroadPhase.GetProxy(this.m_proxyId)%3BbroadPhase.DestroyProxy(this.m_proxyId)%3Bproxy%3Dnull%3Bvar R%3Db2Math.b2MulMM(this.m_R%2Cthis.m_localOBB.R)%3Bvar absR%3Db2Math.b2AbsM(R)%3Bvar h%3Db2Math.b2MulMV(absR%2Cthis.m_localOBB.extents)%3Bvar position%3Db2Math.b2MulMV(this.m_R%2Cthis.m_localOBB.center)%3Bposition.Add(this.m_position)%3Bvar aabb%3Dnew b2AABB()%3Baabb.minVertex.SetV(position)%3Baabb.minVertex.Subtract(h)%3Baabb.maxVertex.SetV(position)%3Baabb.maxVertex.Add(h)%3Bif(broadPhase.InRange(aabb))%0A%09%09%09%7Bthis.m_proxyId%3DbroadPhase.CreateProxy(aabb%2Cthis)%3B%7D%0A%09%09%09else%0A%09%09%09%7Bthis.m_proxyId%3Db2Pair.b2_nullProxy%3B%7D%0A%09%09%09if(this.m_proxyId%3D%3Db2Pair.b2_nullProxy)%0A%09%09%09%7Bthis.m_body.Freeze()%3B%7D%7D%2CSupport%3Afunction(dX%2CdY%2Cout)%0A%09%09%09%7Bvar dLocalX%3D(dX*this.m_R.col1.x%2BdY*this.m_R.col1.y)%3Bvar dLocalY%3D(dX*this.m_R.col2.x%2BdY*this.m_R.col2.y)%3Bvar bestIndex%3D0%3Bvar bestValue%3D(this.m_coreVertices%5B0%5D.x*dLocalX%2Bthis.m_coreVertices%5B0%5D.y*dLocalY)%3Bfor(var i%3D1%3Bi<this.m_vertexCount%3B%2B%2Bi)%0A%09%09%09%7Bvar value%3D(this.m_coreVertices%5Bi%5D.x*dLocalX%2Bthis.m_coreVertices%5Bi%5D.y*dLocalY)%3Bif(value>bestValue)%0A%09%09%09%7BbestIndex%3Di%3BbestValue%3Dvalue%3B%7D%7D%0A%09%09%09out.Set(this.m_position.x%2B(this.m_R.col1.x*this.m_coreVertices%5BbestIndex%5D.x%2Bthis.m_R.col2.x*this.m_coreVertices%5BbestIndex%5D.y)%2Cthis.m_position.y%2B(this.m_R.col1.y*this.m_coreVertices%5BbestIndex%5D.x%2Bthis.m_R.col2.y*this.m_coreVertices%5BbestIndex%5D.y))%3B%7D%2Cm_localCentroid%3Anew b2Vec2()%2Cm_localOBB%3Anew b2OBB()%2Cm_vertices%3Anull%2Cm_coreVertices%3Anull%2Cm_vertexCount%3A0%2Cm_normals%3Anull%7D)%3Bb2PolyShape.tempVec%3Dnew b2Vec2()%3Bb2PolyShape.tAbsR%3Dnew b2Mat22()%3B%0A%09%09%09var b2Body%3DClass.create()%3Bb2Body.prototype%3D%7BSetOriginPosition%3Afunction(position%2Crotation)%7Bif(this.IsFrozen())%0A%09%09%09%7Breturn%3B%7D%0A%09%09%09this.m_rotation%3Drotation%3Bthis.m_R.Set(this.m_rotation)%3Bthis.m_position%3Db2Math.AddVV(position%2Cb2Math.b2MulMV(this.m_R%2Cthis.m_center))%3Bthis.m_position0.SetV(this.m_position)%3Bthis.m_rotation0%3Dthis.m_rotation%3Bfor(var s%3Dthis.m_shapeList%3Bs!%3Dnull%3Bs%3Ds.m_next)%0A%09%09%09%7Bs.Synchronize(this.m_position%2Cthis.m_R%2Cthis.m_position%2Cthis.m_R)%3B%7D%0A%09%09%09this.m_world.m_broadPhase.Commit()%3B%7D%2CGetOriginPosition%3Afunction()%7Breturn b2Math.SubtractVV(this.m_position%2Cb2Math.b2MulMV(this.m_R%2Cthis.m_center))%3B%7D%2CSetCenterPosition%3Afunction(position%2Crotation)%7Bif(this.IsFrozen())%0A%09%09%09%7Breturn%3B%7D%0A%09%09%09this.m_rotation%3Drotation%3Bthis.m_R.Set(this.m_rotation)%3Bthis.m_position.SetV(position)%3Bthis.m_position0.SetV(this.m_position)%3Bthis.m_rotation0%3Dthis.m_rotation%3Bfor(var s%3Dthis.m_shapeList%3Bs!%3Dnull%3Bs%3Ds.m_next)%0A%09%09%09%7Bs.Synchronize(this.m_position%2Cthis.m_R%2Cthis.m_position%2Cthis.m_R)%3B%7D%0A%09%09%09this.m_world.m_broadPhase.Commit()%3B%7D%2CGetCenterPosition%3Afunction()%7Breturn this.m_position%3B%7D%2CGetRotation%3Afunction()%7Breturn this.m_rotation%3B%7D%2CGetRotationMatrix%3Afunction()%7Breturn this.m_R%3B%7D%2CSetLinearVelocity%3Afunction(v)%7Bthis.m_linearVelocity.SetV(v)%3B%7D%2CGetLinearVelocity%3Afunction()%7Breturn this.m_linearVelocity%3B%7D%2CSetAngularVelocity%3Afunction(w)%7Bthis.m_angularVelocity%3Dw%3B%7D%2CGetAngularVelocity%3Afunction()%7Breturn this.m_angularVelocity%3B%7D%2CApplyForce%3Afunction(force%2Cpoint)%0A%09%09%09%7Bif(this.IsSleeping()%3D%3Dfalse)%0A%09%09%09%7Bthis.m_force.Add(force)%3Bthis.m_torque%2B%3Db2Math.b2CrossVV(b2Math.SubtractVV(point%2Cthis.m_position)%2Cforce)%3B%7D%7D%2CApplyTorque%3Afunction(torque)%0A%09%09%09%7Bif(this.IsSleeping()%3D%3Dfalse)%0A%09%09%09%7Bthis.m_torque%2B%3Dtorque%3B%7D%7D%2CApplyImpulse%3Afunction(impulse%2Cpoint)%0A%09%09%09%7Bif(this.IsSleeping()%3D%3Dfalse)%0A%09%09%09%7Bthis.m_linearVelocity.Add(b2Math.MulFV(this.m_invMass%2Cimpulse))%3Bthis.m_angularVelocity%2B%3D(this.m_invI*b2Math.b2CrossVV(b2Math.SubtractVV(point%2Cthis.m_position)%2Cimpulse))%3B%7D%7D%2CGetMass%3Afunction()%7Breturn this.m_mass%3B%7D%2CGetInertia%3Afunction()%7Breturn this.m_I%3B%7D%2CGetWorldPoint%3Afunction(localPoint)%7Breturn b2Math.AddVV(this.m_position%2Cb2Math.b2MulMV(this.m_R%2ClocalPoint))%3B%7D%2CGetWorldVector%3Afunction(localVector)%7Breturn b2Math.b2MulMV(this.m_R%2ClocalVector)%3B%7D%2CGetLocalPoint%3Afunction(worldPoint)%7Breturn b2Math.b2MulTMV(this.m_R%2Cb2Math.SubtractVV(worldPoint%2Cthis.m_position))%3B%7D%2CGetLocalVector%3Afunction(worldVector)%7Breturn b2Math.b2MulTMV(this.m_R%2CworldVector)%3B%7D%2CIsStatic%3Afunction()%7Breturn(this.m_flags%26b2Body.e_staticFlag)%3D%3Db2Body.e_staticFlag%3B%7D%2CIsFrozen%3Afunction()%0A%09%09%09%7Breturn(this.m_flags%26b2Body.e_frozenFlag)%3D%3Db2Body.e_frozenFlag%3B%7D%2CIsSleeping%3Afunction()%7Breturn(this.m_flags%26b2Body.e_sleepFlag)%3D%3Db2Body.e_sleepFlag%3B%7D%2CAllowSleeping%3Afunction(flag)%0A%09%09%09%7Bif(flag)%0A%09%09%09%7Bthis.m_flags%7C%3Db2Body.e_allowSleepFlag%3B%7D%0A%09%09%09else%0A%09%09%09%7Bthis.m_flags%26%3D~b2Body.e_allowSleepFlag%3Bthis.WakeUp()%3B%7D%7D%2CWakeUp%3Afunction()%7Bthis.m_flags%26%3D~b2Body.e_sleepFlag%3Bthis.m_sleepTime%3D0.0%3B%7D%2CGetShapeList%3Afunction()%7Breturn this.m_shapeList%3B%7D%2CGetContactList%3Afunction()%0A%09%09%09%7Breturn this.m_contactList%3B%7D%2CGetJointList%3Afunction()%0A%09%09%09%7Breturn this.m_jointList%3B%7D%2CGetNext%3Afunction()%7Breturn this.m_next%3B%7D%2CGetUserData%3Afunction()%7Breturn this.m_userData%3B%7D%2Cinitialize%3Afunction(bd%2Cworld)%7Bthis.sMat0%3Dnew b2Mat22()%3Bthis.m_position%3Dnew b2Vec2()%3Bthis.m_R%3Dnew b2Mat22(0)%3Bthis.m_position0%3Dnew b2Vec2()%3Bvar i%3D0%3Bvar sd%3Bvar massData%3Bthis.m_flags%3D0%3Bthis.m_position.SetV(bd.position)%3Bthis.m_rotation%3Dbd.rotation%3Bthis.m_R.Set(this.m_rotation)%3Bthis.m_position0.SetV(this.m_position)%3Bthis.m_rotation0%3Dthis.m_rotation%3Bthis.m_world%3Dworld%3Bthis.m_linearDamping%3Db2Math.b2Clamp(1.0-bd.linearDamping%2C0.0%2C1.0)%3Bthis.m_angularDamping%3Db2Math.b2Clamp(1.0-bd.angularDamping%2C0.0%2C1.0)%3Bthis.m_force%3Dnew b2Vec2(0.0%2C0.0)%3Bthis.m_torque%3D0.0%3Bthis.m_mass%3D0.0%3Bvar massDatas%3Dnew Array(b2Settings.b2_maxShapesPerBody)%3Bfor(i%3D0%3Bi<b2Settings.b2_maxShapesPerBody%3Bi%2B%2B)%7BmassDatas%5Bi%5D%3Dnew b2MassData()%3B%7D%0A%09%09%09this.m_shapeCount%3D0%3Bthis.m_center%3Dnew b2Vec2(0.0%2C0.0)%3Bfor(i%3D0%3Bi<b2Settings.b2_maxShapesPerBody%3B%2B%2Bi)%0A%09%09%09%7Bsd%3Dbd.shapes%5Bi%5D%3Bif(sd%3D%3Dnull)break%3BmassData%3DmassDatas%5Bi%5D%3Bsd.ComputeMass(massData)%3Bthis.m_mass%2B%3DmassData.mass%3Bthis.m_center.x%2B%3DmassData.mass*(sd.localPosition.x%2BmassData.center.x)%3Bthis.m_center.y%2B%3DmassData.mass*(sd.localPosition.y%2BmassData.center.y)%3B%2B%2Bthis.m_shapeCount%3B%7D%0A%09%09%09if(this.m_mass>0.0)%0A%09%09%09%7Bthis.m_center.Multiply(1.0%2Fthis.m_mass)%3Bthis.m_position.Add(b2Math.b2MulMV(this.m_R%2Cthis.m_center))%3B%7D%0A%09%09%09else%0A%09%09%09%7Bthis.m_flags%7C%3Db2Body.e_staticFlag%3B%7D%0A%09%09%09this.m_I%3D0.0%3Bfor(i%3D0%3Bi<this.m_shapeCount%3B%2B%2Bi)%0A%09%09%09%7Bsd%3Dbd.shapes%5Bi%5D%3BmassData%3DmassDatas%5Bi%5D%3Bthis.m_I%2B%3DmassData.I%3Bvar r%3Db2Math.SubtractVV(b2Math.AddVV(sd.localPosition%2CmassData.center)%2Cthis.m_center)%3Bthis.m_I%2B%3DmassData.mass*b2Math.b2Dot(r%2Cr)%3B%7D%0A%09%09%09if(this.m_mass>0.0)%0A%09%09%09%7Bthis.m_invMass%3D1.0%2Fthis.m_mass%3B%7D%0A%09%09%09else%0A%09%09%09%7Bthis.m_invMass%3D0.0%3B%7D%0A%09%09%09if(this.m_I>0.0%26%26bd.preventRotation%3D%3Dfalse)%0A%09%09%09%7Bthis.m_invI%3D1.0%2Fthis.m_I%3B%7D%0A%09%09%09else%0A%09%09%09%7Bthis.m_I%3D0.0%3Bthis.m_invI%3D0.0%3B%7D%0A%09%09%09this.m_linearVelocity%3Db2Math.AddVV(bd.linearVelocity%2Cb2Math.b2CrossFV(bd.angularVelocity%2Cthis.m_center))%3Bthis.m_angularVelocity%3Dbd.angularVelocity%3Bthis.m_jointList%3Dnull%3Bthis.m_contactList%3Dnull%3Bthis.m_prev%3Dnull%3Bthis.m_next%3Dnull%3Bthis.m_shapeList%3Dnull%3Bfor(i%3D0%3Bi<this.m_shapeCount%3B%2B%2Bi)%0A%09%09%09%7Bsd%3Dbd.shapes%5Bi%5D%3Bvar shape%3Db2Shape.Create(sd%2Cthis%2Cthis.m_center)%3Bshape.m_next%3Dthis.m_shapeList%3Bthis.m_shapeList%3Dshape%3B%7D%0A%09%09%09this.m_sleepTime%3D0.0%3Bif(bd.allowSleep)%0A%09%09%09%7Bthis.m_flags%7C%3Db2Body.e_allowSleepFlag%3B%7D%0A%09%09%09if(bd.isSleeping)%0A%09%09%09%7Bthis.m_flags%7C%3Db2Body.e_sleepFlag%3B%7D%0A%09%09%09if((this.m_flags%26b2Body.e_sleepFlag)%7C%7Cthis.m_invMass%3D%3D0.0)%0A%09%09%09%7Bthis.m_linearVelocity.Set(0.0%2C0.0)%3Bthis.m_angularVelocity%3D0.0%3B%7D%0A%09%09%09this.m_userData%3Dbd.userData%3B%7D%2CDestroy%3Afunction()%7Bvar s%3Dthis.m_shapeList%3Bwhile(s)%0A%09%09%09%7Bvar s0%3Ds%3Bs%3Ds.m_next%3Bb2Shape.Destroy(s0)%3B%7D%7D%2CsMat0%3Anew b2Mat22()%2CSynchronizeShapes%3Afunction()%7Bthis.sMat0.Set(this.m_rotation0)%3Bfor(var s%3Dthis.m_shapeList%3Bs!%3Dnull%3Bs%3Ds.m_next)%0A%09%09%09%7Bs.Synchronize(this.m_position0%2Cthis.sMat0%2Cthis.m_position%2Cthis.m_R)%3B%7D%7D%2CQuickSyncShapes%3Afunction()%7Bfor(var s%3Dthis.m_shapeList%3Bs!%3Dnull%3Bs%3Ds.m_next)%0A%09%09%09%7Bs.QuickSync(this.m_position%2Cthis.m_R)%3B%7D%7D%2CIsConnected%3Afunction(other)%7Bfor(var jn%3Dthis.m_jointList%3Bjn!%3Dnull%3Bjn%3Djn.next)%0A%09%09%09%7Bif(jn.other%3D%3Dother)%0A%09%09%09return jn.joint.m_collideConnected%3D%3Dfalse%3B%7D%0A%09%09%09return false%3B%7D%2CFreeze%3Afunction()%7Bthis.m_flags%7C%3Db2Body.e_frozenFlag%3Bthis.m_linearVelocity.SetZero()%3Bthis.m_angularVelocity%3D0.0%3Bfor(var s%3Dthis.m_shapeList%3Bs!%3Dnull%3Bs%3Ds.m_next)%0A%09%09%09%7Bs.DestroyProxy()%3B%7D%7D%2Cm_flags%3A0%2Cm_position%3Anew b2Vec2()%2Cm_rotation%3Anull%2Cm_R%3Anew b2Mat22(0)%2Cm_position0%3Anew b2Vec2()%2Cm_rotation0%3Anull%2Cm_linearVelocity%3Anull%2Cm_angularVelocity%3Anull%2Cm_force%3Anull%2Cm_torque%3Anull%2Cm_center%3Anull%2Cm_world%3Anull%2Cm_prev%3Anull%2Cm_next%3Anull%2Cm_shapeList%3Anull%2Cm_shapeCount%3A0%2Cm_jointList%3Anull%2Cm_contactList%3Anull%2Cm_mass%3Anull%2Cm_invMass%3Anull%2Cm_I%3Anull%2Cm_invI%3Anull%2Cm_linearDamping%3Anull%2Cm_angularDamping%3Anull%2Cm_sleepTime%3Anull%2Cm_userData%3Anull%7D%3Bb2Body.e_staticFlag%3D0x0001%3Bb2Body.e_frozenFlag%3D0x0002%3Bb2Body.e_islandFlag%3D0x0004%3Bb2Body.e_sleepFlag%3D0x0008%3Bb2Body.e_allowSleepFlag%3D0x0010%3Bb2Body.e_destroyFlag%3D0x0020%3B%0A%09%09%09var b2BodyDef%3DClass.create()%3Bb2BodyDef.prototype%3D%7Binitialize%3Afunction()%0A%09%09%09%7Bthis.shapes%3Dnew Array()%3Bthis.userData%3Dnull%3Bfor(var i%3D0%3Bi<b2Settings.b2_maxShapesPerBody%3Bi%2B%2B)%7Bthis.shapes%5Bi%5D%3Dnull%3B%7D%0A%09%09%09this.position%3Dnew b2Vec2(0.0%2C0.0)%3Bthis.rotation%3D0.0%3Bthis.linearVelocity%3Dnew b2Vec2(0.0%2C0.0)%3Bthis.angularVelocity%3D0.0%3Bthis.linearDamping%3D0.0%3Bthis.angularDamping%3D0.0%3Bthis.allowSleep%3Dtrue%3Bthis.isSleeping%3Dfalse%3Bthis.preventRotation%3Dfalse%3B%7D%2CuserData%3Anull%2Cshapes%3Anew Array()%2Cposition%3Anull%2Crotation%3Anull%2ClinearVelocity%3Anull%2CangularVelocity%3Anull%2ClinearDamping%3Anull%2CangularDamping%3Anull%2CallowSleep%3Anull%2CisSleeping%3Anull%2CpreventRotation%3Anull%2CAddShape%3Afunction(shape)%0A%09%09%09%7Bfor(var i%3D0%3Bi<b2Settings.b2_maxShapesPerBody%3B%2B%2Bi)%0A%09%09%09%7Bif(this.shapes%5Bi%5D%3D%3Dnull)%0A%09%09%09%7Bthis.shapes%5Bi%5D%3Dshape%3Bbreak%3B%7D%7D%7D%7D%3B%0A%09%09%09var b2CollisionFilter%3DClass.create()%3Bb2CollisionFilter.prototype%3D%7BShouldCollide%3Afunction(shape1%2Cshape2)%7Bif(shape1.m_groupIndex%3D%3Dshape2.m_groupIndex%26%26shape1.m_groupIndex!%3D0)%0A%09%09%09%7Breturn shape1.m_groupIndex>0%3B%7D%0A%09%09%09var collide%3D(shape1.m_maskBits%26shape2.m_categoryBits)!%3D0%26%26(shape1.m_categoryBits%26shape2.m_maskBits)!%3D0%3Breturn collide%3B%7D%2Cinitialize%3Afunction()%7B%7D%7D%3Bb2CollisionFilter.b2_defaultFilter%3Dnew b2CollisionFilter%3B%0A%09%09%09var b2Island%3DClass.create()%3Bb2Island.prototype%3D%7Binitialize%3Afunction(bodyCapacity%2CcontactCapacity%2CjointCapacity%2Callocator)%0A%09%09%09%7Bvar i%3D0%3Bthis.m_bodyCapacity%3DbodyCapacity%3Bthis.m_contactCapacity%3DcontactCapacity%3Bthis.m_jointCapacity%3DjointCapacity%3Bthis.m_bodyCount%3D0%3Bthis.m_contactCount%3D0%3Bthis.m_jointCount%3D0%3Bthis.m_bodies%3Dnew Array(bodyCapacity)%3Bfor(i%3D0%3Bi<bodyCapacity%3Bi%2B%2B)%0A%09%09%09this.m_bodies%5Bi%5D%3Dnull%3Bthis.m_contacts%3Dnew Array(contactCapacity)%3Bfor(i%3D0%3Bi<contactCapacity%3Bi%2B%2B)%0A%09%09%09this.m_contacts%5Bi%5D%3Dnull%3Bthis.m_joints%3Dnew Array(jointCapacity)%3Bfor(i%3D0%3Bi<jointCapacity%3Bi%2B%2B)%0A%09%09%09this.m_joints%5Bi%5D%3Dnull%3Bthis.m_allocator%3Dallocator%3B%7D%2CClear%3Afunction()%0A%09%09%09%7Bthis.m_bodyCount%3D0%3Bthis.m_contactCount%3D0%3Bthis.m_jointCount%3D0%3B%7D%2CSolve%3Afunction(step%2Cgravity)%0A%09%09%09%7Bvar i%3D0%3Bvar b%3Bfor(i%3D0%3Bi<this.m_bodyCount%3B%2B%2Bi)%0A%09%09%09%7Bb%3Dthis.m_bodies%5Bi%5D%3Bif(b.m_invMass%3D%3D0.0)%0A%09%09%09continue%3Bb.m_linearVelocity.Add(b2Math.MulFV(step.dt%2Cb2Math.AddVV(gravity%2Cb2Math.MulFV(b.m_invMass%2Cb.m_force))))%3Bb.m_angularVelocity%2B%3Dstep.dt*b.m_invI*b.m_torque%3Bb.m_linearVelocity.Multiply(b.m_linearDamping)%3Bb.m_angularVelocity*%3Db.m_angularDamping%3Bb.m_position0.SetV(b.m_position)%3Bb.m_rotation0%3Db.m_rotation%3B%7D%0A%09%09%09var contactSolver%3Dnew b2ContactSolver(this.m_contacts%2Cthis.m_contactCount%2Cthis.m_allocator)%3BcontactSolver.PreSolve()%3Bfor(i%3D0%3Bi<this.m_jointCount%3B%2B%2Bi)%0A%09%09%09%7Bthis.m_joints%5Bi%5D.PrepareVelocitySolver()%3B%7D%0A%09%09%09for(i%3D0%3Bi<step.iterations%3B%2B%2Bi)%0A%09%09%09%7BcontactSolver.SolveVelocityConstraints()%3Bfor(var j%3D0%3Bj<this.m_jointCount%3B%2B%2Bj)%0A%09%09%09%7Bthis.m_joints%5Bj%5D.SolveVelocityConstraints(step)%3B%7D%7D%0A%09%09%09for(i%3D0%3Bi<this.m_bodyCount%3B%2B%2Bi)%0A%09%09%09%7Bb%3Dthis.m_bodies%5Bi%5D%3Bif(b.m_invMass%3D%3D0.0)%0A%09%09%09continue%3Bb.m_position.x%2B%3Dstep.dt*b.m_linearVelocity.x%3Bb.m_position.y%2B%3Dstep.dt*b.m_linearVelocity.y%3Bb.m_rotation%2B%3Dstep.dt*b.m_angularVelocity%3Bb.m_R.Set(b.m_rotation)%3B%7D%0A%09%09%09for(i%3D0%3Bi<this.m_jointCount%3B%2B%2Bi)%0A%09%09%09%7Bthis.m_joints%5Bi%5D.PreparePositionSolver()%3B%7D%0A%09%09%09if(b2World.s_enablePositionCorrection)%0A%09%09%09%7Bfor(b2Island.m_positionIterationCount%3D0%3Bb2Island.m_positionIterationCount<step.iterations%3B%2B%2Bb2Island.m_positionIterationCount)%0A%09%09%09%7Bvar contactsOkay%3DcontactSolver.SolvePositionConstraints(b2Settings.b2_contactBaumgarte)%3Bvar jointsOkay%3Dtrue%3Bfor(i%3D0%3Bi<this.m_jointCount%3B%2B%2Bi)%0A%09%09%09%7Bvar jointOkay%3Dthis.m_joints%5Bi%5D.SolvePositionConstraints()%3BjointsOkay%3DjointsOkay%26%26jointOkay%3B%7D%0A%09%09%09if(contactsOkay%26%26jointsOkay)%0A%09%09%09%7Bbreak%3B%7D%7D%7D%0A%09%09%09contactSolver.PostSolve()%3Bfor(i%3D0%3Bi<this.m_bodyCount%3B%2B%2Bi)%0A%09%09%09%7Bb%3Dthis.m_bodies%5Bi%5D%3Bif(b.m_invMass%3D%3D0.0)%0A%09%09%09continue%3Bb.m_R.Set(b.m_rotation)%3Bb.SynchronizeShapes()%3Bb.m_force.Set(0.0%2C0.0)%3Bb.m_torque%3D0.0%3B%7D%7D%2CUpdateSleep%3Afunction(dt)%0A%09%09%09%7Bvar i%3D0%3Bvar b%3Bvar minSleepTime%3DNumber.MAX_VALUE%3Bvar linTolSqr%3Db2Settings.b2_linearSleepTolerance*b2Settings.b2_linearSleepTolerance%3Bvar angTolSqr%3Db2Settings.b2_angularSleepTolerance*b2Settings.b2_angularSleepTolerance%3Bfor(i%3D0%3Bi<this.m_bodyCount%3B%2B%2Bi)%0A%09%09%09%7Bb%3Dthis.m_bodies%5Bi%5D%3Bif(b.m_invMass%3D%3D0.0)%0A%09%09%09%7Bcontinue%3B%7D%0A%09%09%09if((b.m_flags%26b2Body.e_allowSleepFlag)%3D%3D0)%0A%09%09%09%7Bb.m_sleepTime%3D0.0%3BminSleepTime%3D0.0%3B%7D%0A%09%09%09if((b.m_flags%26b2Body.e_allowSleepFlag)%3D%3D0%7C%7Cb.m_angularVelocity*b.m_angularVelocity>angTolSqr%7C%7Cb2Math.b2Dot(b.m_linearVelocity%2Cb.m_linearVelocity)>linTolSqr)%0A%09%09%09%7Bb.m_sleepTime%3D0.0%3BminSleepTime%3D0.0%3B%7D%0A%09%09%09else%0A%09%09%09%7Bb.m_sleepTime%2B%3Ddt%3BminSleepTime%3Db2Math.b2Min(minSleepTime%2Cb.m_sleepTime)%3B%7D%7D%0A%09%09%09if(minSleepTime>%3Db2Settings.b2_timeToSleep)%0A%09%09%09%7Bfor(i%3D0%3Bi<this.m_bodyCount%3B%2B%2Bi)%0A%09%09%09%7Bb%3Dthis.m_bodies%5Bi%5D%3Bb.m_flags%7C%3Db2Body.e_sleepFlag%3B%7D%7D%7D%2CAddBody%3Afunction(body)%0A%09%09%09%7Bthis.m_bodies%5Bthis.m_bodyCount%2B%2B%5D%3Dbody%3B%7D%2CAddContact%3Afunction(contact)%0A%09%09%09%7Bthis.m_contacts%5Bthis.m_contactCount%2B%2B%5D%3Dcontact%3B%7D%2CAddJoint%3Afunction(joint)%0A%09%09%09%7Bthis.m_joints%5Bthis.m_jointCount%2B%2B%5D%3Djoint%3B%7D%2Cm_allocator%3Anull%2Cm_bodies%3Anull%2Cm_contacts%3Anull%2Cm_joints%3Anull%2Cm_bodyCount%3A0%2Cm_jointCount%3A0%2Cm_contactCount%3A0%2Cm_bodyCapacity%3A0%2Cm_contactCapacity%3A0%2Cm_jointCapacity%3A0%2Cm_positionError%3Anull%7D%3Bb2Island.m_positionIterationCount%3D0%3B%0A%09%09%09var b2TimeStep%3DClass.create()%3Bb2TimeStep.prototype%3D%7Bdt%3Anull%2Cinv_dt%3Anull%2Citerations%3A0%2Cinitialize%3Afunction()%7B%7D%7D%3B%0A%09%09%09var b2ContactNode%3DClass.create()%3Bb2ContactNode.prototype%3D%7Bother%3Anull%2Ccontact%3Anull%2Cprev%3Anull%2Cnext%3Anull%2Cinitialize%3Afunction()%7B%7D%7D%3B%0A%09%09%09var b2Contact%3DClass.create()%3Bb2Contact.prototype%3D%7BGetManifolds%3Afunction()%7Breturn null%7D%2CGetManifoldCount%3Afunction()%0A%09%09%09%7Breturn this.m_manifoldCount%3B%7D%2CGetNext%3Afunction()%7Breturn this.m_next%3B%7D%2CGetShape1%3Afunction()%7Breturn this.m_shape1%3B%7D%2CGetShape2%3Afunction()%7Breturn this.m_shape2%3B%7D%2Cinitialize%3Afunction(s1%2Cs2)%0A%09%09%09%7Bthis.m_node1%3Dnew b2ContactNode()%3Bthis.m_node2%3Dnew b2ContactNode()%3Bthis.m_flags%3D0%3Bif(!s1%7C%7C!s2)%7Bthis.m_shape1%3Dnull%3Bthis.m_shape2%3Dnull%3Breturn%3B%7D%0A%09%09%09this.m_shape1%3Ds1%3Bthis.m_shape2%3Ds2%3Bthis.m_manifoldCount%3D0%3Bthis.m_friction%3DMath.sqrt(this.m_shape1.m_friction*this.m_shape2.m_friction)%3Bthis.m_restitution%3Db2Math.b2Max(this.m_shape1.m_restitution%2Cthis.m_shape2.m_restitution)%3Bthis.m_prev%3Dnull%3Bthis.m_next%3Dnull%3Bthis.m_node1.contact%3Dnull%3Bthis.m_node1.prev%3Dnull%3Bthis.m_node1.next%3Dnull%3Bthis.m_node1.other%3Dnull%3Bthis.m_node2.contact%3Dnull%3Bthis.m_node2.prev%3Dnull%3Bthis.m_node2.next%3Dnull%3Bthis.m_node2.other%3Dnull%3B%7D%2CEvaluate%3Afunction()%7B%7D%2Cm_flags%3A0%2Cm_prev%3Anull%2Cm_next%3Anull%2Cm_node1%3Anew b2ContactNode()%2Cm_node2%3Anew b2ContactNode()%2Cm_shape1%3Anull%2Cm_shape2%3Anull%2Cm_manifoldCount%3A0%2Cm_friction%3Anull%2Cm_restitution%3Anull%7D%3Bb2Contact.e_islandFlag%3D0x0001%3Bb2Contact.e_destroyFlag%3D0x0002%3Bb2Contact.AddType%3Dfunction(createFcn%2CdestroyFcn%2Ctype1%2Ctype2)%0A%09%09%09%7Bb2Contact.s_registers%5Btype1%5D%5Btype2%5D.createFcn%3DcreateFcn%3Bb2Contact.s_registers%5Btype1%5D%5Btype2%5D.destroyFcn%3DdestroyFcn%3Bb2Contact.s_registers%5Btype1%5D%5Btype2%5D.primary%3Dtrue%3Bif(type1!%3Dtype2)%0A%09%09%09%7Bb2Contact.s_registers%5Btype2%5D%5Btype1%5D.createFcn%3DcreateFcn%3Bb2Contact.s_registers%5Btype2%5D%5Btype1%5D.destroyFcn%3DdestroyFcn%3Bb2Contact.s_registers%5Btype2%5D%5Btype1%5D.primary%3Dfalse%3B%7D%7D%3Bb2Contact.InitializeRegisters%3Dfunction()%7Bb2Contact.s_registers%3Dnew Array(b2Shape.e_shapeTypeCount)%3Bfor(var i%3D0%3Bi<b2Shape.e_shapeTypeCount%3Bi%2B%2B)%7Bb2Contact.s_registers%5Bi%5D%3Dnew Array(b2Shape.e_shapeTypeCount)%3Bfor(var j%3D0%3Bj<b2Shape.e_shapeTypeCount%3Bj%2B%2B)%7Bb2Contact.s_registers%5Bi%5D%5Bj%5D%3Dnew b2ContactRegister()%3B%7D%7D%0A%09%09%09b2Contact.AddType(b2CircleContact.Create%2Cb2CircleContact.Destroy%2Cb2Shape.e_circleShape%2Cb2Shape.e_circleShape)%3Bb2Contact.AddType(b2PolyAndCircleContact.Create%2Cb2PolyAndCircleContact.Destroy%2Cb2Shape.e_polyShape%2Cb2Shape.e_circleShape)%3Bb2Contact.AddType(b2PolyContact.Create%2Cb2PolyContact.Destroy%2Cb2Shape.e_polyShape%2Cb2Shape.e_polyShape)%3B%7D%3Bb2Contact.Create%3Dfunction(shape1%2Cshape2%2Callocator)%7Bif(b2Contact.s_initialized%3D%3Dfalse)%0A%09%09%09%7Bb2Contact.InitializeRegisters()%3Bb2Contact.s_initialized%3Dtrue%3B%7D%0A%09%09%09var type1%3Dshape1.m_type%3Bvar type2%3Dshape2.m_type%3Bvar createFcn%3Db2Contact.s_registers%5Btype1%5D%5Btype2%5D.createFcn%3Bif(createFcn)%0A%09%09%09%7Bif(b2Contact.s_registers%5Btype1%5D%5Btype2%5D.primary)%0A%09%09%09%7Breturn createFcn(shape1%2Cshape2%2Callocator)%3B%7D%0A%09%09%09else%0A%09%09%09%7Bvar c%3DcreateFcn(shape2%2Cshape1%2Callocator)%3Bfor(var i%3D0%3Bi<c.GetManifoldCount()%3B%2B%2Bi)%0A%09%09%09%7Bvar m%3Dc.GetManifolds()%5Bi%5D%3Bm.normal%3Dm.normal.Negative()%3B%7D%0A%09%09%09return c%3B%7D%7D%0A%09%09%09else%0A%09%09%09%7Breturn null%3B%7D%7D%3Bb2Contact.Destroy%3Dfunction(contact%2Callocator)%7Bif(contact.GetManifoldCount()>0)%0A%09%09%09%7Bcontact.m_shape1.m_body.WakeUp()%3Bcontact.m_shape2.m_body.WakeUp()%3B%7D%0A%09%09%09var type1%3Dcontact.m_shape1.m_type%3Bvar type2%3Dcontact.m_shape2.m_type%3Bvar destroyFcn%3Db2Contact.s_registers%5Btype1%5D%5Btype2%5D.destroyFcn%3BdestroyFcn(contact%2Callocator)%3B%7D%3Bb2Contact.s_registers%3Dnull%3Bb2Contact.s_initialized%3Dfalse%3B%0A%09%09%09var b2ContactConstraint%3DClass.create()%3Bb2ContactConstraint.prototype%3D%7Binitialize%3Afunction()%7Bthis.normal%3Dnew b2Vec2()%3Bthis.points%3Dnew Array(b2Settings.b2_maxManifoldPoints)%3Bfor(var i%3D0%3Bi<b2Settings.b2_maxManifoldPoints%3Bi%2B%2B)%7Bthis.points%5Bi%5D%3Dnew b2ContactConstraintPoint()%3B%7D%7D%2Cpoints%3Anull%2Cnormal%3Anew b2Vec2()%2Cmanifold%3Anull%2Cbody1%3Anull%2Cbody2%3Anull%2Cfriction%3Anull%2Crestitution%3Anull%2CpointCount%3A0%7D%3B%0A%09%09%09var b2ContactConstraintPoint%3DClass.create()%3Bb2ContactConstraintPoint.prototype%3D%7BlocalAnchor1%3Anew b2Vec2()%2ClocalAnchor2%3Anew b2Vec2()%2CnormalImpulse%3Anull%2CtangentImpulse%3Anull%2CpositionImpulse%3Anull%2CnormalMass%3Anull%2CtangentMass%3Anull%2Cseparation%3Anull%2CvelocityBias%3Anull%2Cinitialize%3Afunction()%7Bthis.localAnchor1%3Dnew b2Vec2()%3Bthis.localAnchor2%3Dnew b2Vec2()%3B%7D%7D%3B%0A%09%09%09var b2ContactRegister%3DClass.create()%3Bb2ContactRegister.prototype%3D%7BcreateFcn%3Anull%2CdestroyFcn%3Anull%2Cprimary%3Anull%2Cinitialize%3Afunction()%7B%7D%7D%3B%0A%09%09%09var b2ContactSolver%3DClass.create()%3Bb2ContactSolver.prototype%3D%7Binitialize%3Afunction(contacts%2CcontactCount%2Callocator)%7Bthis.m_constraints%3Dnew Array()%3Bthis.m_allocator%3Dallocator%3Bvar i%3D0%3Bvar tVec%3Bvar tMat%3Bthis.m_constraintCount%3D0%3Bfor(i%3D0%3Bi<contactCount%3B%2B%2Bi)%0A%09%09%09%7Bthis.m_constraintCount%2B%3Dcontacts%5Bi%5D.GetManifoldCount()%3B%7D%0A%09%09%09for(i%3D0%3Bi<this.m_constraintCount%3Bi%2B%2B)%7Bthis.m_constraints%5Bi%5D%3Dnew b2ContactConstraint()%3B%7D%0A%09%09%09var count%3D0%3Bfor(i%3D0%3Bi<contactCount%3B%2B%2Bi)%0A%09%09%09%7Bvar contact%3Dcontacts%5Bi%5D%3Bvar b1%3Dcontact.m_shape1.m_body%3Bvar b2%3Dcontact.m_shape2.m_body%3Bvar manifoldCount%3Dcontact.GetManifoldCount()%3Bvar manifolds%3Dcontact.GetManifolds()%3Bvar friction%3Dcontact.m_friction%3Bvar restitution%3Dcontact.m_restitution%3Bvar v1X%3Db1.m_linearVelocity.x%3Bvar v1Y%3Db1.m_linearVelocity.y%3Bvar v2X%3Db2.m_linearVelocity.x%3Bvar v2Y%3Db2.m_linearVelocity.y%3Bvar w1%3Db1.m_angularVelocity%3Bvar w2%3Db2.m_angularVelocity%3Bfor(var j%3D0%3Bj<manifoldCount%3B%2B%2Bj)%0A%09%09%09%7Bvar manifold%3Dmanifolds%5Bj%5D%3Bvar normalX%3Dmanifold.normal.x%3Bvar normalY%3Dmanifold.normal.y%3Bvar c%3Dthis.m_constraints%5Bcount%5D%3Bc.body1%3Db1%3Bc.body2%3Db2%3Bc.manifold%3Dmanifold%3Bc.normal.x%3DnormalX%3Bc.normal.y%3DnormalY%3Bc.pointCount%3Dmanifold.pointCount%3Bc.friction%3Dfriction%3Bc.restitution%3Drestitution%3Bfor(var k%3D0%3Bk<c.pointCount%3B%2B%2Bk)%0A%09%09%09%7Bvar cp%3Dmanifold.points%5Bk%5D%3Bvar ccp%3Dc.points%5Bk%5D%3Bccp.normalImpulse%3Dcp.normalImpulse%3Bccp.tangentImpulse%3Dcp.tangentImpulse%3Bccp.separation%3Dcp.separation%3Bvar r1X%3Dcp.position.x-b1.m_position.x%3Bvar r1Y%3Dcp.position.y-b1.m_position.y%3Bvar r2X%3Dcp.position.x-b2.m_position.x%3Bvar r2Y%3Dcp.position.y-b2.m_position.y%3BtVec%3Dccp.localAnchor1%3BtMat%3Db1.m_R%3BtVec.x%3Dr1X*tMat.col1.x%2Br1Y*tMat.col1.y%3BtVec.y%3Dr1X*tMat.col2.x%2Br1Y*tMat.col2.y%3BtVec%3Dccp.localAnchor2%3BtMat%3Db2.m_R%3BtVec.x%3Dr2X*tMat.col1.x%2Br2Y*tMat.col1.y%3BtVec.y%3Dr2X*tMat.col2.x%2Br2Y*tMat.col2.y%3Bvar r1Sqr%3Dr1X*r1X%2Br1Y*r1Y%3Bvar r2Sqr%3Dr2X*r2X%2Br2Y*r2Y%3Bvar rn1%3Dr1X*normalX%2Br1Y*normalY%3Bvar rn2%3Dr2X*normalX%2Br2Y*normalY%3Bvar kNormal%3Db1.m_invMass%2Bb2.m_invMass%3BkNormal%2B%3Db1.m_invI*(r1Sqr-rn1*rn1)%2Bb2.m_invI*(r2Sqr-rn2*rn2)%3Bccp.normalMass%3D1.0%2FkNormal%3Bvar tangentX%3DnormalY%0A%09%09%09var tangentY%3D-normalX%3Bvar rt1%3Dr1X*tangentX%2Br1Y*tangentY%3Bvar rt2%3Dr2X*tangentX%2Br2Y*tangentY%3Bvar kTangent%3Db1.m_invMass%2Bb2.m_invMass%3BkTangent%2B%3Db1.m_invI*(r1Sqr-rt1*rt1)%2Bb2.m_invI*(r2Sqr-rt2*rt2)%3Bccp.tangentMass%3D1.0%2FkTangent%3Bccp.velocityBias%3D0.0%3Bif(ccp.separation>0.0)%0A%09%09%09%7Bccp.velocityBias%3D-60.0*ccp.separation%3B%7D%0A%09%09%09var tX%3Dv2X%2B(-w2*r2Y)-v1X-(-w1*r1Y)%3Bvar tY%3Dv2Y%2B(w2*r2X)-v1Y-(w1*r1X)%3Bvar vRel%3Dc.normal.x*tX%2Bc.normal.y*tY%3Bif(vRel<-b2Settings.b2_velocityThreshold)%0A%09%09%09%7Bccp.velocityBias%2B%3D-c.restitution*vRel%3B%7D%7D%0A%09%09%09%2B%2Bcount%3B%7D%7D%7D%2CPreSolve%3Afunction()%7Bvar tVec%3Bvar tVec2%3Bvar tMat%3Bfor(var i%3D0%3Bi<this.m_constraintCount%3B%2B%2Bi)%0A%09%09%09%7Bvar c%3Dthis.m_constraints%5Bi%5D%3Bvar b1%3Dc.body1%3Bvar b2%3Dc.body2%3Bvar invMass1%3Db1.m_invMass%3Bvar invI1%3Db1.m_invI%3Bvar invMass2%3Db2.m_invMass%3Bvar invI2%3Db2.m_invI%3Bvar normalX%3Dc.normal.x%3Bvar normalY%3Dc.normal.y%3Bvar tangentX%3DnormalY%3Bvar tangentY%3D-normalX%3Bvar j%3D0%3Bvar tCount%3D0%3Bif(b2World.s_enableWarmStarting)%0A%09%09%09%7BtCount%3Dc.pointCount%3Bfor(j%3D0%3Bj<tCount%3B%2B%2Bj)%0A%09%09%09%7Bvar ccp%3Dc.points%5Bj%5D%3Bvar PX%3Dccp.normalImpulse*normalX%2Bccp.tangentImpulse*tangentX%3Bvar PY%3Dccp.normalImpulse*normalY%2Bccp.tangentImpulse*tangentY%3BtMat%3Db1.m_R%3BtVec%3Dccp.localAnchor1%3Bvar r1X%3DtMat.col1.x*tVec.x%2BtMat.col2.x*tVec.y%3Bvar r1Y%3DtMat.col1.y*tVec.x%2BtMat.col2.y*tVec.y%3BtMat%3Db2.m_R%3BtVec%3Dccp.localAnchor2%3Bvar r2X%3DtMat.col1.x*tVec.x%2BtMat.col2.x*tVec.y%3Bvar r2Y%3DtMat.col1.y*tVec.x%2BtMat.col2.y*tVec.y%3Bb1.m_angularVelocity-%3DinvI1*(r1X*PY-r1Y*PX)%3Bb1.m_linearVelocity.x-%3DinvMass1*PX%3Bb1.m_linearVelocity.y-%3DinvMass1*PY%3Bb2.m_angularVelocity%2B%3DinvI2*(r2X*PY-r2Y*PX)%3Bb2.m_linearVelocity.x%2B%3DinvMass2*PX%3Bb2.m_linearVelocity.y%2B%3DinvMass2*PY%3Bccp.positionImpulse%3D0.0%3B%7D%7D%0A%09%09%09else%7BtCount%3Dc.pointCount%3Bfor(j%3D0%3Bj<tCount%3B%2B%2Bj)%0A%09%09%09%7Bvar ccp2%3Dc.points%5Bj%5D%3Bccp2.normalImpulse%3D0.0%3Bccp2.tangentImpulse%3D0.0%3Bccp2.positionImpulse%3D0.0%3B%7D%7D%7D%7D%2CSolveVelocityConstraints%3Afunction()%7Bvar j%3D0%3Bvar ccp%3Bvar r1X%3Bvar r1Y%3Bvar r2X%3Bvar r2Y%3Bvar dvX%3Bvar dvY%3Bvar lambda%3Bvar newImpulse%3Bvar PX%3Bvar PY%3Bvar tMat%3Bvar tVec%3Bfor(var i%3D0%3Bi<this.m_constraintCount%3B%2B%2Bi)%0A%09%09%09%7Bvar c%3Dthis.m_constraints%5Bi%5D%3Bvar b1%3Dc.body1%3Bvar b2%3Dc.body2%3Bvar b1_angularVelocity%3Db1.m_angularVelocity%3Bvar b1_linearVelocity%3Db1.m_linearVelocity%3Bvar b2_angularVelocity%3Db2.m_angularVelocity%3Bvar b2_linearVelocity%3Db2.m_linearVelocity%3Bvar invMass1%3Db1.m_invMass%3Bvar invI1%3Db1.m_invI%3Bvar invMass2%3Db2.m_invMass%3Bvar invI2%3Db2.m_invI%3Bvar normalX%3Dc.normal.x%3Bvar normalY%3Dc.normal.y%3Bvar tangentX%3DnormalY%3Bvar tangentY%3D-normalX%3Bvar tCount%3Dc.pointCount%3Bfor(j%3D0%3Bj<tCount%3B%2B%2Bj)%0A%09%09%09%7Bccp%3Dc.points%5Bj%5D%3BtMat%3Db1.m_R%3BtVec%3Dccp.localAnchor1%3Br1X%3DtMat.col1.x*tVec.x%2BtMat.col2.x*tVec.y%0A%09%09%09r1Y%3DtMat.col1.y*tVec.x%2BtMat.col2.y*tVec.y%0A%09%09%09tMat%3Db2.m_R%3BtVec%3Dccp.localAnchor2%3Br2X%3DtMat.col1.x*tVec.x%2BtMat.col2.x*tVec.y%0A%09%09%09r2Y%3DtMat.col1.y*tVec.x%2BtMat.col2.y*tVec.y%0A%09%09%09dvX%3Db2_linearVelocity.x%2B(-b2_angularVelocity*r2Y)-b1_linearVelocity.x-(-b1_angularVelocity*r1Y)%3BdvY%3Db2_linearVelocity.y%2B(b2_angularVelocity*r2X)-b1_linearVelocity.y-(b1_angularVelocity*r1X)%3Bvar vn%3DdvX*normalX%2BdvY*normalY%3Blambda%3D-ccp.normalMass*(vn-ccp.velocityBias)%3BnewImpulse%3Db2Math.b2Max(ccp.normalImpulse%2Blambda%2C0.0)%3Blambda%3DnewImpulse-ccp.normalImpulse%3BPX%3Dlambda*normalX%3BPY%3Dlambda*normalY%3Bb1_linearVelocity.x-%3DinvMass1*PX%3Bb1_linearVelocity.y-%3DinvMass1*PY%3Bb1_angularVelocity-%3DinvI1*(r1X*PY-r1Y*PX)%3Bb2_linearVelocity.x%2B%3DinvMass2*PX%3Bb2_linearVelocity.y%2B%3DinvMass2*PY%3Bb2_angularVelocity%2B%3DinvI2*(r2X*PY-r2Y*PX)%3Bccp.normalImpulse%3DnewImpulse%3BdvX%3Db2_linearVelocity.x%2B(-b2_angularVelocity*r2Y)-b1_linearVelocity.x-(-b1_angularVelocity*r1Y)%3BdvY%3Db2_linearVelocity.y%2B(b2_angularVelocity*r2X)-b1_linearVelocity.y-(b1_angularVelocity*r1X)%3Bvar vt%3DdvX*tangentX%2BdvY*tangentY%3Blambda%3Dccp.tangentMass*(-vt)%3Bvar maxFriction%3Dc.friction*ccp.normalImpulse%3BnewImpulse%3Db2Math.b2Clamp(ccp.tangentImpulse%2Blambda%2C-maxFriction%2CmaxFriction)%3Blambda%3DnewImpulse-ccp.tangentImpulse%3BPX%3Dlambda*tangentX%3BPY%3Dlambda*tangentY%3Bb1_linearVelocity.x-%3DinvMass1*PX%3Bb1_linearVelocity.y-%3DinvMass1*PY%3Bb1_angularVelocity-%3DinvI1*(r1X*PY-r1Y*PX)%3Bb2_linearVelocity.x%2B%3DinvMass2*PX%3Bb2_linearVelocity.y%2B%3DinvMass2*PY%3Bb2_angularVelocity%2B%3DinvI2*(r2X*PY-r2Y*PX)%3Bccp.tangentImpulse%3DnewImpulse%3B%7D%0A%09%09%09b1.m_angularVelocity%3Db1_angularVelocity%3Bb2.m_angularVelocity%3Db2_angularVelocity%3B%7D%7D%2CSolvePositionConstraints%3Afunction(beta)%7Bvar minSeparation%3D0.0%3Bvar tMat%3Bvar tVec%3Bfor(var i%3D0%3Bi<this.m_constraintCount%3B%2B%2Bi)%0A%09%09%09%7Bvar c%3Dthis.m_constraints%5Bi%5D%3Bvar b1%3Dc.body1%3Bvar b2%3Dc.body2%3Bvar b1_position%3Db1.m_position%3Bvar b1_rotation%3Db1.m_rotation%3Bvar b2_position%3Db2.m_position%3Bvar b2_rotation%3Db2.m_rotation%3Bvar invMass1%3Db1.m_invMass%3Bvar invI1%3Db1.m_invI%3Bvar invMass2%3Db2.m_invMass%3Bvar invI2%3Db2.m_invI%3Bvar normalX%3Dc.normal.x%3Bvar normalY%3Dc.normal.y%3Bvar tangentX%3DnormalY%3Bvar tangentY%3D-normalX%3Bvar tCount%3Dc.pointCount%3Bfor(var j%3D0%3Bj<tCount%3B%2B%2Bj)%0A%09%09%09%7Bvar ccp%3Dc.points%5Bj%5D%3BtMat%3Db1.m_R%3BtVec%3Dccp.localAnchor1%3Bvar r1X%3DtMat.col1.x*tVec.x%2BtMat.col2.x*tVec.y%0A%09%09%09var r1Y%3DtMat.col1.y*tVec.x%2BtMat.col2.y*tVec.y%0A%09%09%09tMat%3Db2.m_R%3BtVec%3Dccp.localAnchor2%3Bvar r2X%3DtMat.col1.x*tVec.x%2BtMat.col2.x*tVec.y%0A%09%09%09var r2Y%3DtMat.col1.y*tVec.x%2BtMat.col2.y*tVec.y%0A%09%09%09var p1X%3Db1_position.x%2Br1X%3Bvar p1Y%3Db1_position.y%2Br1Y%3Bvar p2X%3Db2_position.x%2Br2X%3Bvar p2Y%3Db2_position.y%2Br2Y%3Bvar dpX%3Dp2X-p1X%3Bvar dpY%3Dp2Y-p1Y%3Bvar separation%3D(dpX*normalX%2BdpY*normalY)%2Bccp.separation%3BminSeparation%3Db2Math.b2Min(minSeparation%2Cseparation)%3Bvar C%3Dbeta*b2Math.b2Clamp(separation%2Bb2Settings.b2_linearSlop%2C-b2Settings.b2_maxLinearCorrection%2C0.0)%3Bvar dImpulse%3D-ccp.normalMass*C%3Bvar impulse0%3Dccp.positionImpulse%3Bccp.positionImpulse%3Db2Math.b2Max(impulse0%2BdImpulse%2C0.0)%3BdImpulse%3Dccp.positionImpulse-impulse0%3Bvar impulseX%3DdImpulse*normalX%3Bvar impulseY%3DdImpulse*normalY%3Bb1_position.x-%3DinvMass1*impulseX%3Bb1_position.y-%3DinvMass1*impulseY%3Bb1_rotation-%3DinvI1*(r1X*impulseY-r1Y*impulseX)%3Bb1.m_R.Set(b1_rotation)%3Bb2_position.x%2B%3DinvMass2*impulseX%3Bb2_position.y%2B%3DinvMass2*impulseY%3Bb2_rotation%2B%3DinvI2*(r2X*impulseY-r2Y*impulseX)%3Bb2.m_R.Set(b2_rotation)%3B%7D%0A%09%09%09b1.m_rotation%3Db1_rotation%3Bb2.m_rotation%3Db2_rotation%3B%7D%0A%09%09%09return minSeparation>%3D-b2Settings.b2_linearSlop%3B%7D%2CPostSolve%3Afunction()%7Bfor(var i%3D0%3Bi<this.m_constraintCount%3B%2B%2Bi)%0A%09%09%09%7Bvar c%3Dthis.m_constraints%5Bi%5D%3Bvar m%3Dc.manifold%3Bfor(var j%3D0%3Bj<c.pointCount%3B%2B%2Bj)%0A%09%09%09%7Bvar mPoint%3Dm.points%5Bj%5D%3Bvar cPoint%3Dc.points%5Bj%5D%3BmPoint.normalImpulse%3DcPoint.normalImpulse%3BmPoint.tangentImpulse%3DcPoint.tangentImpulse%3B%7D%7D%7D%2Cm_allocator%3Anull%2Cm_constraints%3Anew Array()%2Cm_constraintCount%3A0%7D%3B%0A%09%09%09var b2CircleContact%3DClass.create()%3BObject.extend(b2CircleContact.prototype%2Cb2Contact.prototype)%3BObject.extend(b2CircleContact.prototype%2C%7Binitialize%3Afunction(s1%2Cs2)%7Bthis.m_node1%3Dnew b2ContactNode()%3Bthis.m_node2%3Dnew b2ContactNode()%3Bthis.m_flags%3D0%3Bif(!s1%7C%7C!s2)%7Bthis.m_shape1%3Dnull%3Bthis.m_shape2%3Dnull%3Breturn%3B%7D%0A%09%09%09this.m_shape1%3Ds1%3Bthis.m_shape2%3Ds2%3Bthis.m_manifoldCount%3D0%3Bthis.m_friction%3DMath.sqrt(this.m_shape1.m_friction*this.m_shape2.m_friction)%3Bthis.m_restitution%3Db2Math.b2Max(this.m_shape1.m_restitution%2Cthis.m_shape2.m_restitution)%3Bthis.m_prev%3Dnull%3Bthis.m_next%3Dnull%3Bthis.m_node1.contact%3Dnull%3Bthis.m_node1.prev%3Dnull%3Bthis.m_node1.next%3Dnull%3Bthis.m_node1.other%3Dnull%3Bthis.m_node2.contact%3Dnull%3Bthis.m_node2.prev%3Dnull%3Bthis.m_node2.next%3Dnull%3Bthis.m_node2.other%3Dnull%3Bthis.m_manifold%3D%5Bnew b2Manifold()%5D%3Bthis.m_manifold%5B0%5D.pointCount%3D0%3Bthis.m_manifold%5B0%5D.points%5B0%5D.normalImpulse%3D0.0%3Bthis.m_manifold%5B0%5D.points%5B0%5D.tangentImpulse%3D0.0%3B%7D%2CEvaluate%3Afunction()%7Bb2Collision.b2CollideCircle(this.m_manifold%5B0%5D%2Cthis.m_shape1%2Cthis.m_shape2%2Cfalse)%3Bif(this.m_manifold%5B0%5D.pointCount>0)%0A%09%09%09%7Bthis.m_manifoldCount%3D1%3B%7D%0A%09%09%09else%0A%09%09%09%7Bthis.m_manifoldCount%3D0%3B%7D%7D%2CGetManifolds%3Afunction()%0A%09%09%09%7Breturn this.m_manifold%3B%7D%2Cm_manifold%3A%5Bnew b2Manifold()%5D%7D)%3Bb2CircleContact.Create%3Dfunction(shape1%2Cshape2%2Callocator)%7Breturn new b2CircleContact(shape1%2Cshape2)%3B%7D%3Bb2CircleContact.Destroy%3Dfunction(contact%2Callocator)%7B%7D%3B%0A%09%09%09var b2Conservative%3DClass.create()%3Bb2Conservative.prototype%3D%7Binitialize%3Afunction()%7B%7D%7D%0A%09%09%09b2Conservative.R1%3Dnew b2Mat22()%3Bb2Conservative.R2%3Dnew b2Mat22()%3Bb2Conservative.x1%3Dnew b2Vec2()%3Bb2Conservative.x2%3Dnew b2Vec2()%3Bb2Conservative.Conservative%3Dfunction(shape1%2Cshape2)%7Bvar body1%3Dshape1.GetBody()%3Bvar body2%3Dshape2.GetBody()%3Bvar v1X%3Dbody1.m_position.x-body1.m_position0.x%3Bvar v1Y%3Dbody1.m_position.y-body1.m_position0.y%3Bvar omega1%3Dbody1.m_rotation-body1.m_rotation0%3Bvar v2X%3Dbody2.m_position.x-body2.m_position0.x%3Bvar v2Y%3Dbody2.m_position.y-body2.m_position0.y%3Bvar omega2%3Dbody2.m_rotation-body2.m_rotation0%3Bvar r1%3Dshape1.GetMaxRadius()%3Bvar r2%3Dshape2.GetMaxRadius()%3Bvar p1StartX%3Dbody1.m_position0.x%3Bvar p1StartY%3Dbody1.m_position0.y%3Bvar a1Start%3Dbody1.m_rotation0%3Bvar p2StartX%3Dbody2.m_position0.x%3Bvar p2StartY%3Dbody2.m_position0.y%3Bvar a2Start%3Dbody2.m_rotation0%3Bvar p1X%3Dp1StartX%3Bvar p1Y%3Dp1StartY%3Bvar a1%3Da1Start%3Bvar p2X%3Dp2StartX%3Bvar p2Y%3Dp2StartY%3Bvar a2%3Da2Start%3Bb2Conservative.R1.Set(a1)%3Bb2Conservative.R2.Set(a2)%3Bshape1.QuickSync(p1%2Cb2Conservative.R1)%3Bshape2.QuickSync(p2%2Cb2Conservative.R2)%3Bvar s1%3D0.0%3Bvar maxIterations%3D10%3Bvar dX%3Bvar dY%3Bvar invRelativeVelocity%3D0.0%3Bvar hit%3Dtrue%3Bfor(var iter%3D0%3Biter<maxIterations%3B%2B%2Biter)%0A%09%09%09%7Bvar distance%3Db2Distance.Distance(b2Conservative.x1%2Cb2Conservative.x2%2Cshape1%2Cshape2)%3Bif(distance<b2Settings.b2_linearSlop)%0A%09%09%09%7Bif(iter%3D%3D0)%0A%09%09%09%7Bhit%3Dfalse%3B%7D%0A%09%09%09else%0A%09%09%09%7Bhit%3Dtrue%3B%7D%0A%09%09%09break%3B%7D%0A%09%09%09if(iter%3D%3D0)%0A%09%09%09%7BdX%3Db2Conservative.x2.x-b2Conservative.x1.x%3BdY%3Db2Conservative.x2.y-b2Conservative.x1.y%3Bvar dLen%3DMath.sqrt(dX*dX%2BdY*dY)%3Bvar relativeVelocity%3D(dX*(v1X-v2X)%2BdY*(v1Y-v2Y))%2BMath.abs(omega1)*r1%2BMath.abs(omega2)*r2%3Bif(Math.abs(relativeVelocity)<Number.MIN_VALUE)%0A%09%09%09%7Bhit%3Dfalse%3Bbreak%3B%7D%0A%09%09%09invRelativeVelocity%3D1.0%2FrelativeVelocity%3B%7D%0A%09%09%09var ds%3Ddistance*invRelativeVelocity%3Bvar s2%3Ds1%2Bds%3Bif(s2<0.0%7C%7C1.0<s2)%0A%09%09%09%7Bhit%3Dfalse%3Bbreak%3B%7D%0A%09%09%09if(s2<(1.0%2B100.0*Number.MIN_VALUE)*s1)%0A%09%09%09%7Bhit%3Dtrue%3Bbreak%3B%7D%0A%09%09%09s1%3Ds2%3Bp1X%3Dp1StartX%2Bs1*v1.x%3Bp1Y%3Dp1StartY%2Bs1*v1.y%3Ba1%3Da1Start%2Bs1*omega1%3Bp2X%3Dp2StartX%2Bs1*v2.x%3Bp2Y%3Dp2StartY%2Bs1*v2.y%3Ba2%3Da2Start%2Bs1*omega2%3Bb2Conservative.R1.Set(a1)%3Bb2Conservative.R2.Set(a2)%3Bshape1.QuickSync(p1%2Cb2Conservative.R1)%3Bshape2.QuickSync(p2%2Cb2Conservative.R2)%3B%7D%0A%09%09%09if(hit)%0A%09%09%09%7BdX%3Db2Conservative.x2.x-b2Conservative.x1.x%3BdY%3Db2Conservative.x2.y-b2Conservative.x1.y%3Bvar length%3DMath.sqrt(dX*dX%2BdY*dY)%3Bif(length>FLT_EPSILON)%0A%09%09%09%7Bd*%3Db2_linearSlop%2Flength%3B%7D%0A%09%09%09if(body1.IsStatic())%0A%09%09%09%7Bbody1.m_position.x%3Dp1X%3Bbody1.m_position.y%3Dp1Y%3B%7D%0A%09%09%09else%0A%09%09%09%7Bbody1.m_position.x%3Dp1X-dX%3Bbody1.m_position.y%3Dp1Y-dY%3B%7D%0A%09%09%09body1.m_rotation%3Da1%3Bbody1.m_R.Set(a1)%3Bbody1.QuickSyncShapes()%3Bif(body2.IsStatic())%0A%09%09%09%7Bbody2.m_position.x%3Dp2X%3Bbody2.m_position.y%3Dp2Y%3B%7D%0A%09%09%09else%0A%09%09%09%7Bbody2.m_position.x%3Dp2X%2BdX%3Bbody2.m_position.y%3Dp2Y%2BdY%3B%7D%0A%09%09%09body2.m_position.x%3Dp2X%2BdX%3Bbody2.m_position.y%3Dp2Y%2BdY%3Bbody2.m_rotation%3Da2%3Bbody2.m_R.Set(a2)%3Bbody2.QuickSyncShapes()%3Breturn true%3B%7D%0A%09%09%09shape1.QuickSync(body1.m_position%2Cbody1.m_R)%3Bshape2.QuickSync(body2.m_position%2Cbody2.m_R)%3Breturn false%3B%7D%3B%0A%09%09%09var b2NullContact%3DClass.create()%3BObject.extend(b2NullContact.prototype%2Cb2Contact.prototype)%3BObject.extend(b2NullContact.prototype%2C%7Binitialize%3Afunction(s1%2Cs2)%7Bthis.m_node1%3Dnew b2ContactNode()%3Bthis.m_node2%3Dnew b2ContactNode()%3Bthis.m_flags%3D0%3Bif(!s1%7C%7C!s2)%7Bthis.m_shape1%3Dnull%3Bthis.m_shape2%3Dnull%3Breturn%3B%7D%0A%09%09%09this.m_shape1%3Ds1%3Bthis.m_shape2%3Ds2%3Bthis.m_manifoldCount%3D0%3Bthis.m_friction%3DMath.sqrt(this.m_shape1.m_friction*this.m_shape2.m_friction)%3Bthis.m_restitution%3Db2Math.b2Max(this.m_shape1.m_restitution%2Cthis.m_shape2.m_restitution)%3Bthis.m_prev%3Dnull%3Bthis.m_next%3Dnull%3Bthis.m_node1.contact%3Dnull%3Bthis.m_node1.prev%3Dnull%3Bthis.m_node1.next%3Dnull%3Bthis.m_node1.other%3Dnull%3Bthis.m_node2.contact%3Dnull%3Bthis.m_node2.prev%3Dnull%3Bthis.m_node2.next%3Dnull%3Bthis.m_node2.other%3Dnull%3B%7D%2CEvaluate%3Afunction()%7B%7D%2CGetManifolds%3Afunction()%7Breturn null%3B%7D%7D)%3B%0A%09%09%09var b2PolyAndCircleContact%3DClass.create()%3BObject.extend(b2PolyAndCircleContact.prototype%2Cb2Contact.prototype)%3BObject.extend(b2PolyAndCircleContact.prototype%2C%7Binitialize%3Afunction(s1%2Cs2)%7Bthis.m_node1%3Dnew b2ContactNode()%3Bthis.m_node2%3Dnew b2ContactNode()%3Bthis.m_flags%3D0%3Bif(!s1%7C%7C!s2)%7Bthis.m_shape1%3Dnull%3Bthis.m_shape2%3Dnull%3Breturn%3B%7D%0A%09%09%09this.m_shape1%3Ds1%3Bthis.m_shape2%3Ds2%3Bthis.m_manifoldCount%3D0%3Bthis.m_friction%3DMath.sqrt(this.m_shape1.m_friction*this.m_shape2.m_friction)%3Bthis.m_restitution%3Db2Math.b2Max(this.m_shape1.m_restitution%2Cthis.m_shape2.m_restitution)%3Bthis.m_prev%3Dnull%3Bthis.m_next%3Dnull%3Bthis.m_node1.contact%3Dnull%3Bthis.m_node1.prev%3Dnull%3Bthis.m_node1.next%3Dnull%3Bthis.m_node1.other%3Dnull%3Bthis.m_node2.contact%3Dnull%3Bthis.m_node2.prev%3Dnull%3Bthis.m_node2.next%3Dnull%3Bthis.m_node2.other%3Dnull%3Bthis.m_manifold%3D%5Bnew b2Manifold()%5D%3Bb2Settings.b2Assert(this.m_shape1.m_type%3D%3Db2Shape.e_polyShape)%3Bb2Settings.b2Assert(this.m_shape2.m_type%3D%3Db2Shape.e_circleShape)%3Bthis.m_manifold%5B0%5D.pointCount%3D0%3Bthis.m_manifold%5B0%5D.points%5B0%5D.normalImpulse%3D0.0%3Bthis.m_manifold%5B0%5D.points%5B0%5D.tangentImpulse%3D0.0%3B%7D%2CEvaluate%3Afunction()%7Bb2Collision.b2CollidePolyAndCircle(this.m_manifold%5B0%5D%2Cthis.m_shape1%2Cthis.m_shape2%2Cfalse)%3Bif(this.m_manifold%5B0%5D.pointCount>0)%0A%09%09%09%7Bthis.m_manifoldCount%3D1%3B%7D%0A%09%09%09else%0A%09%09%09%7Bthis.m_manifoldCount%3D0%3B%7D%7D%2CGetManifolds%3Afunction()%0A%09%09%09%7Breturn this.m_manifold%3B%7D%2Cm_manifold%3A%5Bnew b2Manifold()%5D%7D)%0A%09%09%09b2PolyAndCircleContact.Create%3Dfunction(shape1%2Cshape2%2Callocator)%7Breturn new b2PolyAndCircleContact(shape1%2Cshape2)%3B%7D%3Bb2PolyAndCircleContact.Destroy%3Dfunction(contact%2Callocator)%7B%7D%3B%0A%09%09%09var b2PolyContact%3DClass.create()%3BObject.extend(b2PolyContact.prototype%2Cb2Contact.prototype)%3BObject.extend(b2PolyContact.prototype%2C%7Binitialize%3Afunction(s1%2Cs2)%7Bthis.m_node1%3Dnew b2ContactNode()%3Bthis.m_node2%3Dnew b2ContactNode()%3Bthis.m_flags%3D0%3Bif(!s1%7C%7C!s2)%7Bthis.m_shape1%3Dnull%3Bthis.m_shape2%3Dnull%3Breturn%3B%7D%0A%09%09%09this.m_shape1%3Ds1%3Bthis.m_shape2%3Ds2%3Bthis.m_manifoldCount%3D0%3Bthis.m_friction%3DMath.sqrt(this.m_shape1.m_friction*this.m_shape2.m_friction)%3Bthis.m_restitution%3Db2Math.b2Max(this.m_shape1.m_restitution%2Cthis.m_shape2.m_restitution)%3Bthis.m_prev%3Dnull%3Bthis.m_next%3Dnull%3Bthis.m_node1.contact%3Dnull%3Bthis.m_node1.prev%3Dnull%3Bthis.m_node1.next%3Dnull%3Bthis.m_node1.other%3Dnull%3Bthis.m_node2.contact%3Dnull%3Bthis.m_node2.prev%3Dnull%3Bthis.m_node2.next%3Dnull%3Bthis.m_node2.other%3Dnull%3Bthis.m0%3Dnew b2Manifold()%3Bthis.m_manifold%3D%5Bnew b2Manifold()%5D%3Bthis.m_manifold%5B0%5D.pointCount%3D0%3B%7D%2Cm0%3Anew b2Manifold()%2CEvaluate%3Afunction()%7Bvar tMani%3Dthis.m_manifold%5B0%5D%3Bvar tPoints%3Dthis.m0.points%3Bfor(var k%3D0%3Bk<tMani.pointCount%3Bk%2B%2B)%7Bvar tPoint%3DtPoints%5Bk%5D%3Bvar tPoint0%3DtMani.points%5Bk%5D%3BtPoint.normalImpulse%3DtPoint0.normalImpulse%3BtPoint.tangentImpulse%3DtPoint0.tangentImpulse%3BtPoint.id%3DtPoint0.id.Copy()%3B%7D%0A%09%09%09this.m0.pointCount%3DtMani.pointCount%3Bb2Collision.b2CollidePoly(tMani%2Cthis.m_shape1%2Cthis.m_shape2%2Cfalse)%3Bif(tMani.pointCount>0)%0A%09%09%09%7Bvar match%3D%5Bfalse%2Cfalse%5D%3Bfor(var i%3D0%3Bi<tMani.pointCount%3B%2B%2Bi)%0A%09%09%09%7Bvar cp%3DtMani.points%5Bi%5D%3Bcp.normalImpulse%3D0.0%3Bcp.tangentImpulse%3D0.0%3Bvar idKey%3Dcp.id.key%3Bfor(var j%3D0%3Bj<this.m0.pointCount%3B%2B%2Bj)%0A%09%09%09%7Bif(match%5Bj%5D%3D%3Dtrue)%0A%09%09%09continue%3Bvar cp0%3Dthis.m0.points%5Bj%5D%3Bvar id0%3Dcp0.id%3Bif(id0.key%3D%3DidKey)%0A%09%09%09%7Bmatch%5Bj%5D%3Dtrue%3Bcp.normalImpulse%3Dcp0.normalImpulse%3Bcp.tangentImpulse%3Dcp0.tangentImpulse%3Bbreak%3B%7D%7D%7D%0A%09%09%09this.m_manifoldCount%3D1%3B%7D%0A%09%09%09else%0A%09%09%09%7Bthis.m_manifoldCount%3D0%3B%7D%7D%2CGetManifolds%3Afunction()%0A%09%09%09%7Breturn this.m_manifold%3B%7D%2Cm_manifold%3A%5Bnew b2Manifold()%5D%7D)%3Bb2PolyContact.Create%3Dfunction(shape1%2Cshape2%2Callocator)%7Breturn new b2PolyContact(shape1%2Cshape2)%3B%7D%3Bb2PolyContact.Destroy%3Dfunction(contact%2Callocator)%7B%7D%3B%0A%09%09%09var b2ContactManager%3DClass.create()%3BObject.extend(b2ContactManager.prototype%2Cb2PairCallback.prototype)%3BObject.extend(b2ContactManager.prototype%2C%7Binitialize%3Afunction()%7Bthis.m_nullContact%3Dnew b2NullContact()%3Bthis.m_world%3Dnull%3Bthis.m_destroyImmediate%3Dfalse%3B%7D%2CPairAdded%3Afunction(proxyUserData1%2CproxyUserData2)%7Bvar shape1%3DproxyUserData1%3Bvar shape2%3DproxyUserData2%3Bvar body1%3Dshape1.m_body%3Bvar body2%3Dshape2.m_body%3Bif(body1.IsStatic()%26%26body2.IsStatic())%0A%09%09%09%7Breturn this.m_nullContact%3B%7D%0A%09%09%09if(shape1.m_body%3D%3Dshape2.m_body)%0A%09%09%09%7Breturn this.m_nullContact%3B%7D%0A%09%09%09if(body2.IsConnected(body1))%0A%09%09%09%7Breturn this.m_nullContact%3B%7D%0A%09%09%09if(this.m_world.m_filter!%3Dnull%26%26this.m_world.m_filter.ShouldCollide(shape1%2Cshape2)%3D%3Dfalse)%0A%09%09%09%7Breturn this.m_nullContact%3B%7D%0A%09%09%09if(body2.m_invMass%3D%3D0.0)%0A%09%09%09%7Bvar tempShape%3Dshape1%3Bshape1%3Dshape2%3Bshape2%3DtempShape%3Bvar tempBody%3Dbody1%3Bbody1%3Dbody2%3Bbody2%3DtempBody%3B%7D%0A%09%09%09var contact%3Db2Contact.Create(shape1%2Cshape2%2Cthis.m_world.m_blockAllocator)%3Bif(contact%3D%3Dnull)%0A%09%09%09%7Breturn this.m_nullContact%3B%7D%0A%09%09%09else%0A%09%09%09%7Bcontact.m_prev%3Dnull%3Bcontact.m_next%3Dthis.m_world.m_contactList%3Bif(this.m_world.m_contactList!%3Dnull)%0A%09%09%09%7Bthis.m_world.m_contactList.m_prev%3Dcontact%3B%7D%0A%09%09%09this.m_world.m_contactList%3Dcontact%3Bthis.m_world.m_contactCount%2B%2B%3B%7D%0A%09%09%09return contact%3B%7D%2CPairRemoved%3Afunction(proxyUserData1%2CproxyUserData2%2CpairUserData)%7Bif(pairUserData%3D%3Dnull)%0A%09%09%09%7Breturn%3B%7D%0A%09%09%09var c%3DpairUserData%3Bif(c!%3Dthis.m_nullContact)%0A%09%09%09%7Bif(this.m_destroyImmediate%3D%3Dtrue)%0A%09%09%09%7Bthis.DestroyContact(c)%3Bc%3Dnull%3B%7D%0A%09%09%09else%0A%09%09%09%7Bc.m_flags%7C%3Db2Contact.e_destroyFlag%3B%7D%7D%7D%2CDestroyContact%3Afunction(c)%0A%09%09%09%7Bif(c.m_prev)%0A%09%09%09%7Bc.m_prev.m_next%3Dc.m_next%3B%7D%0A%09%09%09if(c.m_next)%0A%09%09%09%7Bc.m_next.m_prev%3Dc.m_prev%3B%7D%0A%09%09%09if(c%3D%3Dthis.m_world.m_contactList)%0A%09%09%09%7Bthis.m_world.m_contactList%3Dc.m_next%3B%7D%0A%09%09%09if(c.GetManifoldCount()>0)%0A%09%09%09%7Bvar body1%3Dc.m_shape1.m_body%3Bvar body2%3Dc.m_shape2.m_body%3Bvar node1%3Dc.m_node1%3Bvar node2%3Dc.m_node2%3Bbody1.WakeUp()%3Bbody2.WakeUp()%3Bif(node1.prev)%0A%09%09%09%7Bnode1.prev.next%3Dnode1.next%3B%7D%0A%09%09%09if(node1.next)%0A%09%09%09%7Bnode1.next.prev%3Dnode1.prev%3B%7D%0A%09%09%09if(node1%3D%3Dbody1.m_contactList)%0A%09%09%09%7Bbody1.m_contactList%3Dnode1.next%3B%7D%0A%09%09%09node1.prev%3Dnull%3Bnode1.next%3Dnull%3Bif(node2.prev)%0A%09%09%09%7Bnode2.prev.next%3Dnode2.next%3B%7D%0A%09%09%09if(node2.next)%0A%09%09%09%7Bnode2.next.prev%3Dnode2.prev%3B%7D%0A%09%09%09if(node2%3D%3Dbody2.m_contactList)%0A%09%09%09%7Bbody2.m_contactList%3Dnode2.next%3B%7D%0A%09%09%09node2.prev%3Dnull%3Bnode2.next%3Dnull%3B%7D%0A%09%09%09b2Contact.Destroy(c%2Cthis.m_world.m_blockAllocator)%3B--this.m_world.m_contactCount%3B%7D%2CCleanContactList%3Afunction()%0A%09%09%09%7Bvar c%3Dthis.m_world.m_contactList%3Bwhile(c!%3Dnull)%0A%09%09%09%7Bvar c0%3Dc%3Bc%3Dc.m_next%3Bif(c0.m_flags%26b2Contact.e_destroyFlag)%0A%09%09%09%7Bthis.DestroyContact(c0)%3Bc0%3Dnull%3B%7D%7D%7D%2CCollide%3Afunction()%0A%09%09%09%7Bvar body1%3Bvar body2%3Bvar node1%3Bvar node2%3Bfor(var c%3Dthis.m_world.m_contactList%3Bc!%3Dnull%3Bc%3Dc.m_next)%0A%09%09%09%7Bif(c.m_shape1.m_body.IsSleeping()%26%26c.m_shape2.m_body.IsSleeping())%0A%09%09%09%7Bcontinue%3B%7D%0A%09%09%09var oldCount%3Dc.GetManifoldCount()%3Bc.Evaluate()%3Bvar newCount%3Dc.GetManifoldCount()%3Bif(oldCount%3D%3D0%26%26newCount>0)%0A%09%09%09%7Bbody1%3Dc.m_shape1.m_body%3Bbody2%3Dc.m_shape2.m_body%3Bnode1%3Dc.m_node1%3Bnode2%3Dc.m_node2%3Bnode1.contact%3Dc%3Bnode1.other%3Dbody2%3Bnode1.prev%3Dnull%3Bnode1.next%3Dbody1.m_contactList%3Bif(node1.next!%3Dnull)%0A%09%09%09%7Bnode1.next.prev%3Dc.m_node1%3B%7D%0A%09%09%09body1.m_contactList%3Dc.m_node1%3Bnode2.contact%3Dc%3Bnode2.other%3Dbody1%3Bnode2.prev%3Dnull%3Bnode2.next%3Dbody2.m_contactList%3Bif(node2.next!%3Dnull)%0A%09%09%09%7Bnode2.next.prev%3Dnode2%3B%7D%0A%09%09%09body2.m_contactList%3Dnode2%3B%7D%0A%09%09%09else if(oldCount>0%26%26newCount%3D%3D0)%0A%09%09%09%7Bbody1%3Dc.m_shape1.m_body%3Bbody2%3Dc.m_shape2.m_body%3Bnode1%3Dc.m_node1%3Bnode2%3Dc.m_node2%3Bif(node1.prev)%0A%09%09%09%7Bnode1.prev.next%3Dnode1.next%3B%7D%0A%09%09%09if(node1.next)%0A%09%09%09%7Bnode1.next.prev%3Dnode1.prev%3B%7D%0A%09%09%09if(node1%3D%3Dbody1.m_contactList)%0A%09%09%09%7Bbody1.m_contactList%3Dnode1.next%3B%7D%0A%09%09%09node1.prev%3Dnull%3Bnode1.next%3Dnull%3Bif(node2.prev)%0A%09%09%09%7Bnode2.prev.next%3Dnode2.next%3B%7D%0A%09%09%09if(node2.next)%0A%09%09%09%7Bnode2.next.prev%3Dnode2.prev%3B%7D%0A%09%09%09if(node2%3D%3Dbody2.m_contactList)%0A%09%09%09%7Bbody2.m_contactList%3Dnode2.next%3B%7D%0A%09%09%09node2.prev%3Dnull%3Bnode2.next%3Dnull%3B%7D%7D%7D%2Cm_world%3Anull%2Cm_nullContact%3Anew b2NullContact()%2Cm_destroyImmediate%3Anull%7D)%3B%0A%09%09%09var b2World%3DClass.create()%3Bb2World.prototype%3D%7Binitialize%3Afunction(worldAABB%2Cgravity%2CdoSleep)%7Bthis.step%3Dnew b2TimeStep()%3Bthis.m_contactManager%3Dnew b2ContactManager()%3Bthis.m_listener%3Dnull%3Bthis.m_filter%3Db2CollisionFilter.b2_defaultFilter%3Bthis.m_bodyList%3Dnull%3Bthis.m_contactList%3Dnull%3Bthis.m_jointList%3Dnull%3Bthis.m_bodyCount%3D0%3Bthis.m_contactCount%3D0%3Bthis.m_jointCount%3D0%3Bthis.m_bodyDestroyList%3Dnull%3Bthis.m_allowSleep%3DdoSleep%3Bthis.m_gravity%3Dgravity%3Bthis.m_contactManager.m_world%3Dthis%3Bthis.m_broadPhase%3Dnew b2BroadPhase(worldAABB%2Cthis.m_contactManager)%3Bvar bd%3Dnew b2BodyDef()%3Bthis.m_groundBody%3Dthis.CreateBody(bd)%3B%7D%2CSetListener%3Afunction(listener)%7Bthis.m_listener%3Dlistener%3B%7D%2CSetFilter%3Afunction(filter)%7Bthis.m_filter%3Dfilter%3B%7D%2CCreateBody%3Afunction(def)%7Bvar b%3Dnew b2Body(def%2Cthis)%3Bb.m_prev%3Dnull%3Bb.m_next%3Dthis.m_bodyList%3Bif(this.m_bodyList)%0A%09%09%09%7Bthis.m_bodyList.m_prev%3Db%3B%7D%0A%09%09%09this.m_bodyList%3Db%3B%2B%2Bthis.m_bodyCount%3Breturn b%3B%7D%2CDestroyBody%3Afunction(b)%0A%09%09%09%7Bif(b.m_flags%26b2Body.e_destroyFlag)%0A%09%09%09%7Breturn%3B%7D%0A%09%09%09if(b.m_prev)%0A%09%09%09%7Bb.m_prev.m_next%3Db.m_next%3B%7D%0A%09%09%09if(b.m_next)%0A%09%09%09%7Bb.m_next.m_prev%3Db.m_prev%3B%7D%0A%09%09%09if(b%3D%3Dthis.m_bodyList)%0A%09%09%09%7Bthis.m_bodyList%3Db.m_next%3B%7D%0A%09%09%09b.m_flags%7C%3Db2Body.e_destroyFlag%3B--this.m_bodyCount%3Bb.m_prev%3Dnull%3Bb.m_next%3Dthis.m_bodyDestroyList%3Bthis.m_bodyDestroyList%3Db%3B%7D%2CCleanBodyList%3Afunction()%0A%09%09%09%7Bthis.m_contactManager.m_destroyImmediate%3Dtrue%3Bvar b%3Dthis.m_bodyDestroyList%3Bwhile(b)%0A%09%09%09%7Bvar b0%3Db%3Bb%3Db.m_next%3Bvar jn%3Db0.m_jointList%3Bwhile(jn)%0A%09%09%09%7Bvar jn0%3Djn%3Bjn%3Djn.next%3Bif(this.m_listener)%0A%09%09%09%7Bthis.m_listener.NotifyJointDestroyed(jn0.joint)%3B%7D%0A%09%09%09this.DestroyJoint(jn0.joint)%3B%7D%0A%09%09%09b0.Destroy()%3B%7D%0A%09%09%09this.m_bodyDestroyList%3Dnull%3Bthis.m_contactManager.m_destroyImmediate%3Dfalse%3B%7D%2CCreateJoint%3Afunction(def)%7Bvar j%3Db2Joint.Create(def%2Cthis.m_blockAllocator)%3Bj.m_prev%3Dnull%3Bj.m_next%3Dthis.m_jointList%3Bif(this.m_jointList)%0A%09%09%09%7Bthis.m_jointList.m_prev%3Dj%3B%7D%0A%09%09%09this.m_jointList%3Dj%3B%2B%2Bthis.m_jointCount%3Bj.m_node1.joint%3Dj%3Bj.m_node1.other%3Dj.m_body2%3Bj.m_node1.prev%3Dnull%3Bj.m_node1.next%3Dj.m_body1.m_jointList%3Bif(j.m_body1.m_jointList)j.m_body1.m_jointList.prev%3Dj.m_node1%3Bj.m_body1.m_jointList%3Dj.m_node1%3Bj.m_node2.joint%3Dj%3Bj.m_node2.other%3Dj.m_body1%3Bj.m_node2.prev%3Dnull%3Bj.m_node2.next%3Dj.m_body2.m_jointList%3Bif(j.m_body2.m_jointList)j.m_body2.m_jointList.prev%3Dj.m_node2%3Bj.m_body2.m_jointList%3Dj.m_node2%3Bif(def.collideConnected%3D%3Dfalse)%0A%09%09%09%7Bvar b%3Ddef.body1.m_shapeCount<def.body2.m_shapeCount%3Fdef.body1%3Adef.body2%3Bfor(var s%3Db.m_shapeList%3Bs%3Bs%3Ds.m_next)%0A%09%09%09%7Bs.ResetProxy(this.m_broadPhase)%3B%7D%7D%0A%09%09%09return j%3B%7D%2CDestroyJoint%3Afunction(j)%0A%09%09%09%7Bvar collideConnected%3Dj.m_collideConnected%3Bif(j.m_prev)%0A%09%09%09%7Bj.m_prev.m_next%3Dj.m_next%3B%7D%0A%09%09%09if(j.m_next)%0A%09%09%09%7Bj.m_next.m_prev%3Dj.m_prev%3B%7D%0A%09%09%09if(j%3D%3Dthis.m_jointList)%0A%09%09%09%7Bthis.m_jointList%3Dj.m_next%3B%7D%0A%09%09%09var body1%3Dj.m_body1%3Bvar body2%3Dj.m_body2%3Bbody1.WakeUp()%3Bbody2.WakeUp()%3Bif(j.m_node1.prev)%0A%09%09%09%7Bj.m_node1.prev.next%3Dj.m_node1.next%3B%7D%0A%09%09%09if(j.m_node1.next)%0A%09%09%09%7Bj.m_node1.next.prev%3Dj.m_node1.prev%3B%7D%0A%09%09%09if(j.m_node1%3D%3Dbody1.m_jointList)%0A%09%09%09%7Bbody1.m_jointList%3Dj.m_node1.next%3B%7D%0A%09%09%09j.m_node1.prev%3Dnull%3Bj.m_node1.next%3Dnull%3Bif(j.m_node2.prev)%0A%09%09%09%7Bj.m_node2.prev.next%3Dj.m_node2.next%3B%7D%0A%09%09%09if(j.m_node2.next)%0A%09%09%09%7Bj.m_node2.next.prev%3Dj.m_node2.prev%3B%7D%0A%09%09%09if(j.m_node2%3D%3Dbody2.m_jointList)%0A%09%09%09%7Bbody2.m_jointList%3Dj.m_node2.next%3B%7D%0A%09%09%09j.m_node2.prev%3Dnull%3Bj.m_node2.next%3Dnull%3Bb2Joint.Destroy(j%2Cthis.m_blockAllocator)%3B--this.m_jointCount%3Bif(collideConnected%3D%3Dfalse)%0A%09%09%09%7Bvar b%3Dbody1.m_shapeCount<body2.m_shapeCount%3Fbody1%3Abody2%3Bfor(var s%3Db.m_shapeList%3Bs%3Bs%3Ds.m_next)%0A%09%09%09%7Bs.ResetProxy(this.m_broadPhase)%3B%7D%7D%7D%2CGetGroundBody%3Afunction()%7Breturn this.m_groundBody%3B%7D%2Cstep%3Anew b2TimeStep()%2CStep%3Afunction(dt%2Citerations)%7Bvar b%3Bvar other%3Bthis.step.dt%3Ddt%3Bthis.step.iterations%3Diterations%3Bif(dt>0.0)%0A%09%09%09%7Bthis.step.inv_dt%3D1.0%2Fdt%3B%7D%0A%09%09%09else%0A%09%09%09%7Bthis.step.inv_dt%3D0.0%3B%7D%0A%09%09%09this.m_positionIterationCount%3D0%3Bthis.m_contactManager.CleanContactList()%3Bthis.CleanBodyList()%3Bthis.m_contactManager.Collide()%3Bvar island%3Dnew b2Island(this.m_bodyCount%2Cthis.m_contactCount%2Cthis.m_jointCount%2Cthis.m_stackAllocator)%3Bfor(b%3Dthis.m_bodyList%3Bb!%3Dnull%3Bb%3Db.m_next)%0A%09%09%09%7Bb.m_flags%26%3D~b2Body.e_islandFlag%3B%7D%0A%09%09%09for(var c%3Dthis.m_contactList%3Bc!%3Dnull%3Bc%3Dc.m_next)%0A%09%09%09%7Bc.m_flags%26%3D~b2Contact.e_islandFlag%3B%7D%0A%09%09%09for(var j%3Dthis.m_jointList%3Bj!%3Dnull%3Bj%3Dj.m_next)%0A%09%09%09%7Bj.m_islandFlag%3Dfalse%3B%7D%0A%09%09%09var stackSize%3Dthis.m_bodyCount%3Bvar stack%3Dnew Array(this.m_bodyCount)%3Bfor(var k%3D0%3Bk<this.m_bodyCount%3Bk%2B%2B)%0A%09%09%09stack%5Bk%5D%3Dnull%3Bfor(var seed%3Dthis.m_bodyList%3Bseed!%3Dnull%3Bseed%3Dseed.m_next)%0A%09%09%09%7Bif(seed.m_flags%26(b2Body.e_staticFlag%7Cb2Body.e_islandFlag%7Cb2Body.e_sleepFlag%7Cb2Body.e_frozenFlag))%0A%09%09%09%7Bcontinue%3B%7D%0A%09%09%09island.Clear()%3Bvar stackCount%3D0%3Bstack%5BstackCount%2B%2B%5D%3Dseed%3Bseed.m_flags%7C%3Db2Body.e_islandFlag%3B%3Bwhile(stackCount>0)%0A%09%09%09%7Bb%3Dstack%5B--stackCount%5D%3Bisland.AddBody(b)%3Bb.m_flags%26%3D~b2Body.e_sleepFlag%3Bif(b.m_flags%26b2Body.e_staticFlag)%0A%09%09%09%7Bcontinue%3B%7D%0A%09%09%09for(var cn%3Db.m_contactList%3Bcn!%3Dnull%3Bcn%3Dcn.next)%0A%09%09%09%7Bif(cn.contact.m_flags%26b2Contact.e_islandFlag)%0A%09%09%09%7Bcontinue%3B%7D%0A%09%09%09island.AddContact(cn.contact)%3Bcn.contact.m_flags%7C%3Db2Contact.e_islandFlag%3Bother%3Dcn.other%3Bif(other.m_flags%26b2Body.e_islandFlag)%0A%09%09%09%7Bcontinue%3B%7D%0A%09%09%09stack%5BstackCount%2B%2B%5D%3Dother%3Bother.m_flags%7C%3Db2Body.e_islandFlag%3B%7D%0A%09%09%09for(var jn%3Db.m_jointList%3Bjn!%3Dnull%3Bjn%3Djn.next)%0A%09%09%09%7Bif(jn.joint.m_islandFlag%3D%3Dtrue)%0A%09%09%09%7Bcontinue%3B%7D%0A%09%09%09island.AddJoint(jn.joint)%3Bjn.joint.m_islandFlag%3Dtrue%3Bother%3Djn.other%3Bif(other.m_flags%26b2Body.e_islandFlag)%0A%09%09%09%7Bcontinue%3B%7D%0A%09%09%09stack%5BstackCount%2B%2B%5D%3Dother%3Bother.m_flags%7C%3Db2Body.e_islandFlag%3B%7D%7D%0A%09%09%09island.Solve(this.step%2Cthis.m_gravity)%3Bthis.m_positionIterationCount%3Db2Math.b2Max(this.m_positionIterationCount%2Cb2Island.m_positionIterationCount)%3Bif(this.m_allowSleep)%0A%09%09%09%7Bisland.UpdateSleep(dt)%3B%7D%0A%09%09%09for(var i%3D0%3Bi<island.m_bodyCount%3B%2B%2Bi)%0A%09%09%09%7Bb%3Disland.m_bodies%5Bi%5D%3Bif(b.m_flags%26b2Body.e_staticFlag)%0A%09%09%09%7Bb.m_flags%26%3D~b2Body.e_islandFlag%3B%7D%0A%09%09%09if(b.IsFrozen()%26%26this.m_listener)%0A%09%09%09%7Bvar response%3Dthis.m_listener.NotifyBoundaryViolated(b)%3Bif(response%3D%3Db2WorldListener.b2_destroyBody)%0A%09%09%09%7Bthis.DestroyBody(b)%3Bb%3Dnull%3Bisland.m_bodies%5Bi%5D%3Dnull%3B%7D%7D%7D%7D%0A%09%09%09this.m_broadPhase.Commit()%3B%7D%2CQuery%3Afunction(aabb%2Cshapes%2CmaxCount)%7Bvar results%3Dnew Array()%3Bvar count%3Dthis.m_broadPhase.QueryAABB(aabb%2Cresults%2CmaxCount)%3Bfor(var i%3D0%3Bi<count%3B%2B%2Bi)%0A%09%09%09%7Bshapes%5Bi%5D%3Dresults%5Bi%5D%3B%7D%0A%09%09%09return count%3B%7D%2CGetBodyList%3Afunction()%7Breturn this.m_bodyList%3B%7D%2CGetJointList%3Afunction()%7Breturn this.m_jointList%3B%7D%2CGetContactList%3Afunction()%7Breturn this.m_contactList%3B%7D%2Cm_blockAllocator%3Anull%2Cm_stackAllocator%3Anull%2Cm_broadPhase%3Anull%2Cm_contactManager%3Anew b2ContactManager()%2Cm_bodyList%3Anull%2Cm_contactList%3Anull%2Cm_jointList%3Anull%2Cm_bodyCount%3A0%2Cm_contactCount%3A0%2Cm_jointCount%3A0%2Cm_bodyDestroyList%3Anull%2Cm_gravity%3Anull%2Cm_allowSleep%3Anull%2Cm_groundBody%3Anull%2Cm_listener%3Anull%2Cm_filter%3Anull%2Cm_positionIterationCount%3A0%7D%3Bb2World.s_enablePositionCorrection%3D1%3Bb2World.s_enableWarmStarting%3D1%3B%0A%09%09%09var b2WorldListener%3DClass.create()%3Bb2WorldListener.prototype%3D%7BNotifyJointDestroyed%3Afunction(joint)%7B%7D%2CNotifyBoundaryViolated%3Afunction(body)%0A%09%09%09%7Breturn b2WorldListener.b2_freezeBody%3B%7D%2Cinitialize%3Afunction()%7B%7D%7D%3Bb2WorldListener.b2_freezeBody%3D0%3Bb2WorldListener.b2_destroyBody%3D1%3B%0A%09%09%09var b2JointNode%3DClass.create()%3Bb2JointNode.prototype%3D%7Bother%3Anull%2Cjoint%3Anull%2Cprev%3Anull%2Cnext%3Anull%2Cinitialize%3Afunction()%7B%7D%7D%0A%09%09%09%0A%09%09%09var b2Joint%3DClass.create()%3Bb2Joint.prototype%3D%7BGetType%3Afunction()%7Breturn this.m_type%3B%7D%2CGetAnchor1%3Afunction()%7Breturn null%7D%2CGetAnchor2%3Afunction()%7Breturn null%7D%2CGetReactionForce%3Afunction(invTimeStep)%7Breturn null%7D%2CGetReactionTorque%3Afunction(invTimeStep)%7Breturn 0.0%7D%2CGetBody1%3Afunction()%0A%09%09%09%7Breturn this.m_body1%3B%7D%2CGetBody2%3Afunction()%0A%09%09%09%7Breturn this.m_body2%3B%7D%2CGetNext%3Afunction()%7Breturn this.m_next%3B%7D%2CGetUserData%3Afunction()%7Breturn this.m_userData%3B%7D%2Cinitialize%3Afunction(def)%7Bthis.m_node1%3Dnew b2JointNode()%3Bthis.m_node2%3Dnew b2JointNode()%3Bthis.m_type%3Ddef.type%3Bthis.m_prev%3Dnull%3Bthis.m_next%3Dnull%3Bthis.m_body1%3Ddef.body1%3Bthis.m_body2%3Ddef.body2%3Bthis.m_collideConnected%3Ddef.collideConnected%3Bthis.m_islandFlag%3Dfalse%3Bthis.m_userData%3Ddef.userData%3B%7D%2CPrepareVelocitySolver%3Afunction()%7B%7D%2CSolveVelocityConstraints%3Afunction(step)%7B%7D%2CPreparePositionSolver%3Afunction()%7B%7D%2CSolvePositionConstraints%3Afunction()%7Breturn false%7D%2Cm_type%3A0%2Cm_prev%3Anull%2Cm_next%3Anull%2Cm_node1%3Anew b2JointNode()%2Cm_node2%3Anew b2JointNode()%2Cm_body1%3Anull%2Cm_body2%3Anull%2Cm_islandFlag%3Anull%2Cm_collideConnected%3Anull%2Cm_userData%3Anull%7D%3Bb2Joint.Create%3Dfunction(def%2Callocator)%7Bvar joint%3Dnull%3Bswitch(def.type)%0A%09%09%09%7Bcase b2Joint.e_distanceJoint%3A%7Bjoint%3Dnew b2DistanceJoint(def)%3B%7D%0A%09%09%09break%3Bcase b2Joint.e_mouseJoint%3A%7Bjoint%3Dnew b2MouseJoint(def)%3B%7D%0A%09%09%09break%3Bcase b2Joint.e_prismaticJoint%3A%7Bjoint%3Dnew b2PrismaticJoint(def)%3B%7D%0A%09%09%09break%3Bcase b2Joint.e_revoluteJoint%3A%7Bjoint%3Dnew b2RevoluteJoint(def)%3B%7D%0A%09%09%09break%3Bcase b2Joint.e_pulleyJoint%3A%7Bjoint%3Dnew b2PulleyJoint(def)%3B%7D%0A%09%09%09break%3Bcase b2Joint.e_gearJoint%3A%7Bjoint%3Dnew b2GearJoint(def)%3B%7D%0A%09%09%09break%3Bdefault%3Abreak%3B%7D%0A%09%09%09return joint%3B%7D%3Bb2Joint.Destroy%3Dfunction(joint%2Callocator)%7B%7D%3Bb2Joint.e_unknownJoint%3D0%3Bb2Joint.e_revoluteJoint%3D1%3Bb2Joint.e_prismaticJoint%3D2%3Bb2Joint.e_distanceJoint%3D3%3Bb2Joint.e_pulleyJoint%3D4%3Bb2Joint.e_mouseJoint%3D5%3Bb2Joint.e_gearJoint%3D6%3Bb2Joint.e_inactiveLimit%3D0%3Bb2Joint.e_atLowerLimit%3D1%3Bb2Joint.e_atUpperLimit%3D2%3Bb2Joint.e_equalLimits%3D3%3B%0A%09%09%09var b2JointDef%3DClass.create()%3Bb2JointDef.prototype%3D%7Binitialize%3Afunction()%0A%09%09%09%7Bthis.type%3Db2Joint.e_unknownJoint%3Bthis.userData%3Dnull%3Bthis.body1%3Dnull%3Bthis.body2%3Dnull%3Bthis.collideConnected%3Dfalse%3B%7D%2Ctype%3A0%2CuserData%3Anull%2Cbody1%3Anull%2Cbody2%3Anull%2CcollideConnected%3Anull%7D%0A%09%09%09%0A%09%09%09var b2DistanceJoint%3DClass.create()%3BObject.extend(b2DistanceJoint.prototype%2Cb2Joint.prototype)%3BObject.extend(b2DistanceJoint.prototype%2C%7Binitialize%3Afunction(def)%7Bthis.m_node1%3Dnew b2JointNode()%3Bthis.m_node2%3Dnew b2JointNode()%3Bthis.m_type%3Ddef.type%3Bthis.m_prev%3Dnull%3Bthis.m_next%3Dnull%3Bthis.m_body1%3Ddef.body1%3Bthis.m_body2%3Ddef.body2%3Bthis.m_collideConnected%3Ddef.collideConnected%3Bthis.m_islandFlag%3Dfalse%3Bthis.m_userData%3Ddef.userData%3Bthis.m_localAnchor1%3Dnew b2Vec2()%3Bthis.m_localAnchor2%3Dnew b2Vec2()%3Bthis.m_u%3Dnew b2Vec2()%3Bvar tMat%3Bvar tX%3Bvar tY%3BtMat%3Dthis.m_body1.m_R%3BtX%3Ddef.anchorPoint1.x-this.m_body1.m_position.x%3BtY%3Ddef.anchorPoint1.y-this.m_body1.m_position.y%3Bthis.m_localAnchor1.x%3DtX*tMat.col1.x%2BtY*tMat.col1.y%3Bthis.m_localAnchor1.y%3DtX*tMat.col2.x%2BtY*tMat.col2.y%3BtMat%3Dthis.m_body2.m_R%3BtX%3Ddef.anchorPoint2.x-this.m_body2.m_position.x%3BtY%3Ddef.anchorPoint2.y-this.m_body2.m_position.y%3Bthis.m_localAnchor2.x%3DtX*tMat.col1.x%2BtY*tMat.col1.y%3Bthis.m_localAnchor2.y%3DtX*tMat.col2.x%2BtY*tMat.col2.y%3BtX%3Ddef.anchorPoint2.x-def.anchorPoint1.x%3BtY%3Ddef.anchorPoint2.y-def.anchorPoint1.y%3Bthis.m_length%3DMath.sqrt(tX*tX%2BtY*tY)%3Bthis.m_impulse%3D0.0%3B%7D%2CPrepareVelocitySolver%3Afunction()%7Bvar tMat%3BtMat%3Dthis.m_body1.m_R%3Bvar r1X%3DtMat.col1.x*this.m_localAnchor1.x%2BtMat.col2.x*this.m_localAnchor1.y%3Bvar r1Y%3DtMat.col1.y*this.m_localAnchor1.x%2BtMat.col2.y*this.m_localAnchor1.y%3BtMat%3Dthis.m_body2.m_R%3Bvar r2X%3DtMat.col1.x*this.m_localAnchor2.x%2BtMat.col2.x*this.m_localAnchor2.y%3Bvar r2Y%3DtMat.col1.y*this.m_localAnchor2.x%2BtMat.col2.y*this.m_localAnchor2.y%3Bthis.m_u.x%3Dthis.m_body2.m_position.x%2Br2X-this.m_body1.m_position.x-r1X%3Bthis.m_u.y%3Dthis.m_body2.m_position.y%2Br2Y-this.m_body1.m_position.y-r1Y%3Bvar length%3DMath.sqrt(this.m_u.x*this.m_u.x%2Bthis.m_u.y*this.m_u.y)%3Bif(length>b2Settings.b2_linearSlop)%0A%09%09%09%7Bthis.m_u.Multiply(1.0%2Flength)%3B%7D%0A%09%09%09else%0A%09%09%09%7Bthis.m_u.SetZero()%3B%7D%0A%09%09%09var cr1u%3D(r1X*this.m_u.y-r1Y*this.m_u.x)%3Bvar cr2u%3D(r2X*this.m_u.y-r2Y*this.m_u.x)%3Bthis.m_mass%3Dthis.m_body1.m_invMass%2Bthis.m_body1.m_invI*cr1u*cr1u%2Bthis.m_body2.m_invMass%2Bthis.m_body2.m_invI*cr2u*cr2u%3Bthis.m_mass%3D1.0%2Fthis.m_mass%3Bif(b2World.s_enableWarmStarting)%0A%09%09%09%7Bvar PX%3Dthis.m_impulse*this.m_u.x%3Bvar PY%3Dthis.m_impulse*this.m_u.y%3Bthis.m_body1.m_linearVelocity.x-%3Dthis.m_body1.m_invMass*PX%3Bthis.m_body1.m_linearVelocity.y-%3Dthis.m_body1.m_invMass*PY%3Bthis.m_body1.m_angularVelocity-%3Dthis.m_body1.m_invI*(r1X*PY-r1Y*PX)%3Bthis.m_body2.m_linearVelocity.x%2B%3Dthis.m_body2.m_invMass*PX%3Bthis.m_body2.m_linearVelocity.y%2B%3Dthis.m_body2.m_invMass*PY%3Bthis.m_body2.m_angularVelocity%2B%3Dthis.m_body2.m_invI*(r2X*PY-r2Y*PX)%3B%7D%0A%09%09%09else%0A%09%09%09%7Bthis.m_impulse%3D0.0%3B%7D%7D%2CSolveVelocityConstraints%3Afunction(step)%7Bvar tMat%3BtMat%3Dthis.m_body1.m_R%3Bvar r1X%3DtMat.col1.x*this.m_localAnchor1.x%2BtMat.col2.x*this.m_localAnchor1.y%3Bvar r1Y%3DtMat.col1.y*this.m_localAnchor1.x%2BtMat.col2.y*this.m_localAnchor1.y%3BtMat%3Dthis.m_body2.m_R%3Bvar r2X%3DtMat.col1.x*this.m_localAnchor2.x%2BtMat.col2.x*this.m_localAnchor2.y%3Bvar r2Y%3DtMat.col1.y*this.m_localAnchor2.x%2BtMat.col2.y*this.m_localAnchor2.y%3Bvar v1X%3Dthis.m_body1.m_linearVelocity.x%2B(-this.m_body1.m_angularVelocity*r1Y)%3Bvar v1Y%3Dthis.m_body1.m_linearVelocity.y%2B(this.m_body1.m_angularVelocity*r1X)%3Bvar v2X%3Dthis.m_body2.m_linearVelocity.x%2B(-this.m_body2.m_angularVelocity*r2Y)%3Bvar v2Y%3Dthis.m_body2.m_linearVelocity.y%2B(this.m_body2.m_angularVelocity*r2X)%3Bvar Cdot%3D(this.m_u.x*(v2X-v1X)%2Bthis.m_u.y*(v2Y-v1Y))%3Bvar impulse%3D-this.m_mass*Cdot%3Bthis.m_impulse%2B%3Dimpulse%3Bvar PX%3Dimpulse*this.m_u.x%3Bvar PY%3Dimpulse*this.m_u.y%3Bthis.m_body1.m_linearVelocity.x-%3Dthis.m_body1.m_invMass*PX%3Bthis.m_body1.m_linearVelocity.y-%3Dthis.m_body1.m_invMass*PY%3Bthis.m_body1.m_angularVelocity-%3Dthis.m_body1.m_invI*(r1X*PY-r1Y*PX)%3Bthis.m_body2.m_linearVelocity.x%2B%3Dthis.m_body2.m_invMass*PX%3Bthis.m_body2.m_linearVelocity.y%2B%3Dthis.m_body2.m_invMass*PY%3Bthis.m_body2.m_angularVelocity%2B%3Dthis.m_body2.m_invI*(r2X*PY-r2Y*PX)%3B%7D%2CSolvePositionConstraints%3Afunction()%7Bvar tMat%3BtMat%3Dthis.m_body1.m_R%3Bvar r1X%3DtMat.col1.x*this.m_localAnchor1.x%2BtMat.col2.x*this.m_localAnchor1.y%3Bvar r1Y%3DtMat.col1.y*this.m_localAnchor1.x%2BtMat.col2.y*this.m_localAnchor1.y%3BtMat%3Dthis.m_body2.m_R%3Bvar r2X%3DtMat.col1.x*this.m_localAnchor2.x%2BtMat.col2.x*this.m_localAnchor2.y%3Bvar r2Y%3DtMat.col1.y*this.m_localAnchor2.x%2BtMat.col2.y*this.m_localAnchor2.y%3Bvar dX%3Dthis.m_body2.m_position.x%2Br2X-this.m_body1.m_position.x-r1X%3Bvar dY%3Dthis.m_body2.m_position.y%2Br2Y-this.m_body1.m_position.y-r1Y%3Bvar length%3DMath.sqrt(dX*dX%2BdY*dY)%3BdX%2F%3Dlength%3BdY%2F%3Dlength%3Bvar C%3Dlength-this.m_length%3BC%3Db2Math.b2Clamp(C%2C-b2Settings.b2_maxLinearCorrection%2Cb2Settings.b2_maxLinearCorrection)%3Bvar impulse%3D-this.m_mass*C%3Bthis.m_u.Set(dX%2CdY)%3Bvar PX%3Dimpulse*this.m_u.x%3Bvar PY%3Dimpulse*this.m_u.y%3Bthis.m_body1.m_position.x-%3Dthis.m_body1.m_invMass*PX%3Bthis.m_body1.m_position.y-%3Dthis.m_body1.m_invMass*PY%3Bthis.m_body1.m_rotation-%3Dthis.m_body1.m_invI*(r1X*PY-r1Y*PX)%3Bthis.m_body2.m_position.x%2B%3Dthis.m_body2.m_invMass*PX%3Bthis.m_body2.m_position.y%2B%3Dthis.m_body2.m_invMass*PY%3Bthis.m_body2.m_rotation%2B%3Dthis.m_body2.m_invI*(r2X*PY-r2Y*PX)%3Bthis.m_body1.m_R.Set(this.m_body1.m_rotation)%3Bthis.m_body2.m_R.Set(this.m_body2.m_rotation)%3Breturn b2Math.b2Abs(C)<b2Settings.b2_linearSlop%3B%7D%2CGetAnchor1%3Afunction()%7Breturn b2Math.AddVV(this.m_body1.m_position%2Cb2Math.b2MulMV(this.m_body1.m_R%2Cthis.m_localAnchor1))%3B%7D%2CGetAnchor2%3Afunction()%7Breturn b2Math.AddVV(this.m_body2.m_position%2Cb2Math.b2MulMV(this.m_body2.m_R%2Cthis.m_localAnchor2))%3B%7D%2CGetReactionForce%3Afunction(invTimeStep)%0A%09%09%09%7Bvar F%3Dnew b2Vec2()%3BF.SetV(this.m_u)%3BF.Multiply(this.m_impulse*invTimeStep)%3Breturn F%3B%7D%2CGetReactionTorque%3Afunction(invTimeStep)%0A%09%09%09%7Breturn 0.0%3B%7D%2Cm_localAnchor1%3Anew b2Vec2()%2Cm_localAnchor2%3Anew b2Vec2()%2Cm_u%3Anew b2Vec2()%2Cm_impulse%3Anull%2Cm_mass%3Anull%2Cm_length%3Anull%7D)%3B%0A%09%09%09var b2DistanceJointDef%3DClass.create()%3BObject.extend(b2DistanceJointDef.prototype%2Cb2JointDef.prototype)%3BObject.extend(b2DistanceJointDef.prototype%2C%7Binitialize%3Afunction()%0A%09%09%09%7Bthis.type%3Db2Joint.e_unknownJoint%3Bthis.userData%3Dnull%3Bthis.body1%3Dnull%3Bthis.body2%3Dnull%3Bthis.collideConnected%3Dfalse%3Bthis.anchorPoint1%3Dnew b2Vec2()%3Bthis.anchorPoint2%3Dnew b2Vec2()%3Bthis.type%3Db2Joint.e_distanceJoint%3B%7D%2CanchorPoint1%3Anew b2Vec2()%2CanchorPoint2%3Anew b2Vec2()%7D)%3B%0A%09%09%09var b2Jacobian%3DClass.create()%3Bb2Jacobian.prototype%3D%7Blinear1%3Anew b2Vec2()%2Cangular1%3Anull%2Clinear2%3Anew b2Vec2()%2Cangular2%3Anull%2CSetZero%3Afunction()%7Bthis.linear1.SetZero()%3Bthis.angular1%3D0.0%3Bthis.linear2.SetZero()%3Bthis.angular2%3D0.0%3B%7D%2CSet%3Afunction(x1%2Ca1%2Cx2%2Ca2)%7Bthis.linear1.SetV(x1)%3Bthis.angular1%3Da1%3Bthis.linear2.SetV(x2)%3Bthis.angular2%3Da2%3B%7D%2CCompute%3Afunction(x1%2Ca1%2Cx2%2Ca2)%7Breturn(this.linear1.x*x1.x%2Bthis.linear1.y*x1.y)%2Bthis.angular1*a1%2B(this.linear2.x*x2.x%2Bthis.linear2.y*x2.y)%2Bthis.angular2*a2%3B%7D%2Cinitialize%3Afunction()%7Bthis.linear1%3Dnew b2Vec2()%3Bthis.linear2%3Dnew b2Vec2()%3B%7D%7D%3B%0A%09%09%09var b2GearJoint%3DClass.create()%3BObject.extend(b2GearJoint.prototype%2Cb2Joint.prototype)%3BObject.extend(b2GearJoint.prototype%2C%7BGetAnchor1%3Afunction()%7Bvar tMat%3Dthis.m_body1.m_R%3Breturn new b2Vec2(this.m_body1.m_position.x%2B(tMat.col1.x*this.m_localAnchor1.x%2BtMat.col2.x*this.m_localAnchor1.y)%2Cthis.m_body1.m_position.y%2B(tMat.col1.y*this.m_localAnchor1.x%2BtMat.col2.y*this.m_localAnchor1.y))%3B%7D%2CGetAnchor2%3Afunction()%7Bvar tMat%3Dthis.m_body2.m_R%3Breturn new b2Vec2(this.m_body2.m_position.x%2B(tMat.col1.x*this.m_localAnchor2.x%2BtMat.col2.x*this.m_localAnchor2.y)%2Cthis.m_body2.m_position.y%2B(tMat.col1.y*this.m_localAnchor2.x%2BtMat.col2.y*this.m_localAnchor2.y))%3B%7D%2CGetReactionForce%3Afunction(invTimeStep)%7Breturn new b2Vec2()%3B%7D%2CGetReactionTorque%3Afunction(invTimeStep)%7Breturn 0.0%3B%7D%2CGetRatio%3Afunction()%7Breturn this.m_ratio%3B%7D%2Cinitialize%3Afunction(def)%7Bthis.m_node1%3Dnew b2JointNode()%3Bthis.m_node2%3Dnew b2JointNode()%3Bthis.m_type%3Ddef.type%3Bthis.m_prev%3Dnull%3Bthis.m_next%3Dnull%3Bthis.m_body1%3Ddef.body1%3Bthis.m_body2%3Ddef.body2%3Bthis.m_collideConnected%3Ddef.collideConnected%3Bthis.m_islandFlag%3Dfalse%3Bthis.m_userData%3Ddef.userData%3Bthis.m_groundAnchor1%3Dnew b2Vec2()%3Bthis.m_groundAnchor2%3Dnew b2Vec2()%3Bthis.m_localAnchor1%3Dnew b2Vec2()%3Bthis.m_localAnchor2%3Dnew b2Vec2()%3Bthis.m_J%3Dnew b2Jacobian()%3Bthis.m_revolute1%3Dnull%3Bthis.m_prismatic1%3Dnull%3Bthis.m_revolute2%3Dnull%3Bthis.m_prismatic2%3Dnull%3Bvar coordinate1%3Bvar coordinate2%3Bthis.m_ground1%3Ddef.joint1.m_body1%3Bthis.m_body1%3Ddef.joint1.m_body2%3Bif(def.joint1.m_type%3D%3Db2Joint.e_revoluteJoint)%0A%09%09%09%7Bthis.m_revolute1%3Ddef.joint1%3Bthis.m_groundAnchor1.SetV(this.m_revolute1.m_localAnchor1)%3Bthis.m_localAnchor1.SetV(this.m_revolute1.m_localAnchor2)%3Bcoordinate1%3Dthis.m_revolute1.GetJointAngle()%3B%7D%0A%09%09%09else%0A%09%09%09%7Bthis.m_prismatic1%3Ddef.joint1%3Bthis.m_groundAnchor1.SetV(this.m_prismatic1.m_localAnchor1)%3Bthis.m_localAnchor1.SetV(this.m_prismatic1.m_localAnchor2)%3Bcoordinate1%3Dthis.m_prismatic1.GetJointTranslation()%3B%7D%0A%09%09%09this.m_ground2%3Ddef.joint2.m_body1%3Bthis.m_body2%3Ddef.joint2.m_body2%3Bif(def.joint2.m_type%3D%3Db2Joint.e_revoluteJoint)%0A%09%09%09%7Bthis.m_revolute2%3Ddef.joint2%3Bthis.m_groundAnchor2.SetV(this.m_revolute2.m_localAnchor1)%3Bthis.m_localAnchor2.SetV(this.m_revolute2.m_localAnchor2)%3Bcoordinate2%3Dthis.m_revolute2.GetJointAngle()%3B%7D%0A%09%09%09else%0A%09%09%09%7Bthis.m_prismatic2%3Ddef.joint2%3Bthis.m_groundAnchor2.SetV(this.m_prismatic2.m_localAnchor1)%3Bthis.m_localAnchor2.SetV(this.m_prismatic2.m_localAnchor2)%3Bcoordinate2%3Dthis.m_prismatic2.GetJointTranslation()%3B%7D%0A%09%09%09this.m_ratio%3Ddef.ratio%3Bthis.m_constant%3Dcoordinate1%2Bthis.m_ratio*coordinate2%3Bthis.m_impulse%3D0.0%3B%7D%2CPrepareVelocitySolver%3Afunction()%7Bvar g1%3Dthis.m_ground1%3Bvar g2%3Dthis.m_ground2%3Bvar b1%3Dthis.m_body1%3Bvar b2%3Dthis.m_body2%3Bvar ugX%3Bvar ugY%3Bvar rX%3Bvar rY%3Bvar tMat%3Bvar tVec%3Bvar crug%3Bvar K%3D0.0%3Bthis.m_J.SetZero()%3Bif(this.m_revolute1)%0A%09%09%09%7Bthis.m_J.angular1%3D-1.0%3BK%2B%3Db1.m_invI%3B%7D%0A%09%09%09else%0A%09%09%09%7BtMat%3Dg1.m_R%3BtVec%3Dthis.m_prismatic1.m_localXAxis1%3BugX%3DtMat.col1.x*tVec.x%2BtMat.col2.x*tVec.y%3BugY%3DtMat.col1.y*tVec.x%2BtMat.col2.y*tVec.y%3BtMat%3Db1.m_R%3BrX%3DtMat.col1.x*this.m_localAnchor1.x%2BtMat.col2.x*this.m_localAnchor1.y%3BrY%3DtMat.col1.y*this.m_localAnchor1.x%2BtMat.col2.y*this.m_localAnchor1.y%3Bcrug%3DrX*ugY-rY*ugX%3Bthis.m_J.linear1.Set(-ugX%2C-ugY)%3Bthis.m_J.angular1%3D-crug%3BK%2B%3Db1.m_invMass%2Bb1.m_invI*crug*crug%3B%7D%0A%09%09%09if(this.m_revolute2)%0A%09%09%09%7Bthis.m_J.angular2%3D-this.m_ratio%3BK%2B%3Dthis.m_ratio*this.m_ratio*b2.m_invI%3B%7D%0A%09%09%09else%0A%09%09%09%7BtMat%3Dg2.m_R%3BtVec%3Dthis.m_prismatic2.m_localXAxis1%3BugX%3DtMat.col1.x*tVec.x%2BtMat.col2.x*tVec.y%3BugY%3DtMat.col1.y*tVec.x%2BtMat.col2.y*tVec.y%3BtMat%3Db2.m_R%3BrX%3DtMat.col1.x*this.m_localAnchor2.x%2BtMat.col2.x*this.m_localAnchor2.y%3BrY%3DtMat.col1.y*this.m_localAnchor2.x%2BtMat.col2.y*this.m_localAnchor2.y%3Bcrug%3DrX*ugY-rY*ugX%3Bthis.m_J.linear2.Set(-this.m_ratio*ugX%2C-this.m_ratio*ugY)%3Bthis.m_J.angular2%3D-this.m_ratio*crug%3BK%2B%3Dthis.m_ratio*this.m_ratio*(b2.m_invMass%2Bb2.m_invI*crug*crug)%3B%7D%0A%09%09%09this.m_mass%3D1.0%2FK%3Bb1.m_linearVelocity.x%2B%3Db1.m_invMass*this.m_impulse*this.m_J.linear1.x%3Bb1.m_linearVelocity.y%2B%3Db1.m_invMass*this.m_impulse*this.m_J.linear1.y%3Bb1.m_angularVelocity%2B%3Db1.m_invI*this.m_impulse*this.m_J.angular1%3Bb2.m_linearVelocity.x%2B%3Db2.m_invMass*this.m_impulse*this.m_J.linear2.x%3Bb2.m_linearVelocity.y%2B%3Db2.m_invMass*this.m_impulse*this.m_J.linear2.y%3Bb2.m_angularVelocity%2B%3Db2.m_invI*this.m_impulse*this.m_J.angular2%3B%7D%2CSolveVelocityConstraints%3Afunction(step)%7Bvar b1%3Dthis.m_body1%3Bvar b2%3Dthis.m_body2%3Bvar Cdot%3Dthis.m_J.Compute(b1.m_linearVelocity%2Cb1.m_angularVelocity%2Cb2.m_linearVelocity%2Cb2.m_angularVelocity)%3Bvar impulse%3D-this.m_mass*Cdot%3Bthis.m_impulse%2B%3Dimpulse%3Bb1.m_linearVelocity.x%2B%3Db1.m_invMass*impulse*this.m_J.linear1.x%3Bb1.m_linearVelocity.y%2B%3Db1.m_invMass*impulse*this.m_J.linear1.y%3Bb1.m_angularVelocity%2B%3Db1.m_invI*impulse*this.m_J.angular1%3Bb2.m_linearVelocity.x%2B%3Db2.m_invMass*impulse*this.m_J.linear2.x%3Bb2.m_linearVelocity.y%2B%3Db2.m_invMass*impulse*this.m_J.linear2.y%3Bb2.m_angularVelocity%2B%3Db2.m_invI*impulse*this.m_J.angular2%3B%7D%2CSolvePositionConstraints%3Afunction()%7Bvar linearError%3D0.0%3Bvar b1%3Dthis.m_body1%3Bvar b2%3Dthis.m_body2%3Bvar coordinate1%3Bvar coordinate2%3Bif(this.m_revolute1)%0A%09%09%09%7Bcoordinate1%3Dthis.m_revolute1.GetJointAngle()%3B%7D%0A%09%09%09else%0A%09%09%09%7Bcoordinate1%3Dthis.m_prismatic1.GetJointTranslation()%3B%7D%0A%09%09%09if(this.m_revolute2)%0A%09%09%09%7Bcoordinate2%3Dthis.m_revolute2.GetJointAngle()%3B%7D%0A%09%09%09else%0A%09%09%09%7Bcoordinate2%3Dthis.m_prismatic2.GetJointTranslation()%3B%7D%0A%09%09%09var C%3Dthis.m_constant-(coordinate1%2Bthis.m_ratio*coordinate2)%3Bvar impulse%3D-this.m_mass*C%3Bb1.m_position.x%2B%3Db1.m_invMass*impulse*this.m_J.linear1.x%3Bb1.m_position.y%2B%3Db1.m_invMass*impulse*this.m_J.linear1.y%3Bb1.m_rotation%2B%3Db1.m_invI*impulse*this.m_J.angular1%3Bb2.m_position.x%2B%3Db2.m_invMass*impulse*this.m_J.linear2.x%3Bb2.m_position.y%2B%3Db2.m_invMass*impulse*this.m_J.linear2.y%3Bb2.m_rotation%2B%3Db2.m_invI*impulse*this.m_J.angular2%3Bb1.m_R.Set(b1.m_rotation)%3Bb2.m_R.Set(b2.m_rotation)%3Breturn linearError<b2Settings.b2_linearSlop%3B%7D%2Cm_ground1%3Anull%2Cm_ground2%3Anull%2Cm_revolute1%3Anull%2Cm_prismatic1%3Anull%2Cm_revolute2%3Anull%2Cm_prismatic2%3Anull%2Cm_groundAnchor1%3Anew b2Vec2()%2Cm_groundAnchor2%3Anew b2Vec2()%2Cm_localAnchor1%3Anew b2Vec2()%2Cm_localAnchor2%3Anew b2Vec2()%2Cm_J%3Anew b2Jacobian()%2Cm_constant%3Anull%2Cm_ratio%3Anull%2Cm_mass%3Anull%2Cm_impulse%3Anull%7D)%3B%0A%09%09%09var b2GearJointDef%3DClass.create()%3BObject.extend(b2GearJointDef.prototype%2Cb2JointDef.prototype)%3BObject.extend(b2GearJointDef.prototype%2C%7Binitialize%3Afunction()%0A%09%09%09%7Bthis.type%3Db2Joint.e_gearJoint%3Bthis.joint1%3Dnull%3Bthis.joint2%3Dnull%3Bthis.ratio%3D1.0%3B%7D%2Cjoint1%3Anull%2Cjoint2%3Anull%2Cratio%3Anull%7D)%3B%0A%09%09%09var b2MouseJoint%3DClass.create()%3BObject.extend(b2MouseJoint.prototype%2Cb2Joint.prototype)%3BObject.extend(b2MouseJoint.prototype%2C%7BGetAnchor1%3Afunction()%7Breturn this.m_target%3B%7D%2CGetAnchor2%3Afunction()%7Bvar tVec%3Db2Math.b2MulMV(this.m_body2.m_R%2Cthis.m_localAnchor)%3BtVec.Add(this.m_body2.m_position)%3Breturn tVec%3B%7D%2CGetReactionForce%3Afunction(invTimeStep)%0A%09%09%09%7Bvar F%3Dnew b2Vec2()%3BF.SetV(this.m_impulse)%3BF.Multiply(invTimeStep)%3Breturn F%3B%7D%2CGetReactionTorque%3Afunction(invTimeStep)%0A%09%09%09%7Breturn 0.0%3B%7D%2CSetTarget%3Afunction(target)%7Bthis.m_body2.WakeUp()%3Bthis.m_target%3Dtarget%3B%7D%2Cinitialize%3Afunction(def)%7Bthis.m_node1%3Dnew b2JointNode()%3Bthis.m_node2%3Dnew b2JointNode()%3Bthis.m_type%3Ddef.type%3Bthis.m_prev%3Dnull%3Bthis.m_next%3Dnull%3Bthis.m_body1%3Ddef.body1%3Bthis.m_body2%3Ddef.body2%3Bthis.m_collideConnected%3Ddef.collideConnected%3Bthis.m_islandFlag%3Dfalse%3Bthis.m_userData%3Ddef.userData%3Bthis.K%3Dnew b2Mat22()%3Bthis.K1%3Dnew b2Mat22()%3Bthis.K2%3Dnew b2Mat22()%3Bthis.m_localAnchor%3Dnew b2Vec2()%3Bthis.m_target%3Dnew b2Vec2()%3Bthis.m_impulse%3Dnew b2Vec2()%3Bthis.m_ptpMass%3Dnew b2Mat22()%3Bthis.m_C%3Dnew b2Vec2()%3Bthis.m_target.SetV(def.target)%3Bvar tX%3Dthis.m_target.x-this.m_body2.m_position.x%3Bvar tY%3Dthis.m_target.y-this.m_body2.m_position.y%3Bthis.m_localAnchor.x%3D(tX*this.m_body2.m_R.col1.x%2BtY*this.m_body2.m_R.col1.y)%3Bthis.m_localAnchor.y%3D(tX*this.m_body2.m_R.col2.x%2BtY*this.m_body2.m_R.col2.y)%3Bthis.m_maxForce%3Ddef.maxForce%3Bthis.m_impulse.SetZero()%3Bvar mass%3Dthis.m_body2.m_mass%3Bvar omega%3D2.0*b2Settings.b2_pi*def.frequencyHz%3Bvar d%3D2.0*mass*def.dampingRatio*omega%3Bvar k%3Dmass*omega*omega%3Bthis.m_gamma%3D1.0%2F(d%2Bdef.timeStep*k)%3Bthis.m_beta%3Ddef.timeStep*k%2F(d%2Bdef.timeStep*k)%3B%7D%2CK%3Anew b2Mat22()%2CK1%3Anew b2Mat22()%2CK2%3Anew b2Mat22()%2CPrepareVelocitySolver%3Afunction()%7Bvar b%3Dthis.m_body2%3Bvar tMat%3BtMat%3Db.m_R%3Bvar rX%3DtMat.col1.x*this.m_localAnchor.x%2BtMat.col2.x*this.m_localAnchor.y%3Bvar rY%3DtMat.col1.y*this.m_localAnchor.x%2BtMat.col2.y*this.m_localAnchor.y%3Bvar invMass%3Db.m_invMass%3Bvar invI%3Db.m_invI%3Bthis.K1.col1.x%3DinvMass%3Bthis.K1.col2.x%3D0.0%3Bthis.K1.col1.y%3D0.0%3Bthis.K1.col2.y%3DinvMass%3Bthis.K2.col1.x%3DinvI*rY*rY%3Bthis.K2.col2.x%3D-invI*rX*rY%3Bthis.K2.col1.y%3D-invI*rX*rY%3Bthis.K2.col2.y%3DinvI*rX*rX%3Bthis.K.SetM(this.K1)%3Bthis.K.AddM(this.K2)%3Bthis.K.col1.x%2B%3Dthis.m_gamma%3Bthis.K.col2.y%2B%3Dthis.m_gamma%3Bthis.K.Invert(this.m_ptpMass)%3Bthis.m_C.x%3Db.m_position.x%2BrX-this.m_target.x%3Bthis.m_C.y%3Db.m_position.y%2BrY-this.m_target.y%3Bb.m_angularVelocity*%3D0.98%3Bvar PX%3Dthis.m_impulse.x%3Bvar PY%3Dthis.m_impulse.y%3Bb.m_linearVelocity.x%2B%3DinvMass*PX%3Bb.m_linearVelocity.y%2B%3DinvMass*PY%3Bb.m_angularVelocity%2B%3DinvI*(rX*PY-rY*PX)%3B%7D%2CSolveVelocityConstraints%3Afunction(step)%7Bvar body%3Dthis.m_body2%3Bvar tMat%3BtMat%3Dbody.m_R%3Bvar rX%3DtMat.col1.x*this.m_localAnchor.x%2BtMat.col2.x*this.m_localAnchor.y%3Bvar rY%3DtMat.col1.y*this.m_localAnchor.x%2BtMat.col2.y*this.m_localAnchor.y%3Bvar CdotX%3Dbody.m_linearVelocity.x%2B(-body.m_angularVelocity*rY)%3Bvar CdotY%3Dbody.m_linearVelocity.y%2B(body.m_angularVelocity*rX)%3BtMat%3Dthis.m_ptpMass%3Bvar tX%3DCdotX%2B(this.m_beta*step.inv_dt)*this.m_C.x%2Bthis.m_gamma*this.m_impulse.x%3Bvar tY%3DCdotY%2B(this.m_beta*step.inv_dt)*this.m_C.y%2Bthis.m_gamma*this.m_impulse.y%3Bvar impulseX%3D-(tMat.col1.x*tX%2BtMat.col2.x*tY)%3Bvar impulseY%3D-(tMat.col1.y*tX%2BtMat.col2.y*tY)%3Bvar oldImpulseX%3Dthis.m_impulse.x%3Bvar oldImpulseY%3Dthis.m_impulse.y%3Bthis.m_impulse.x%2B%3DimpulseX%3Bthis.m_impulse.y%2B%3DimpulseY%3Bvar length%3Dthis.m_impulse.Length()%3Bif(length>step.dt*this.m_maxForce)%0A%09%09%09%7Bthis.m_impulse.Multiply(step.dt*this.m_maxForce%2Flength)%3B%7D%0A%09%09%09impulseX%3Dthis.m_impulse.x-oldImpulseX%3BimpulseY%3Dthis.m_impulse.y-oldImpulseY%3Bbody.m_linearVelocity.x%2B%3Dbody.m_invMass*impulseX%3Bbody.m_linearVelocity.y%2B%3Dbody.m_invMass*impulseY%3Bbody.m_angularVelocity%2B%3Dbody.m_invI*(rX*impulseY-rY*impulseX)%3B%7D%2CSolvePositionConstraints%3Afunction()%7Breturn true%3B%7D%2Cm_localAnchor%3Anew b2Vec2()%2Cm_target%3Anew b2Vec2()%2Cm_impulse%3Anew b2Vec2()%2Cm_ptpMass%3Anew b2Mat22()%2Cm_C%3Anew b2Vec2()%2Cm_maxForce%3Anull%2Cm_beta%3Anull%2Cm_gamma%3Anull%7D)%3B%0A%09%09%09var b2MouseJointDef%3DClass.create()%3BObject.extend(b2MouseJointDef.prototype%2Cb2JointDef.prototype)%3BObject.extend(b2MouseJointDef.prototype%2C%7Binitialize%3Afunction()%0A%09%09%09%7Bthis.type%3Db2Joint.e_unknownJoint%3Bthis.userData%3Dnull%3Bthis.body1%3Dnull%3Bthis.body2%3Dnull%3Bthis.collideConnected%3Dfalse%3Bthis.target%3Dnew b2Vec2()%3Bthis.type%3Db2Joint.e_mouseJoint%3Bthis.maxForce%3D0.0%3Bthis.frequencyHz%3D5.0%3Bthis.dampingRatio%3D0.7%3Bthis.timeStep%3D1.0%2F60.0%3B%7D%2Ctarget%3Anew b2Vec2()%2CmaxForce%3Anull%2CfrequencyHz%3Anull%2CdampingRatio%3Anull%2CtimeStep%3Anull%7D)%3B%0A%09%09%09var b2PrismaticJoint%3DClass.create()%3BObject.extend(b2PrismaticJoint.prototype%2Cb2Joint.prototype)%3BObject.extend(b2PrismaticJoint.prototype%2C%7BGetAnchor1%3Afunction()%7Bvar b1%3Dthis.m_body1%3Bvar tVec%3Dnew b2Vec2()%3BtVec.SetV(this.m_localAnchor1)%3BtVec.MulM(b1.m_R)%3BtVec.Add(b1.m_position)%3Breturn tVec%3B%7D%2CGetAnchor2%3Afunction()%7Bvar b2%3Dthis.m_body2%3Bvar tVec%3Dnew b2Vec2()%3BtVec.SetV(this.m_localAnchor2)%3BtVec.MulM(b2.m_R)%3BtVec.Add(b2.m_position)%3Breturn tVec%3B%7D%2CGetJointTranslation%3Afunction()%7Bvar b1%3Dthis.m_body1%3Bvar b2%3Dthis.m_body2%3Bvar tMat%3BtMat%3Db1.m_R%3Bvar r1X%3DtMat.col1.x*this.m_localAnchor1.x%2BtMat.col2.x*this.m_localAnchor1.y%3Bvar r1Y%3DtMat.col1.y*this.m_localAnchor1.x%2BtMat.col2.y*this.m_localAnchor1.y%3BtMat%3Db2.m_R%3Bvar r2X%3DtMat.col1.x*this.m_localAnchor2.x%2BtMat.col2.x*this.m_localAnchor2.y%3Bvar r2Y%3DtMat.col1.y*this.m_localAnchor2.x%2BtMat.col2.y*this.m_localAnchor2.y%3Bvar p1X%3Db1.m_position.x%2Br1X%3Bvar p1Y%3Db1.m_position.y%2Br1Y%3Bvar p2X%3Db2.m_position.x%2Br2X%3Bvar p2Y%3Db2.m_position.y%2Br2Y%3Bvar dX%3Dp2X-p1X%3Bvar dY%3Dp2Y-p1Y%3BtMat%3Db1.m_R%3Bvar ax1X%3DtMat.col1.x*this.m_localXAxis1.x%2BtMat.col2.x*this.m_localXAxis1.y%3Bvar ax1Y%3DtMat.col1.y*this.m_localXAxis1.x%2BtMat.col2.y*this.m_localXAxis1.y%3Bvar translation%3Dax1X*dX%2Bax1Y*dY%3Breturn translation%3B%7D%2CGetJointSpeed%3Afunction()%7Bvar b1%3Dthis.m_body1%3Bvar b2%3Dthis.m_body2%3Bvar tMat%3BtMat%3Db1.m_R%3Bvar r1X%3DtMat.col1.x*this.m_localAnchor1.x%2BtMat.col2.x*this.m_localAnchor1.y%3Bvar r1Y%3DtMat.col1.y*this.m_localAnchor1.x%2BtMat.col2.y*this.m_localAnchor1.y%3BtMat%3Db2.m_R%3Bvar r2X%3DtMat.col1.x*this.m_localAnchor2.x%2BtMat.col2.x*this.m_localAnchor2.y%3Bvar r2Y%3DtMat.col1.y*this.m_localAnchor2.x%2BtMat.col2.y*this.m_localAnchor2.y%3Bvar p1X%3Db1.m_position.x%2Br1X%3Bvar p1Y%3Db1.m_position.y%2Br1Y%3Bvar p2X%3Db2.m_position.x%2Br2X%3Bvar p2Y%3Db2.m_position.y%2Br2Y%3Bvar dX%3Dp2X-p1X%3Bvar dY%3Dp2Y-p1Y%3BtMat%3Db1.m_R%3Bvar ax1X%3DtMat.col1.x*this.m_localXAxis1.x%2BtMat.col2.x*this.m_localXAxis1.y%3Bvar ax1Y%3DtMat.col1.y*this.m_localXAxis1.x%2BtMat.col2.y*this.m_localXAxis1.y%3Bvar v1%3Db1.m_linearVelocity%3Bvar v2%3Db2.m_linearVelocity%3Bvar w1%3Db1.m_angularVelocity%3Bvar w2%3Db2.m_angularVelocity%3Bvar speed%3D(dX*(-w1*ax1Y)%2BdY*(w1*ax1X))%2B(ax1X*(((v2.x%2B(-w2*r2Y))-v1.x)-(-w1*r1Y))%2Bax1Y*(((v2.y%2B(w2*r2X))-v1.y)-(w1*r1X)))%3Breturn speed%3B%7D%2CGetMotorForce%3Afunction(invTimeStep)%7Breturn invTimeStep*this.m_motorImpulse%3B%7D%2CSetMotorSpeed%3Afunction(speed)%0A%09%09%09%7Bthis.m_motorSpeed%3Dspeed%3B%7D%2CSetMotorForce%3Afunction(force)%0A%09%09%09%7Bthis.m_maxMotorForce%3Dforce%3B%7D%2CGetReactionForce%3Afunction(invTimeStep)%0A%09%09%09%7Bvar tImp%3DinvTimeStep*this.m_limitImpulse%3Bvar tMat%3BtMat%3Dthis.m_body1.m_R%3Bvar ax1X%3DtImp*(tMat.col1.x*this.m_localXAxis1.x%2BtMat.col2.x*this.m_localXAxis1.y)%3Bvar ax1Y%3DtImp*(tMat.col1.y*this.m_localXAxis1.x%2BtMat.col2.y*this.m_localXAxis1.y)%3Bvar ay1X%3DtImp*(tMat.col1.x*this.m_localYAxis1.x%2BtMat.col2.x*this.m_localYAxis1.y)%3Bvar ay1Y%3DtImp*(tMat.col1.y*this.m_localYAxis1.x%2BtMat.col2.y*this.m_localYAxis1.y)%3Breturn new b2Vec2(ax1X%2Bay1X%2Cax1Y%2Bay1Y)%3B%7D%2CGetReactionTorque%3Afunction(invTimeStep)%0A%09%09%09%7Breturn invTimeStep*this.m_angularImpulse%3B%7D%2Cinitialize%3Afunction(def)%7Bthis.m_node1%3Dnew b2JointNode()%3Bthis.m_node2%3Dnew b2JointNode()%3Bthis.m_type%3Ddef.type%3Bthis.m_prev%3Dnull%3Bthis.m_next%3Dnull%3Bthis.m_body1%3Ddef.body1%3Bthis.m_body2%3Ddef.body2%3Bthis.m_collideConnected%3Ddef.collideConnected%3Bthis.m_islandFlag%3Dfalse%3Bthis.m_userData%3Ddef.userData%3Bthis.m_localAnchor1%3Dnew b2Vec2()%3Bthis.m_localAnchor2%3Dnew b2Vec2()%3Bthis.m_localXAxis1%3Dnew b2Vec2()%3Bthis.m_localYAxis1%3Dnew b2Vec2()%3Bthis.m_linearJacobian%3Dnew b2Jacobian()%3Bthis.m_motorJacobian%3Dnew b2Jacobian()%3Bvar tMat%3Bvar tX%3Bvar tY%3BtMat%3Dthis.m_body1.m_R%3BtX%3D(def.anchorPoint.x-this.m_body1.m_position.x)%3BtY%3D(def.anchorPoint.y-this.m_body1.m_position.y)%3Bthis.m_localAnchor1.Set((tX*tMat.col1.x%2BtY*tMat.col1.y)%2C(tX*tMat.col2.x%2BtY*tMat.col2.y))%3BtMat%3Dthis.m_body2.m_R%3BtX%3D(def.anchorPoint.x-this.m_body2.m_position.x)%3BtY%3D(def.anchorPoint.y-this.m_body2.m_position.y)%3Bthis.m_localAnchor2.Set((tX*tMat.col1.x%2BtY*tMat.col1.y)%2C(tX*tMat.col2.x%2BtY*tMat.col2.y))%3BtMat%3Dthis.m_body1.m_R%3BtX%3Ddef.axis.x%3BtY%3Ddef.axis.y%3Bthis.m_localXAxis1.Set((tX*tMat.col1.x%2BtY*tMat.col1.y)%2C(tX*tMat.col2.x%2BtY*tMat.col2.y))%3Bthis.m_localYAxis1.x%3D-this.m_localXAxis1.y%3Bthis.m_localYAxis1.y%3Dthis.m_localXAxis1.x%3Bthis.m_initialAngle%3Dthis.m_body2.m_rotation-this.m_body1.m_rotation%3Bthis.m_linearJacobian.SetZero()%3Bthis.m_linearMass%3D0.0%3Bthis.m_linearImpulse%3D0.0%3Bthis.m_angularMass%3D0.0%3Bthis.m_angularImpulse%3D0.0%3Bthis.m_motorJacobian.SetZero()%3Bthis.m_motorMass%3D0.0%3Bthis.m_motorImpulse%3D0.0%3Bthis.m_limitImpulse%3D0.0%3Bthis.m_limitPositionImpulse%3D0.0%3Bthis.m_lowerTranslation%3Ddef.lowerTranslation%3Bthis.m_upperTranslation%3Ddef.upperTranslation%3Bthis.m_maxMotorForce%3Ddef.motorForce%3Bthis.m_motorSpeed%3Ddef.motorSpeed%3Bthis.m_enableLimit%3Ddef.enableLimit%3Bthis.m_enableMotor%3Ddef.enableMotor%3B%7D%2CPrepareVelocitySolver%3Afunction()%7Bvar b1%3Dthis.m_body1%3Bvar b2%3Dthis.m_body2%3Bvar tMat%3BtMat%3Db1.m_R%3Bvar r1X%3DtMat.col1.x*this.m_localAnchor1.x%2BtMat.col2.x*this.m_localAnchor1.y%3Bvar r1Y%3DtMat.col1.y*this.m_localAnchor1.x%2BtMat.col2.y*this.m_localAnchor1.y%3BtMat%3Db2.m_R%3Bvar r2X%3DtMat.col1.x*this.m_localAnchor2.x%2BtMat.col2.x*this.m_localAnchor2.y%3Bvar r2Y%3DtMat.col1.y*this.m_localAnchor2.x%2BtMat.col2.y*this.m_localAnchor2.y%3Bvar invMass1%3Db1.m_invMass%3Bvar invMass2%3Db2.m_invMass%3Bvar invI1%3Db1.m_invI%3Bvar invI2%3Db2.m_invI%3BtMat%3Db1.m_R%3Bvar ay1X%3DtMat.col1.x*this.m_localYAxis1.x%2BtMat.col2.x*this.m_localYAxis1.y%3Bvar ay1Y%3DtMat.col1.y*this.m_localYAxis1.x%2BtMat.col2.y*this.m_localYAxis1.y%3Bvar eX%3Db2.m_position.x%2Br2X-b1.m_position.x%3Bvar eY%3Db2.m_position.y%2Br2Y-b1.m_position.y%3Bthis.m_linearJacobian.linear1.x%3D-ay1X%3Bthis.m_linearJacobian.linear1.y%3D-ay1Y%3Bthis.m_linearJacobian.linear2.x%3Day1X%3Bthis.m_linearJacobian.linear2.y%3Day1Y%3Bthis.m_linearJacobian.angular1%3D-(eX*ay1Y-eY*ay1X)%3Bthis.m_linearJacobian.angular2%3Dr2X*ay1Y-r2Y*ay1X%3Bthis.m_linearMass%3DinvMass1%2BinvI1*this.m_linearJacobian.angular1*this.m_linearJacobian.angular1%2B%0A%09%09%09invMass2%2BinvI2*this.m_linearJacobian.angular2*this.m_linearJacobian.angular2%3Bthis.m_linearMass%3D1.0%2Fthis.m_linearMass%3Bthis.m_angularMass%3D1.0%2F(invI1%2BinvI2)%3Bif(this.m_enableLimit%7C%7Cthis.m_enableMotor)%0A%09%09%09%7BtMat%3Db1.m_R%3Bvar ax1X%3DtMat.col1.x*this.m_localXAxis1.x%2BtMat.col2.x*this.m_localXAxis1.y%3Bvar ax1Y%3DtMat.col1.y*this.m_localXAxis1.x%2BtMat.col2.y*this.m_localXAxis1.y%3Bthis.m_motorJacobian.linear1.x%3D-ax1X%3Bthis.m_motorJacobian.linear1.y%3D-ax1Y%3Bthis.m_motorJacobian.linear2.x%3Dax1X%3Bthis.m_motorJacobian.linear2.y%3Dax1Y%3Bthis.m_motorJacobian.angular1%3D-(eX*ax1Y-eY*ax1X)%3Bthis.m_motorJacobian.angular2%3Dr2X*ax1Y-r2Y*ax1X%3Bthis.m_motorMass%3DinvMass1%2BinvI1*this.m_motorJacobian.angular1*this.m_motorJacobian.angular1%2B%0A%09%09%09invMass2%2BinvI2*this.m_motorJacobian.angular2*this.m_motorJacobian.angular2%3Bthis.m_motorMass%3D1.0%2Fthis.m_motorMass%3Bif(this.m_enableLimit)%0A%09%09%09%7Bvar dX%3DeX-r1X%3Bvar dY%3DeY-r1Y%3Bvar jointTranslation%3Dax1X*dX%2Bax1Y*dY%3Bif(b2Math.b2Abs(this.m_upperTranslation-this.m_lowerTranslation)<2.0*b2Settings.b2_linearSlop)%0A%09%09%09%7Bthis.m_limitState%3Db2Joint.e_equalLimits%3B%7D%0A%09%09%09else if(jointTranslation<%3Dthis.m_lowerTranslation)%0A%09%09%09%7Bif(this.m_limitState!%3Db2Joint.e_atLowerLimit)%0A%09%09%09%7Bthis.m_limitImpulse%3D0.0%3B%7D%0A%09%09%09this.m_limitState%3Db2Joint.e_atLowerLimit%3B%7D%0A%09%09%09else if(jointTranslation>%3Dthis.m_upperTranslation)%0A%09%09%09%7Bif(this.m_limitState!%3Db2Joint.e_atUpperLimit)%0A%09%09%09%7Bthis.m_limitImpulse%3D0.0%3B%7D%0A%09%09%09this.m_limitState%3Db2Joint.e_atUpperLimit%3B%7D%0A%09%09%09else%0A%09%09%09%7Bthis.m_limitState%3Db2Joint.e_inactiveLimit%3Bthis.m_limitImpulse%3D0.0%3B%7D%7D%7D%0A%09%09%09if(this.m_enableMotor%3D%3Dfalse)%0A%09%09%09%7Bthis.m_motorImpulse%3D0.0%3B%7D%0A%09%09%09if(this.m_enableLimit%3D%3Dfalse)%0A%09%09%09%7Bthis.m_limitImpulse%3D0.0%3B%7D%0A%09%09%09if(b2World.s_enableWarmStarting)%0A%09%09%09%7Bvar P1X%3Dthis.m_linearImpulse*this.m_linearJacobian.linear1.x%2B(this.m_motorImpulse%2Bthis.m_limitImpulse)*this.m_motorJacobian.linear1.x%3Bvar P1Y%3Dthis.m_linearImpulse*this.m_linearJacobian.linear1.y%2B(this.m_motorImpulse%2Bthis.m_limitImpulse)*this.m_motorJacobian.linear1.y%3Bvar P2X%3Dthis.m_linearImpulse*this.m_linearJacobian.linear2.x%2B(this.m_motorImpulse%2Bthis.m_limitImpulse)*this.m_motorJacobian.linear2.x%3Bvar P2Y%3Dthis.m_linearImpulse*this.m_linearJacobian.linear2.y%2B(this.m_motorImpulse%2Bthis.m_limitImpulse)*this.m_motorJacobian.linear2.y%3Bvar L1%3Dthis.m_linearImpulse*this.m_linearJacobian.angular1-this.m_angularImpulse%2B(this.m_motorImpulse%2Bthis.m_limitImpulse)*this.m_motorJacobian.angular1%3Bvar L2%3Dthis.m_linearImpulse*this.m_linearJacobian.angular2%2Bthis.m_angularImpulse%2B(this.m_motorImpulse%2Bthis.m_limitImpulse)*this.m_motorJacobian.angular2%3Bb1.m_linearVelocity.x%2B%3DinvMass1*P1X%3Bb1.m_linearVelocity.y%2B%3DinvMass1*P1Y%3Bb1.m_angularVelocity%2B%3DinvI1*L1%3Bb2.m_linearVelocity.x%2B%3DinvMass2*P2X%3Bb2.m_linearVelocity.y%2B%3DinvMass2*P2Y%3Bb2.m_angularVelocity%2B%3DinvI2*L2%3B%7D%0A%09%09%09else%0A%09%09%09%7Bthis.m_linearImpulse%3D0.0%3Bthis.m_angularImpulse%3D0.0%3Bthis.m_limitImpulse%3D0.0%3Bthis.m_motorImpulse%3D0.0%3B%7D%0A%09%09%09this.m_limitPositionImpulse%3D0.0%3B%7D%2CSolveVelocityConstraints%3Afunction(step)%7Bvar b1%3Dthis.m_body1%3Bvar b2%3Dthis.m_body2%3Bvar invMass1%3Db1.m_invMass%3Bvar invMass2%3Db2.m_invMass%3Bvar invI1%3Db1.m_invI%3Bvar invI2%3Db2.m_invI%3Bvar oldLimitImpulse%3Bvar linearCdot%3Dthis.m_linearJacobian.Compute(b1.m_linearVelocity%2Cb1.m_angularVelocity%2Cb2.m_linearVelocity%2Cb2.m_angularVelocity)%3Bvar linearImpulse%3D-this.m_linearMass*linearCdot%3Bthis.m_linearImpulse%2B%3DlinearImpulse%3Bb1.m_linearVelocity.x%2B%3D(invMass1*linearImpulse)*this.m_linearJacobian.linear1.x%3Bb1.m_linearVelocity.y%2B%3D(invMass1*linearImpulse)*this.m_linearJacobian.linear1.y%3Bb1.m_angularVelocity%2B%3DinvI1*linearImpulse*this.m_linearJacobian.angular1%3Bb2.m_linearVelocity.x%2B%3D(invMass2*linearImpulse)*this.m_linearJacobian.linear2.x%3Bb2.m_linearVelocity.y%2B%3D(invMass2*linearImpulse)*this.m_linearJacobian.linear2.y%3Bb2.m_angularVelocity%2B%3DinvI2*linearImpulse*this.m_linearJacobian.angular2%3Bvar angularCdot%3Db2.m_angularVelocity-b1.m_angularVelocity%3Bvar angularImpulse%3D-this.m_angularMass*angularCdot%3Bthis.m_angularImpulse%2B%3DangularImpulse%3Bb1.m_angularVelocity-%3DinvI1*angularImpulse%3Bb2.m_angularVelocity%2B%3DinvI2*angularImpulse%3Bif(this.m_enableMotor%26%26this.m_limitState!%3Db2Joint.e_equalLimits)%0A%09%09%09%7Bvar motorCdot%3Dthis.m_motorJacobian.Compute(b1.m_linearVelocity%2Cb1.m_angularVelocity%2Cb2.m_linearVelocity%2Cb2.m_angularVelocity)-this.m_motorSpeed%3Bvar motorImpulse%3D-this.m_motorMass*motorCdot%3Bvar oldMotorImpulse%3Dthis.m_motorImpulse%3Bthis.m_motorImpulse%3Db2Math.b2Clamp(this.m_motorImpulse%2BmotorImpulse%2C-step.dt*this.m_maxMotorForce%2Cstep.dt*this.m_maxMotorForce)%3BmotorImpulse%3Dthis.m_motorImpulse-oldMotorImpulse%3Bb1.m_linearVelocity.x%2B%3D(invMass1*motorImpulse)*this.m_motorJacobian.linear1.x%3Bb1.m_linearVelocity.y%2B%3D(invMass1*motorImpulse)*this.m_motorJacobian.linear1.y%3Bb1.m_angularVelocity%2B%3DinvI1*motorImpulse*this.m_motorJacobian.angular1%3Bb2.m_linearVelocity.x%2B%3D(invMass2*motorImpulse)*this.m_motorJacobian.linear2.x%3Bb2.m_linearVelocity.y%2B%3D(invMass2*motorImpulse)*this.m_motorJacobian.linear2.y%3Bb2.m_angularVelocity%2B%3DinvI2*motorImpulse*this.m_motorJacobian.angular2%3B%7D%0A%09%09%09if(this.m_enableLimit%26%26this.m_limitState!%3Db2Joint.e_inactiveLimit)%0A%09%09%09%7Bvar limitCdot%3Dthis.m_motorJacobian.Compute(b1.m_linearVelocity%2Cb1.m_angularVelocity%2Cb2.m_linearVelocity%2Cb2.m_angularVelocity)%3Bvar limitImpulse%3D-this.m_motorMass*limitCdot%3Bif(this.m_limitState%3D%3Db2Joint.e_equalLimits)%0A%09%09%09%7Bthis.m_limitImpulse%2B%3DlimitImpulse%3B%7D%0A%09%09%09else if(this.m_limitState%3D%3Db2Joint.e_atLowerLimit)%0A%09%09%09%7BoldLimitImpulse%3Dthis.m_limitImpulse%3Bthis.m_limitImpulse%3Db2Math.b2Max(this.m_limitImpulse%2BlimitImpulse%2C0.0)%3BlimitImpulse%3Dthis.m_limitImpulse-oldLimitImpulse%3B%7D%0A%09%09%09else if(this.m_limitState%3D%3Db2Joint.e_atUpperLimit)%0A%09%09%09%7BoldLimitImpulse%3Dthis.m_limitImpulse%3Bthis.m_limitImpulse%3Db2Math.b2Min(this.m_limitImpulse%2BlimitImpulse%2C0.0)%3BlimitImpulse%3Dthis.m_limitImpulse-oldLimitImpulse%3B%7D%0A%09%09%09b1.m_linearVelocity.x%2B%3D(invMass1*limitImpulse)*this.m_motorJacobian.linear1.x%3Bb1.m_linearVelocity.y%2B%3D(invMass1*limitImpulse)*this.m_motorJacobian.linear1.y%3Bb1.m_angularVelocity%2B%3DinvI1*limitImpulse*this.m_motorJacobian.angular1%3Bb2.m_linearVelocity.x%2B%3D(invMass2*limitImpulse)*this.m_motorJacobian.linear2.x%3Bb2.m_linearVelocity.y%2B%3D(invMass2*limitImpulse)*this.m_motorJacobian.linear2.y%3Bb2.m_angularVelocity%2B%3DinvI2*limitImpulse*this.m_motorJacobian.angular2%3B%7D%7D%2CSolvePositionConstraints%3Afunction()%7Bvar limitC%3Bvar oldLimitImpulse%3Bvar b1%3Dthis.m_body1%3Bvar b2%3Dthis.m_body2%3Bvar invMass1%3Db1.m_invMass%3Bvar invMass2%3Db2.m_invMass%3Bvar invI1%3Db1.m_invI%3Bvar invI2%3Db2.m_invI%3Bvar tMat%3BtMat%3Db1.m_R%3Bvar r1X%3DtMat.col1.x*this.m_localAnchor1.x%2BtMat.col2.x*this.m_localAnchor1.y%3Bvar r1Y%3DtMat.col1.y*this.m_localAnchor1.x%2BtMat.col2.y*this.m_localAnchor1.y%3BtMat%3Db2.m_R%3Bvar r2X%3DtMat.col1.x*this.m_localAnchor2.x%2BtMat.col2.x*this.m_localAnchor2.y%3Bvar r2Y%3DtMat.col1.y*this.m_localAnchor2.x%2BtMat.col2.y*this.m_localAnchor2.y%3Bvar p1X%3Db1.m_position.x%2Br1X%3Bvar p1Y%3Db1.m_position.y%2Br1Y%3Bvar p2X%3Db2.m_position.x%2Br2X%3Bvar p2Y%3Db2.m_position.y%2Br2Y%3Bvar dX%3Dp2X-p1X%3Bvar dY%3Dp2Y-p1Y%3BtMat%3Db1.m_R%3Bvar ay1X%3DtMat.col1.x*this.m_localYAxis1.x%2BtMat.col2.x*this.m_localYAxis1.y%3Bvar ay1Y%3DtMat.col1.y*this.m_localYAxis1.x%2BtMat.col2.y*this.m_localYAxis1.y%3Bvar linearC%3Day1X*dX%2Bay1Y*dY%3BlinearC%3Db2Math.b2Clamp(linearC%2C-b2Settings.b2_maxLinearCorrection%2Cb2Settings.b2_maxLinearCorrection)%3Bvar linearImpulse%3D-this.m_linearMass*linearC%3Bb1.m_position.x%2B%3D(invMass1*linearImpulse)*this.m_linearJacobian.linear1.x%3Bb1.m_position.y%2B%3D(invMass1*linearImpulse)*this.m_linearJacobian.linear1.y%3Bb1.m_rotation%2B%3DinvI1*linearImpulse*this.m_linearJacobian.angular1%3Bb2.m_position.x%2B%3D(invMass2*linearImpulse)*this.m_linearJacobian.linear2.x%3Bb2.m_position.y%2B%3D(invMass2*linearImpulse)*this.m_linearJacobian.linear2.y%3Bb2.m_rotation%2B%3DinvI2*linearImpulse*this.m_linearJacobian.angular2%3Bvar positionError%3Db2Math.b2Abs(linearC)%3Bvar angularC%3Db2.m_rotation-b1.m_rotation-this.m_initialAngle%3BangularC%3Db2Math.b2Clamp(angularC%2C-b2Settings.b2_maxAngularCorrection%2Cb2Settings.b2_maxAngularCorrection)%3Bvar angularImpulse%3D-this.m_angularMass*angularC%3Bb1.m_rotation-%3Db1.m_invI*angularImpulse%3Bb1.m_R.Set(b1.m_rotation)%3Bb2.m_rotation%2B%3Db2.m_invI*angularImpulse%3Bb2.m_R.Set(b2.m_rotation)%3Bvar angularError%3Db2Math.b2Abs(angularC)%3Bif(this.m_enableLimit%26%26this.m_limitState!%3Db2Joint.e_inactiveLimit)%0A%09%09%09%7BtMat%3Db1.m_R%3Br1X%3DtMat.col1.x*this.m_localAnchor1.x%2BtMat.col2.x*this.m_localAnchor1.y%3Br1Y%3DtMat.col1.y*this.m_localAnchor1.x%2BtMat.col2.y*this.m_localAnchor1.y%3BtMat%3Db2.m_R%3Br2X%3DtMat.col1.x*this.m_localAnchor2.x%2BtMat.col2.x*this.m_localAnchor2.y%3Br2Y%3DtMat.col1.y*this.m_localAnchor2.x%2BtMat.col2.y*this.m_localAnchor2.y%3Bp1X%3Db1.m_position.x%2Br1X%3Bp1Y%3Db1.m_position.y%2Br1Y%3Bp2X%3Db2.m_position.x%2Br2X%3Bp2Y%3Db2.m_position.y%2Br2Y%3BdX%3Dp2X-p1X%3BdY%3Dp2Y-p1Y%3BtMat%3Db1.m_R%3Bvar ax1X%3DtMat.col1.x*this.m_localXAxis1.x%2BtMat.col2.x*this.m_localXAxis1.y%3Bvar ax1Y%3DtMat.col1.y*this.m_localXAxis1.x%2BtMat.col2.y*this.m_localXAxis1.y%3Bvar translation%3D(ax1X*dX%2Bax1Y*dY)%3Bvar limitImpulse%3D0.0%3Bif(this.m_limitState%3D%3Db2Joint.e_equalLimits)%0A%09%09%09%7BlimitC%3Db2Math.b2Clamp(translation%2C-b2Settings.b2_maxLinearCorrection%2Cb2Settings.b2_maxLinearCorrection)%3BlimitImpulse%3D-this.m_motorMass*limitC%3BpositionError%3Db2Math.b2Max(positionError%2Cb2Math.b2Abs(angularC))%3B%7D%0A%09%09%09else if(this.m_limitState%3D%3Db2Joint.e_atLowerLimit)%0A%09%09%09%7BlimitC%3Dtranslation-this.m_lowerTranslation%3BpositionError%3Db2Math.b2Max(positionError%2C-limitC)%3BlimitC%3Db2Math.b2Clamp(limitC%2Bb2Settings.b2_linearSlop%2C-b2Settings.b2_maxLinearCorrection%2C0.0)%3BlimitImpulse%3D-this.m_motorMass*limitC%3BoldLimitImpulse%3Dthis.m_limitPositionImpulse%3Bthis.m_limitPositionImpulse%3Db2Math.b2Max(this.m_limitPositionImpulse%2BlimitImpulse%2C0.0)%3BlimitImpulse%3Dthis.m_limitPositionImpulse-oldLimitImpulse%3B%7D%0A%09%09%09else if(this.m_limitState%3D%3Db2Joint.e_atUpperLimit)%0A%09%09%09%7BlimitC%3Dtranslation-this.m_upperTranslation%3BpositionError%3Db2Math.b2Max(positionError%2ClimitC)%3BlimitC%3Db2Math.b2Clamp(limitC-b2Settings.b2_linearSlop%2C0.0%2Cb2Settings.b2_maxLinearCorrection)%3BlimitImpulse%3D-this.m_motorMass*limitC%3BoldLimitImpulse%3Dthis.m_limitPositionImpulse%3Bthis.m_limitPositionImpulse%3Db2Math.b2Min(this.m_limitPositionImpulse%2BlimitImpulse%2C0.0)%3BlimitImpulse%3Dthis.m_limitPositionImpulse-oldLimitImpulse%3B%7D%0A%09%09%09b1.m_position.x%2B%3D(invMass1*limitImpulse)*this.m_motorJacobian.linear1.x%3Bb1.m_position.y%2B%3D(invMass1*limitImpulse)*this.m_motorJacobian.linear1.y%3Bb1.m_rotation%2B%3DinvI1*limitImpulse*this.m_motorJacobian.angular1%3Bb1.m_R.Set(b1.m_rotation)%3Bb2.m_position.x%2B%3D(invMass2*limitImpulse)*this.m_motorJacobian.linear2.x%3Bb2.m_position.y%2B%3D(invMass2*limitImpulse)*this.m_motorJacobian.linear2.y%3Bb2.m_rotation%2B%3DinvI2*limitImpulse*this.m_motorJacobian.angular2%3Bb2.m_R.Set(b2.m_rotation)%3B%7D%0A%09%09%09return positionError<%3Db2Settings.b2_linearSlop%26%26angularError<%3Db2Settings.b2_angularSlop%3B%7D%2Cm_localAnchor1%3Anew b2Vec2()%2Cm_localAnchor2%3Anew b2Vec2()%2Cm_localXAxis1%3Anew b2Vec2()%2Cm_localYAxis1%3Anew b2Vec2()%2Cm_initialAngle%3Anull%2Cm_linearJacobian%3Anew b2Jacobian()%2Cm_linearMass%3Anull%2Cm_linearImpulse%3Anull%2Cm_angularMass%3Anull%2Cm_angularImpulse%3Anull%2Cm_motorJacobian%3Anew b2Jacobian()%2Cm_motorMass%3Anull%2Cm_motorImpulse%3Anull%2Cm_limitImpulse%3Anull%2Cm_limitPositionImpulse%3Anull%2Cm_lowerTranslation%3Anull%2Cm_upperTranslation%3Anull%2Cm_maxMotorForce%3Anull%2Cm_motorSpeed%3Anull%2Cm_enableLimit%3Anull%2Cm_enableMotor%3Anull%2Cm_limitState%3A0%7D)%3B%0A%09%09%09var b2PrismaticJointDef%3DClass.create()%3BObject.extend(b2PrismaticJointDef.prototype%2Cb2JointDef.prototype)%3BObject.extend(b2PrismaticJointDef.prototype%2C%7Binitialize%3Afunction()%0A%09%09%09%7Bthis.type%3Db2Joint.e_unknownJoint%3Bthis.userData%3Dnull%3Bthis.body1%3Dnull%3Bthis.body2%3Dnull%3Bthis.collideConnected%3Dfalse%3Bthis.type%3Db2Joint.e_prismaticJoint%3Bthis.anchorPoint%3Dnew b2Vec2(0.0%2C0.0)%3Bthis.axis%3Dnew b2Vec2(0.0%2C0.0)%3Bthis.lowerTranslation%3D0.0%3Bthis.upperTranslation%3D0.0%3Bthis.motorForce%3D0.0%3Bthis.motorSpeed%3D0.0%3Bthis.enableLimit%3Dfalse%3Bthis.enableMotor%3Dfalse%3B%7D%2CanchorPoint%3Anull%2Caxis%3Anull%2ClowerTranslation%3Anull%2CupperTranslation%3Anull%2CmotorForce%3Anull%2CmotorSpeed%3Anull%2CenableLimit%3Anull%2CenableMotor%3Anull%7D)%3B%0A%09%09%09var b2PulleyJoint%3DClass.create()%3BObject.extend(b2PulleyJoint.prototype%2Cb2Joint.prototype)%3BObject.extend(b2PulleyJoint.prototype%2C%7BGetAnchor1%3Afunction()%7Bvar tMat%3Dthis.m_body1.m_R%3Breturn new b2Vec2(this.m_body1.m_position.x%2B(tMat.col1.x*this.m_localAnchor1.x%2BtMat.col2.x*this.m_localAnchor1.y)%2Cthis.m_body1.m_position.y%2B(tMat.col1.y*this.m_localAnchor1.x%2BtMat.col2.y*this.m_localAnchor1.y))%3B%7D%2CGetAnchor2%3Afunction()%7Bvar tMat%3Dthis.m_body2.m_R%3Breturn new b2Vec2(this.m_body2.m_position.x%2B(tMat.col1.x*this.m_localAnchor2.x%2BtMat.col2.x*this.m_localAnchor2.y)%2Cthis.m_body2.m_position.y%2B(tMat.col1.y*this.m_localAnchor2.x%2BtMat.col2.y*this.m_localAnchor2.y))%3B%7D%2CGetGroundPoint1%3Afunction()%7Breturn new b2Vec2(this.m_ground.m_position.x%2Bthis.m_groundAnchor1.x%2Cthis.m_ground.m_position.y%2Bthis.m_groundAnchor1.y)%3B%7D%2CGetGroundPoint2%3Afunction()%7Breturn new b2Vec2(this.m_ground.m_position.x%2Bthis.m_groundAnchor2.x%2Cthis.m_ground.m_position.y%2Bthis.m_groundAnchor2.y)%3B%7D%2CGetReactionForce%3Afunction(invTimeStep)%7Breturn new b2Vec2()%3B%7D%2CGetReactionTorque%3Afunction(invTimeStep)%7Breturn 0.0%3B%7D%2CGetLength1%3Afunction()%7Bvar tMat%3BtMat%3Dthis.m_body1.m_R%3Bvar pX%3Dthis.m_body1.m_position.x%2B(tMat.col1.x*this.m_localAnchor1.x%2BtMat.col2.x*this.m_localAnchor1.y)%3Bvar pY%3Dthis.m_body1.m_position.y%2B(tMat.col1.y*this.m_localAnchor1.x%2BtMat.col2.y*this.m_localAnchor1.y)%3Bvar dX%3DpX-(this.m_ground.m_position.x%2Bthis.m_groundAnchor1.x)%3Bvar dY%3DpY-(this.m_ground.m_position.y%2Bthis.m_groundAnchor1.y)%3Breturn Math.sqrt(dX*dX%2BdY*dY)%3B%7D%2CGetLength2%3Afunction()%7Bvar tMat%3BtMat%3Dthis.m_body2.m_R%3Bvar pX%3Dthis.m_body2.m_position.x%2B(tMat.col1.x*this.m_localAnchor2.x%2BtMat.col2.x*this.m_localAnchor2.y)%3Bvar pY%3Dthis.m_body2.m_position.y%2B(tMat.col1.y*this.m_localAnchor2.x%2BtMat.col2.y*this.m_localAnchor2.y)%3Bvar dX%3DpX-(this.m_ground.m_position.x%2Bthis.m_groundAnchor2.x)%3Bvar dY%3DpY-(this.m_ground.m_position.y%2Bthis.m_groundAnchor2.y)%3Breturn Math.sqrt(dX*dX%2BdY*dY)%3B%7D%2CGetRatio%3Afunction()%7Breturn this.m_ratio%3B%7D%2Cinitialize%3Afunction(def)%7Bthis.m_node1%3Dnew b2JointNode()%3Bthis.m_node2%3Dnew b2JointNode()%3Bthis.m_type%3Ddef.type%3Bthis.m_prev%3Dnull%3Bthis.m_next%3Dnull%3Bthis.m_body1%3Ddef.body1%3Bthis.m_body2%3Ddef.body2%3Bthis.m_collideConnected%3Ddef.collideConnected%3Bthis.m_islandFlag%3Dfalse%3Bthis.m_userData%3Ddef.userData%3Bthis.m_groundAnchor1%3Dnew b2Vec2()%3Bthis.m_groundAnchor2%3Dnew b2Vec2()%3Bthis.m_localAnchor1%3Dnew b2Vec2()%3Bthis.m_localAnchor2%3Dnew b2Vec2()%3Bthis.m_u1%3Dnew b2Vec2()%3Bthis.m_u2%3Dnew b2Vec2()%3Bvar tMat%3Bvar tX%3Bvar tY%3Bthis.m_ground%3Dthis.m_body1.m_world.m_groundBody%3Bthis.m_groundAnchor1.x%3Ddef.groundPoint1.x-this.m_ground.m_position.x%3Bthis.m_groundAnchor1.y%3Ddef.groundPoint1.y-this.m_ground.m_position.y%3Bthis.m_groundAnchor2.x%3Ddef.groundPoint2.x-this.m_ground.m_position.x%3Bthis.m_groundAnchor2.y%3Ddef.groundPoint2.y-this.m_ground.m_position.y%3BtMat%3Dthis.m_body1.m_R%3BtX%3Ddef.anchorPoint1.x-this.m_body1.m_position.x%3BtY%3Ddef.anchorPoint1.y-this.m_body1.m_position.y%3Bthis.m_localAnchor1.x%3DtX*tMat.col1.x%2BtY*tMat.col1.y%3Bthis.m_localAnchor1.y%3DtX*tMat.col2.x%2BtY*tMat.col2.y%3BtMat%3Dthis.m_body2.m_R%3BtX%3Ddef.anchorPoint2.x-this.m_body2.m_position.x%3BtY%3Ddef.anchorPoint2.y-this.m_body2.m_position.y%3Bthis.m_localAnchor2.x%3DtX*tMat.col1.x%2BtY*tMat.col1.y%3Bthis.m_localAnchor2.y%3DtX*tMat.col2.x%2BtY*tMat.col2.y%3Bthis.m_ratio%3Ddef.ratio%3BtX%3Ddef.groundPoint1.x-def.anchorPoint1.x%3BtY%3Ddef.groundPoint1.y-def.anchorPoint1.y%3Bvar d1Len%3DMath.sqrt(tX*tX%2BtY*tY)%3BtX%3Ddef.groundPoint2.x-def.anchorPoint2.x%3BtY%3Ddef.groundPoint2.y-def.anchorPoint2.y%3Bvar d2Len%3DMath.sqrt(tX*tX%2BtY*tY)%3Bvar length1%3Db2Math.b2Max(0.5*b2PulleyJoint.b2_minPulleyLength%2Cd1Len)%3Bvar length2%3Db2Math.b2Max(0.5*b2PulleyJoint.b2_minPulleyLength%2Cd2Len)%3Bthis.m_constant%3Dlength1%2Bthis.m_ratio*length2%3Bthis.m_maxLength1%3Db2Math.b2Clamp(def.maxLength1%2Clength1%2Cthis.m_constant-this.m_ratio*b2PulleyJoint.b2_minPulleyLength)%3Bthis.m_maxLength2%3Db2Math.b2Clamp(def.maxLength2%2Clength2%2C(this.m_constant-b2PulleyJoint.b2_minPulleyLength)%2Fthis.m_ratio)%3Bthis.m_pulleyImpulse%3D0.0%3Bthis.m_limitImpulse1%3D0.0%3Bthis.m_limitImpulse2%3D0.0%3B%7D%2CPrepareVelocitySolver%3Afunction()%7Bvar b1%3Dthis.m_body1%3Bvar b2%3Dthis.m_body2%3Bvar tMat%3BtMat%3Db1.m_R%3Bvar r1X%3DtMat.col1.x*this.m_localAnchor1.x%2BtMat.col2.x*this.m_localAnchor1.y%3Bvar r1Y%3DtMat.col1.y*this.m_localAnchor1.x%2BtMat.col2.y*this.m_localAnchor1.y%3BtMat%3Db2.m_R%3Bvar r2X%3DtMat.col1.x*this.m_localAnchor2.x%2BtMat.col2.x*this.m_localAnchor2.y%3Bvar r2Y%3DtMat.col1.y*this.m_localAnchor2.x%2BtMat.col2.y*this.m_localAnchor2.y%3Bvar p1X%3Db1.m_position.x%2Br1X%3Bvar p1Y%3Db1.m_position.y%2Br1Y%3Bvar p2X%3Db2.m_position.x%2Br2X%3Bvar p2Y%3Db2.m_position.y%2Br2Y%3Bvar s1X%3Dthis.m_ground.m_position.x%2Bthis.m_groundAnchor1.x%3Bvar s1Y%3Dthis.m_ground.m_position.y%2Bthis.m_groundAnchor1.y%3Bvar s2X%3Dthis.m_ground.m_position.x%2Bthis.m_groundAnchor2.x%3Bvar s2Y%3Dthis.m_ground.m_position.y%2Bthis.m_groundAnchor2.y%3Bthis.m_u1.Set(p1X-s1X%2Cp1Y-s1Y)%3Bthis.m_u2.Set(p2X-s2X%2Cp2Y-s2Y)%3Bvar length1%3Dthis.m_u1.Length()%3Bvar length2%3Dthis.m_u2.Length()%3Bif(length1>b2Settings.b2_linearSlop)%0A%09%09%09%7Bthis.m_u1.Multiply(1.0%2Flength1)%3B%7D%0A%09%09%09else%0A%09%09%09%7Bthis.m_u1.SetZero()%3B%7D%0A%09%09%09if(length2>b2Settings.b2_linearSlop)%0A%09%09%09%7Bthis.m_u2.Multiply(1.0%2Flength2)%3B%7D%0A%09%09%09else%0A%09%09%09%7Bthis.m_u2.SetZero()%3B%7D%0A%09%09%09if(length1<this.m_maxLength1)%0A%09%09%09%7Bthis.m_limitState1%3Db2Joint.e_inactiveLimit%3Bthis.m_limitImpulse1%3D0.0%3B%7D%0A%09%09%09else%0A%09%09%09%7Bthis.m_limitState1%3Db2Joint.e_atUpperLimit%3Bthis.m_limitPositionImpulse1%3D0.0%3B%7D%0A%09%09%09if(length2<this.m_maxLength2)%0A%09%09%09%7Bthis.m_limitState2%3Db2Joint.e_inactiveLimit%3Bthis.m_limitImpulse2%3D0.0%3B%7D%0A%09%09%09else%0A%09%09%09%7Bthis.m_limitState2%3Db2Joint.e_atUpperLimit%3Bthis.m_limitPositionImpulse2%3D0.0%3B%7D%0A%09%09%09var cr1u1%3Dr1X*this.m_u1.y-r1Y*this.m_u1.x%3Bvar cr2u2%3Dr2X*this.m_u2.y-r2Y*this.m_u2.x%3Bthis.m_limitMass1%3Db1.m_invMass%2Bb1.m_invI*cr1u1*cr1u1%3Bthis.m_limitMass2%3Db2.m_invMass%2Bb2.m_invI*cr2u2*cr2u2%3Bthis.m_pulleyMass%3Dthis.m_limitMass1%2Bthis.m_ratio*this.m_ratio*this.m_limitMass2%3Bthis.m_limitMass1%3D1.0%2Fthis.m_limitMass1%3Bthis.m_limitMass2%3D1.0%2Fthis.m_limitMass2%3Bthis.m_pulleyMass%3D1.0%2Fthis.m_pulleyMass%3Bvar P1X%3D(-this.m_pulleyImpulse-this.m_limitImpulse1)*this.m_u1.x%3Bvar P1Y%3D(-this.m_pulleyImpulse-this.m_limitImpulse1)*this.m_u1.y%3Bvar P2X%3D(-this.m_ratio*this.m_pulleyImpulse-this.m_limitImpulse2)*this.m_u2.x%3Bvar P2Y%3D(-this.m_ratio*this.m_pulleyImpulse-this.m_limitImpulse2)*this.m_u2.y%3Bb1.m_linearVelocity.x%2B%3Db1.m_invMass*P1X%3Bb1.m_linearVelocity.y%2B%3Db1.m_invMass*P1Y%3Bb1.m_angularVelocity%2B%3Db1.m_invI*(r1X*P1Y-r1Y*P1X)%3Bb2.m_linearVelocity.x%2B%3Db2.m_invMass*P2X%3Bb2.m_linearVelocity.y%2B%3Db2.m_invMass*P2Y%3Bb2.m_angularVelocity%2B%3Db2.m_invI*(r2X*P2Y-r2Y*P2X)%3B%7D%2CSolveVelocityConstraints%3Afunction(step)%7Bvar b1%3Dthis.m_body1%3Bvar b2%3Dthis.m_body2%3Bvar tMat%3BtMat%3Db1.m_R%3Bvar r1X%3DtMat.col1.x*this.m_localAnchor1.x%2BtMat.col2.x*this.m_localAnchor1.y%3Bvar r1Y%3DtMat.col1.y*this.m_localAnchor1.x%2BtMat.col2.y*this.m_localAnchor1.y%3BtMat%3Db2.m_R%3Bvar r2X%3DtMat.col1.x*this.m_localAnchor2.x%2BtMat.col2.x*this.m_localAnchor2.y%3Bvar r2Y%3DtMat.col1.y*this.m_localAnchor2.x%2BtMat.col2.y*this.m_localAnchor2.y%3Bvar v1X%3Bvar v1Y%3Bvar v2X%3Bvar v2Y%3Bvar P1X%3Bvar P1Y%3Bvar P2X%3Bvar P2Y%3Bvar Cdot%3Bvar impulse%3Bvar oldLimitImpulse%3Bv1X%3Db1.m_linearVelocity.x%2B(-b1.m_angularVelocity*r1Y)%3Bv1Y%3Db1.m_linearVelocity.y%2B(b1.m_angularVelocity*r1X)%3Bv2X%3Db2.m_linearVelocity.x%2B(-b2.m_angularVelocity*r2Y)%3Bv2Y%3Db2.m_linearVelocity.y%2B(b2.m_angularVelocity*r2X)%3BCdot%3D-(this.m_u1.x*v1X%2Bthis.m_u1.y*v1Y)-this.m_ratio*(this.m_u2.x*v2X%2Bthis.m_u2.y*v2Y)%3Bimpulse%3D-this.m_pulleyMass*Cdot%3Bthis.m_pulleyImpulse%2B%3Dimpulse%3BP1X%3D-impulse*this.m_u1.x%3BP1Y%3D-impulse*this.m_u1.y%3BP2X%3D-this.m_ratio*impulse*this.m_u2.x%3BP2Y%3D-this.m_ratio*impulse*this.m_u2.y%3Bb1.m_linearVelocity.x%2B%3Db1.m_invMass*P1X%3Bb1.m_linearVelocity.y%2B%3Db1.m_invMass*P1Y%3Bb1.m_angularVelocity%2B%3Db1.m_invI*(r1X*P1Y-r1Y*P1X)%3Bb2.m_linearVelocity.x%2B%3Db2.m_invMass*P2X%3Bb2.m_linearVelocity.y%2B%3Db2.m_invMass*P2Y%3Bb2.m_angularVelocity%2B%3Db2.m_invI*(r2X*P2Y-r2Y*P2X)%3Bif(this.m_limitState1%3D%3Db2Joint.e_atUpperLimit)%0A%09%09%09%7Bv1X%3Db1.m_linearVelocity.x%2B(-b1.m_angularVelocity*r1Y)%3Bv1Y%3Db1.m_linearVelocity.y%2B(b1.m_angularVelocity*r1X)%3BCdot%3D-(this.m_u1.x*v1X%2Bthis.m_u1.y*v1Y)%3Bimpulse%3D-this.m_limitMass1*Cdot%3BoldLimitImpulse%3Dthis.m_limitImpulse1%3Bthis.m_limitImpulse1%3Db2Math.b2Max(0.0%2Cthis.m_limitImpulse1%2Bimpulse)%3Bimpulse%3Dthis.m_limitImpulse1-oldLimitImpulse%3BP1X%3D-impulse*this.m_u1.x%3BP1Y%3D-impulse*this.m_u1.y%3Bb1.m_linearVelocity.x%2B%3Db1.m_invMass*P1X%3Bb1.m_linearVelocity.y%2B%3Db1.m_invMass*P1Y%3Bb1.m_angularVelocity%2B%3Db1.m_invI*(r1X*P1Y-r1Y*P1X)%3B%7D%0A%09%09%09if(this.m_limitState2%3D%3Db2Joint.e_atUpperLimit)%0A%09%09%09%7Bv2X%3Db2.m_linearVelocity.x%2B(-b2.m_angularVelocity*r2Y)%3Bv2Y%3Db2.m_linearVelocity.y%2B(b2.m_angularVelocity*r2X)%3BCdot%3D-(this.m_u2.x*v2X%2Bthis.m_u2.y*v2Y)%3Bimpulse%3D-this.m_limitMass2*Cdot%3BoldLimitImpulse%3Dthis.m_limitImpulse2%3Bthis.m_limitImpulse2%3Db2Math.b2Max(0.0%2Cthis.m_limitImpulse2%2Bimpulse)%3Bimpulse%3Dthis.m_limitImpulse2-oldLimitImpulse%3BP2X%3D-impulse*this.m_u2.x%3BP2Y%3D-impulse*this.m_u2.y%3Bb2.m_linearVelocity.x%2B%3Db2.m_invMass*P2X%3Bb2.m_linearVelocity.y%2B%3Db2.m_invMass*P2Y%3Bb2.m_angularVelocity%2B%3Db2.m_invI*(r2X*P2Y-r2Y*P2X)%3B%7D%7D%2CSolvePositionConstraints%3Afunction()%7Bvar b1%3Dthis.m_body1%3Bvar b2%3Dthis.m_body2%3Bvar tMat%3Bvar s1X%3Dthis.m_ground.m_position.x%2Bthis.m_groundAnchor1.x%3Bvar s1Y%3Dthis.m_ground.m_position.y%2Bthis.m_groundAnchor1.y%3Bvar s2X%3Dthis.m_ground.m_position.x%2Bthis.m_groundAnchor2.x%3Bvar s2Y%3Dthis.m_ground.m_position.y%2Bthis.m_groundAnchor2.y%3Bvar r1X%3Bvar r1Y%3Bvar r2X%3Bvar r2Y%3Bvar p1X%3Bvar p1Y%3Bvar p2X%3Bvar p2Y%3Bvar length1%3Bvar length2%3Bvar C%3Bvar impulse%3Bvar oldLimitPositionImpulse%3Bvar linearError%3D0.0%3B%7BtMat%3Db1.m_R%3Br1X%3DtMat.col1.x*this.m_localAnchor1.x%2BtMat.col2.x*this.m_localAnchor1.y%3Br1Y%3DtMat.col1.y*this.m_localAnchor1.x%2BtMat.col2.y*this.m_localAnchor1.y%3BtMat%3Db2.m_R%3Br2X%3DtMat.col1.x*this.m_localAnchor2.x%2BtMat.col2.x*this.m_localAnchor2.y%3Br2Y%3DtMat.col1.y*this.m_localAnchor2.x%2BtMat.col2.y*this.m_localAnchor2.y%3Bp1X%3Db1.m_position.x%2Br1X%3Bp1Y%3Db1.m_position.y%2Br1Y%3Bp2X%3Db2.m_position.x%2Br2X%3Bp2Y%3Db2.m_position.y%2Br2Y%3Bthis.m_u1.Set(p1X-s1X%2Cp1Y-s1Y)%3Bthis.m_u2.Set(p2X-s2X%2Cp2Y-s2Y)%3Blength1%3Dthis.m_u1.Length()%3Blength2%3Dthis.m_u2.Length()%3Bif(length1>b2Settings.b2_linearSlop)%0A%09%09%09%7Bthis.m_u1.Multiply(1.0%2Flength1)%3B%7D%0A%09%09%09else%0A%09%09%09%7Bthis.m_u1.SetZero()%3B%7D%0A%09%09%09if(length2>b2Settings.b2_linearSlop)%0A%09%09%09%7Bthis.m_u2.Multiply(1.0%2Flength2)%3B%7D%0A%09%09%09else%0A%09%09%09%7Bthis.m_u2.SetZero()%3B%7D%0A%09%09%09C%3Dthis.m_constant-length1-this.m_ratio*length2%3BlinearError%3Db2Math.b2Max(linearError%2CMath.abs(C))%3BC%3Db2Math.b2Clamp(C%2C-b2Settings.b2_maxLinearCorrection%2Cb2Settings.b2_maxLinearCorrection)%3Bimpulse%3D-this.m_pulleyMass*C%3Bp1X%3D-impulse*this.m_u1.x%3Bp1Y%3D-impulse*this.m_u1.y%3Bp2X%3D-this.m_ratio*impulse*this.m_u2.x%3Bp2Y%3D-this.m_ratio*impulse*this.m_u2.y%3Bb1.m_position.x%2B%3Db1.m_invMass*p1X%3Bb1.m_position.y%2B%3Db1.m_invMass*p1Y%3Bb1.m_rotation%2B%3Db1.m_invI*(r1X*p1Y-r1Y*p1X)%3Bb2.m_position.x%2B%3Db2.m_invMass*p2X%3Bb2.m_position.y%2B%3Db2.m_invMass*p2Y%3Bb2.m_rotation%2B%3Db2.m_invI*(r2X*p2Y-r2Y*p2X)%3Bb1.m_R.Set(b1.m_rotation)%3Bb2.m_R.Set(b2.m_rotation)%3B%7D%0A%09%09%09if(this.m_limitState1%3D%3Db2Joint.e_atUpperLimit)%0A%09%09%09%7BtMat%3Db1.m_R%3Br1X%3DtMat.col1.x*this.m_localAnchor1.x%2BtMat.col2.x*this.m_localAnchor1.y%3Br1Y%3DtMat.col1.y*this.m_localAnchor1.x%2BtMat.col2.y*this.m_localAnchor1.y%3Bp1X%3Db1.m_position.x%2Br1X%3Bp1Y%3Db1.m_position.y%2Br1Y%3Bthis.m_u1.Set(p1X-s1X%2Cp1Y-s1Y)%3Blength1%3Dthis.m_u1.Length()%3Bif(length1>b2Settings.b2_linearSlop)%0A%09%09%09%7Bthis.m_u1.x*%3D1.0%2Flength1%3Bthis.m_u1.y*%3D1.0%2Flength1%3B%7D%0A%09%09%09else%0A%09%09%09%7Bthis.m_u1.SetZero()%3B%7D%0A%09%09%09C%3Dthis.m_maxLength1-length1%3BlinearError%3Db2Math.b2Max(linearError%2C-C)%3BC%3Db2Math.b2Clamp(C%2Bb2Settings.b2_linearSlop%2C-b2Settings.b2_maxLinearCorrection%2C0.0)%3Bimpulse%3D-this.m_limitMass1*C%3BoldLimitPositionImpulse%3Dthis.m_limitPositionImpulse1%3Bthis.m_limitPositionImpulse1%3Db2Math.b2Max(0.0%2Cthis.m_limitPositionImpulse1%2Bimpulse)%3Bimpulse%3Dthis.m_limitPositionImpulse1-oldLimitPositionImpulse%3Bp1X%3D-impulse*this.m_u1.x%3Bp1Y%3D-impulse*this.m_u1.y%3Bb1.m_position.x%2B%3Db1.m_invMass*p1X%3Bb1.m_position.y%2B%3Db1.m_invMass*p1Y%3Bb1.m_rotation%2B%3Db1.m_invI*(r1X*p1Y-r1Y*p1X)%3Bb1.m_R.Set(b1.m_rotation)%3B%7D%0A%09%09%09if(this.m_limitState2%3D%3Db2Joint.e_atUpperLimit)%0A%09%09%09%7BtMat%3Db2.m_R%3Br2X%3DtMat.col1.x*this.m_localAnchor2.x%2BtMat.col2.x*this.m_localAnchor2.y%3Br2Y%3DtMat.col1.y*this.m_localAnchor2.x%2BtMat.col2.y*this.m_localAnchor2.y%3Bp2X%3Db2.m_position.x%2Br2X%3Bp2Y%3Db2.m_position.y%2Br2Y%3Bthis.m_u2.Set(p2X-s2X%2Cp2Y-s2Y)%3Blength2%3Dthis.m_u2.Length()%3Bif(length2>b2Settings.b2_linearSlop)%0A%09%09%09%7Bthis.m_u2.x*%3D1.0%2Flength2%3Bthis.m_u2.y*%3D1.0%2Flength2%3B%7D%0A%09%09%09else%0A%09%09%09%7Bthis.m_u2.SetZero()%3B%7D%0A%09%09%09C%3Dthis.m_maxLength2-length2%3BlinearError%3Db2Math.b2Max(linearError%2C-C)%3BC%3Db2Math.b2Clamp(C%2Bb2Settings.b2_linearSlop%2C-b2Settings.b2_maxLinearCorrection%2C0.0)%3Bimpulse%3D-this.m_limitMass2*C%3BoldLimitPositionImpulse%3Dthis.m_limitPositionImpulse2%3Bthis.m_limitPositionImpulse2%3Db2Math.b2Max(0.0%2Cthis.m_limitPositionImpulse2%2Bimpulse)%3Bimpulse%3Dthis.m_limitPositionImpulse2-oldLimitPositionImpulse%3Bp2X%3D-impulse*this.m_u2.x%3Bp2Y%3D-impulse*this.m_u2.y%3Bb2.m_position.x%2B%3Db2.m_invMass*p2X%3Bb2.m_position.y%2B%3Db2.m_invMass*p2Y%3Bb2.m_rotation%2B%3Db2.m_invI*(r2X*p2Y-r2Y*p2X)%3Bb2.m_R.Set(b2.m_rotation)%3B%7D%0A%09%09%09return linearError<b2Settings.b2_linearSlop%3B%7D%2Cm_ground%3Anull%2Cm_groundAnchor1%3Anew b2Vec2()%2Cm_groundAnchor2%3Anew b2Vec2()%2Cm_localAnchor1%3Anew b2Vec2()%2Cm_localAnchor2%3Anew b2Vec2()%2Cm_u1%3Anew b2Vec2()%2Cm_u2%3Anew b2Vec2()%2Cm_constant%3Anull%2Cm_ratio%3Anull%2Cm_maxLength1%3Anull%2Cm_maxLength2%3Anull%2Cm_pulleyMass%3Anull%2Cm_limitMass1%3Anull%2Cm_limitMass2%3Anull%2Cm_pulleyImpulse%3Anull%2Cm_limitImpulse1%3Anull%2Cm_limitImpulse2%3Anull%2Cm_limitPositionImpulse1%3Anull%2Cm_limitPositionImpulse2%3Anull%2Cm_limitState1%3A0%2Cm_limitState2%3A0%7D)%3Bb2PulleyJoint.b2_minPulleyLength%3Db2Settings.b2_lengthUnitsPerMeter%3B%0A%09%09%09var b2PulleyJointDef%3DClass.create()%3BObject.extend(b2PulleyJointDef.prototype%2Cb2JointDef.prototype)%3BObject.extend(b2PulleyJointDef.prototype%2C%7Binitialize%3Afunction()%0A%09%09%09%7Bthis.type%3Db2Joint.e_unknownJoint%3Bthis.userData%3Dnull%3Bthis.body1%3Dnull%3Bthis.body2%3Dnull%3Bthis.collideConnected%3Dfalse%3Bthis.groundPoint1%3Dnew b2Vec2()%3Bthis.groundPoint2%3Dnew b2Vec2()%3Bthis.anchorPoint1%3Dnew b2Vec2()%3Bthis.anchorPoint2%3Dnew b2Vec2()%3Bthis.type%3Db2Joint.e_pulleyJoint%3Bthis.groundPoint1.Set(-1.0%2C1.0)%3Bthis.groundPoint2.Set(1.0%2C1.0)%3Bthis.anchorPoint1.Set(-1.0%2C0.0)%3Bthis.anchorPoint2.Set(1.0%2C0.0)%3Bthis.maxLength1%3D0.5*b2PulleyJoint.b2_minPulleyLength%3Bthis.maxLength2%3D0.5*b2PulleyJoint.b2_minPulleyLength%3Bthis.ratio%3D1.0%3Bthis.collideConnected%3Dtrue%3B%7D%2CgroundPoint1%3Anew b2Vec2()%2CgroundPoint2%3Anew b2Vec2()%2CanchorPoint1%3Anew b2Vec2()%2CanchorPoint2%3Anew b2Vec2()%2CmaxLength1%3Anull%2CmaxLength2%3Anull%2Cratio%3Anull%7D)%3B%0A%09%09%09var b2RevoluteJoint%3DClass.create()%3BObject.extend(b2RevoluteJoint.prototype%2Cb2Joint.prototype)%3BObject.extend(b2RevoluteJoint.prototype%2C%7BGetAnchor1%3Afunction()%7Bvar tMat%3Dthis.m_body1.m_R%3Breturn new b2Vec2(this.m_body1.m_position.x%2B(tMat.col1.x*this.m_localAnchor1.x%2BtMat.col2.x*this.m_localAnchor1.y)%2Cthis.m_body1.m_position.y%2B(tMat.col1.y*this.m_localAnchor1.x%2BtMat.col2.y*this.m_localAnchor1.y))%3B%7D%2CGetAnchor2%3Afunction()%7Bvar tMat%3Dthis.m_body2.m_R%3Breturn new b2Vec2(this.m_body2.m_position.x%2B(tMat.col1.x*this.m_localAnchor2.x%2BtMat.col2.x*this.m_localAnchor2.y)%2Cthis.m_body2.m_position.y%2B(tMat.col1.y*this.m_localAnchor2.x%2BtMat.col2.y*this.m_localAnchor2.y))%3B%7D%2CGetJointAngle%3Afunction()%7Breturn this.m_body2.m_rotation-this.m_body1.m_rotation%3B%7D%2CGetJointSpeed%3Afunction()%7Breturn this.m_body2.m_angularVelocity-this.m_body1.m_angularVelocity%3B%7D%2CGetMotorTorque%3Afunction(invTimeStep)%7Breturn invTimeStep*this.m_motorImpulse%3B%7D%2CSetMotorSpeed%3Afunction(speed)%0A%09%09%09%7Bthis.m_motorSpeed%3Dspeed%3B%7D%2CSetMotorTorque%3Afunction(torque)%0A%09%09%09%7Bthis.m_maxMotorTorque%3Dtorque%3B%7D%2CGetReactionForce%3Afunction(invTimeStep)%0A%09%09%09%7Bvar tVec%3Dthis.m_ptpImpulse.Copy()%3BtVec.Multiply(invTimeStep)%3Breturn tVec%3B%7D%2CGetReactionTorque%3Afunction(invTimeStep)%0A%09%09%09%7Breturn invTimeStep*this.m_limitImpulse%3B%7D%2Cinitialize%3Afunction(def)%7Bthis.m_node1%3Dnew b2JointNode()%3Bthis.m_node2%3Dnew b2JointNode()%3Bthis.m_type%3Ddef.type%3Bthis.m_prev%3Dnull%3Bthis.m_next%3Dnull%3Bthis.m_body1%3Ddef.body1%3Bthis.m_body2%3Ddef.body2%3Bthis.m_collideConnected%3Ddef.collideConnected%3Bthis.m_islandFlag%3Dfalse%3Bthis.m_userData%3Ddef.userData%3Bthis.K%3Dnew b2Mat22()%3Bthis.K1%3Dnew b2Mat22()%3Bthis.K2%3Dnew b2Mat22()%3Bthis.K3%3Dnew b2Mat22()%3Bthis.m_localAnchor1%3Dnew b2Vec2()%3Bthis.m_localAnchor2%3Dnew b2Vec2()%3Bthis.m_ptpImpulse%3Dnew b2Vec2()%3Bthis.m_ptpMass%3Dnew b2Mat22()%3Bvar tMat%3Bvar tX%3Bvar tY%3BtMat%3Dthis.m_body1.m_R%3BtX%3Ddef.anchorPoint.x-this.m_body1.m_position.x%3BtY%3Ddef.anchorPoint.y-this.m_body1.m_position.y%3Bthis.m_localAnchor1.x%3DtX*tMat.col1.x%2BtY*tMat.col1.y%3Bthis.m_localAnchor1.y%3DtX*tMat.col2.x%2BtY*tMat.col2.y%3BtMat%3Dthis.m_body2.m_R%3BtX%3Ddef.anchorPoint.x-this.m_body2.m_position.x%3BtY%3Ddef.anchorPoint.y-this.m_body2.m_position.y%3Bthis.m_localAnchor2.x%3DtX*tMat.col1.x%2BtY*tMat.col1.y%3Bthis.m_localAnchor2.y%3DtX*tMat.col2.x%2BtY*tMat.col2.y%3Bthis.m_intialAngle%3Dthis.m_body2.m_rotation-this.m_body1.m_rotation%3Bthis.m_ptpImpulse.Set(0.0%2C0.0)%3Bthis.m_motorImpulse%3D0.0%3Bthis.m_limitImpulse%3D0.0%3Bthis.m_limitPositionImpulse%3D0.0%3Bthis.m_lowerAngle%3Ddef.lowerAngle%3Bthis.m_upperAngle%3Ddef.upperAngle%3Bthis.m_maxMotorTorque%3Ddef.motorTorque%3Bthis.m_motorSpeed%3Ddef.motorSpeed%3Bthis.m_enableLimit%3Ddef.enableLimit%3Bthis.m_enableMotor%3Ddef.enableMotor%3B%7D%2CK%3Anew b2Mat22()%2CK1%3Anew b2Mat22()%2CK2%3Anew b2Mat22()%2CK3%3Anew b2Mat22()%2CPrepareVelocitySolver%3Afunction()%7Bvar b1%3Dthis.m_body1%3Bvar b2%3Dthis.m_body2%3Bvar tMat%3BtMat%3Db1.m_R%3Bvar r1X%3DtMat.col1.x*this.m_localAnchor1.x%2BtMat.col2.x*this.m_localAnchor1.y%3Bvar r1Y%3DtMat.col1.y*this.m_localAnchor1.x%2BtMat.col2.y*this.m_localAnchor1.y%3BtMat%3Db2.m_R%3Bvar r2X%3DtMat.col1.x*this.m_localAnchor2.x%2BtMat.col2.x*this.m_localAnchor2.y%3Bvar r2Y%3DtMat.col1.y*this.m_localAnchor2.x%2BtMat.col2.y*this.m_localAnchor2.y%3Bvar invMass1%3Db1.m_invMass%3Bvar invMass2%3Db2.m_invMass%3Bvar invI1%3Db1.m_invI%3Bvar invI2%3Db2.m_invI%3Bthis.K1.col1.x%3DinvMass1%2BinvMass2%3Bthis.K1.col2.x%3D0.0%3Bthis.K1.col1.y%3D0.0%3Bthis.K1.col2.y%3DinvMass1%2BinvMass2%3Bthis.K2.col1.x%3DinvI1*r1Y*r1Y%3Bthis.K2.col2.x%3D-invI1*r1X*r1Y%3Bthis.K2.col1.y%3D-invI1*r1X*r1Y%3Bthis.K2.col2.y%3DinvI1*r1X*r1X%3Bthis.K3.col1.x%3DinvI2*r2Y*r2Y%3Bthis.K3.col2.x%3D-invI2*r2X*r2Y%3Bthis.K3.col1.y%3D-invI2*r2X*r2Y%3Bthis.K3.col2.y%3DinvI2*r2X*r2X%3Bthis.K.SetM(this.K1)%3Bthis.K.AddM(this.K2)%3Bthis.K.AddM(this.K3)%3Bthis.K.Invert(this.m_ptpMass)%3Bthis.m_motorMass%3D1.0%2F(invI1%2BinvI2)%3Bif(this.m_enableMotor%3D%3Dfalse)%0A%09%09%09%7Bthis.m_motorImpulse%3D0.0%3B%7D%0A%09%09%09if(this.m_enableLimit)%0A%09%09%09%7Bvar jointAngle%3Db2.m_rotation-b1.m_rotation-this.m_intialAngle%3Bif(b2Math.b2Abs(this.m_upperAngle-this.m_lowerAngle)<2.0*b2Settings.b2_angularSlop)%0A%09%09%09%7Bthis.m_limitState%3Db2Joint.e_equalLimits%3B%7D%0A%09%09%09else if(jointAngle<%3Dthis.m_lowerAngle)%0A%09%09%09%7Bif(this.m_limitState!%3Db2Joint.e_atLowerLimit)%0A%09%09%09%7Bthis.m_limitImpulse%3D0.0%3B%7D%0A%09%09%09this.m_limitState%3Db2Joint.e_atLowerLimit%3B%7D%0A%09%09%09else if(jointAngle>%3Dthis.m_upperAngle)%0A%09%09%09%7Bif(this.m_limitState!%3Db2Joint.e_atUpperLimit)%0A%09%09%09%7Bthis.m_limitImpulse%3D0.0%3B%7D%0A%09%09%09this.m_limitState%3Db2Joint.e_atUpperLimit%3B%7D%0A%09%09%09else%0A%09%09%09%7Bthis.m_limitState%3Db2Joint.e_inactiveLimit%3Bthis.m_limitImpulse%3D0.0%3B%7D%7D%0A%09%09%09else%0A%09%09%09%7Bthis.m_limitImpulse%3D0.0%3B%7D%0A%09%09%09if(b2World.s_enableWarmStarting)%0A%09%09%09%7Bb1.m_linearVelocity.x-%3DinvMass1*this.m_ptpImpulse.x%3Bb1.m_linearVelocity.y-%3DinvMass1*this.m_ptpImpulse.y%3Bb1.m_angularVelocity-%3DinvI1*((r1X*this.m_ptpImpulse.y-r1Y*this.m_ptpImpulse.x)%2Bthis.m_motorImpulse%2Bthis.m_limitImpulse)%3Bb2.m_linearVelocity.x%2B%3DinvMass2*this.m_ptpImpulse.x%3Bb2.m_linearVelocity.y%2B%3DinvMass2*this.m_ptpImpulse.y%3Bb2.m_angularVelocity%2B%3DinvI2*((r2X*this.m_ptpImpulse.y-r2Y*this.m_ptpImpulse.x)%2Bthis.m_motorImpulse%2Bthis.m_limitImpulse)%3B%7D%0A%09%09%09else%7Bthis.m_ptpImpulse.SetZero()%3Bthis.m_motorImpulse%3D0.0%3Bthis.m_limitImpulse%3D0.0%3B%7D%0A%09%09%09this.m_limitPositionImpulse%3D0.0%3B%7D%2CSolveVelocityConstraints%3Afunction(step)%7Bvar b1%3Dthis.m_body1%3Bvar b2%3Dthis.m_body2%3Bvar tMat%3BtMat%3Db1.m_R%3Bvar r1X%3DtMat.col1.x*this.m_localAnchor1.x%2BtMat.col2.x*this.m_localAnchor1.y%3Bvar r1Y%3DtMat.col1.y*this.m_localAnchor1.x%2BtMat.col2.y*this.m_localAnchor1.y%3BtMat%3Db2.m_R%3Bvar r2X%3DtMat.col1.x*this.m_localAnchor2.x%2BtMat.col2.x*this.m_localAnchor2.y%3Bvar r2Y%3DtMat.col1.y*this.m_localAnchor2.x%2BtMat.col2.y*this.m_localAnchor2.y%3Bvar oldLimitImpulse%3Bvar ptpCdotX%3Db2.m_linearVelocity.x%2B(-b2.m_angularVelocity*r2Y)-b1.m_linearVelocity.x-(-b1.m_angularVelocity*r1Y)%3Bvar ptpCdotY%3Db2.m_linearVelocity.y%2B(b2.m_angularVelocity*r2X)-b1.m_linearVelocity.y-(b1.m_angularVelocity*r1X)%3Bvar ptpImpulseX%3D-(this.m_ptpMass.col1.x*ptpCdotX%2Bthis.m_ptpMass.col2.x*ptpCdotY)%3Bvar ptpImpulseY%3D-(this.m_ptpMass.col1.y*ptpCdotX%2Bthis.m_ptpMass.col2.y*ptpCdotY)%3Bthis.m_ptpImpulse.x%2B%3DptpImpulseX%3Bthis.m_ptpImpulse.y%2B%3DptpImpulseY%3Bb1.m_linearVelocity.x-%3Db1.m_invMass*ptpImpulseX%3Bb1.m_linearVelocity.y-%3Db1.m_invMass*ptpImpulseY%3Bb1.m_angularVelocity-%3Db1.m_invI*(r1X*ptpImpulseY-r1Y*ptpImpulseX)%3Bb2.m_linearVelocity.x%2B%3Db2.m_invMass*ptpImpulseX%3Bb2.m_linearVelocity.y%2B%3Db2.m_invMass*ptpImpulseY%3Bb2.m_angularVelocity%2B%3Db2.m_invI*(r2X*ptpImpulseY-r2Y*ptpImpulseX)%3Bif(this.m_enableMotor%26%26this.m_limitState!%3Db2Joint.e_equalLimits)%0A%09%09%09%7Bvar motorCdot%3Db2.m_angularVelocity-b1.m_angularVelocity-this.m_motorSpeed%3Bvar motorImpulse%3D-this.m_motorMass*motorCdot%3Bvar oldMotorImpulse%3Dthis.m_motorImpulse%3Bthis.m_motorImpulse%3Db2Math.b2Clamp(this.m_motorImpulse%2BmotorImpulse%2C-step.dt*this.m_maxMotorTorque%2Cstep.dt*this.m_maxMotorTorque)%3BmotorImpulse%3Dthis.m_motorImpulse-oldMotorImpulse%3Bb1.m_angularVelocity-%3Db1.m_invI*motorImpulse%3Bb2.m_angularVelocity%2B%3Db2.m_invI*motorImpulse%3B%7D%0A%09%09%09if(this.m_enableLimit%26%26this.m_limitState!%3Db2Joint.e_inactiveLimit)%0A%09%09%09%7Bvar limitCdot%3Db2.m_angularVelocity-b1.m_angularVelocity%3Bvar limitImpulse%3D-this.m_motorMass*limitCdot%3Bif(this.m_limitState%3D%3Db2Joint.e_equalLimits)%0A%09%09%09%7Bthis.m_limitImpulse%2B%3DlimitImpulse%3B%7D%0A%09%09%09else if(this.m_limitState%3D%3Db2Joint.e_atLowerLimit)%0A%09%09%09%7BoldLimitImpulse%3Dthis.m_limitImpulse%3Bthis.m_limitImpulse%3Db2Math.b2Max(this.m_limitImpulse%2BlimitImpulse%2C0.0)%3BlimitImpulse%3Dthis.m_limitImpulse-oldLimitImpulse%3B%7D%0A%09%09%09else if(this.m_limitState%3D%3Db2Joint.e_atUpperLimit)%0A%09%09%09%7BoldLimitImpulse%3Dthis.m_limitImpulse%3Bthis.m_limitImpulse%3Db2Math.b2Min(this.m_limitImpulse%2BlimitImpulse%2C0.0)%3BlimitImpulse%3Dthis.m_limitImpulse-oldLimitImpulse%3B%7D%0A%09%09%09b1.m_angularVelocity-%3Db1.m_invI*limitImpulse%3Bb2.m_angularVelocity%2B%3Db2.m_invI*limitImpulse%3B%7D%7D%2CSolvePositionConstraints%3Afunction()%7Bvar oldLimitImpulse%3Bvar limitC%3Bvar b1%3Dthis.m_body1%3Bvar b2%3Dthis.m_body2%3Bvar positionError%3D0.0%3Bvar tMat%3BtMat%3Db1.m_R%3Bvar r1X%3DtMat.col1.x*this.m_localAnchor1.x%2BtMat.col2.x*this.m_localAnchor1.y%3Bvar r1Y%3DtMat.col1.y*this.m_localAnchor1.x%2BtMat.col2.y*this.m_localAnchor1.y%3BtMat%3Db2.m_R%3Bvar r2X%3DtMat.col1.x*this.m_localAnchor2.x%2BtMat.col2.x*this.m_localAnchor2.y%3Bvar r2Y%3DtMat.col1.y*this.m_localAnchor2.x%2BtMat.col2.y*this.m_localAnchor2.y%3Bvar p1X%3Db1.m_position.x%2Br1X%3Bvar p1Y%3Db1.m_position.y%2Br1Y%3Bvar p2X%3Db2.m_position.x%2Br2X%3Bvar p2Y%3Db2.m_position.y%2Br2Y%3Bvar ptpCX%3Dp2X-p1X%3Bvar ptpCY%3Dp2Y-p1Y%3BpositionError%3DMath.sqrt(ptpCX*ptpCX%2BptpCY*ptpCY)%3Bvar invMass1%3Db1.m_invMass%3Bvar invMass2%3Db2.m_invMass%3Bvar invI1%3Db1.m_invI%3Bvar invI2%3Db2.m_invI%3Bthis.K1.col1.x%3DinvMass1%2BinvMass2%3Bthis.K1.col2.x%3D0.0%3Bthis.K1.col1.y%3D0.0%3Bthis.K1.col2.y%3DinvMass1%2BinvMass2%3Bthis.K2.col1.x%3DinvI1*r1Y*r1Y%3Bthis.K2.col2.x%3D-invI1*r1X*r1Y%3Bthis.K2.col1.y%3D-invI1*r1X*r1Y%3Bthis.K2.col2.y%3DinvI1*r1X*r1X%3Bthis.K3.col1.x%3DinvI2*r2Y*r2Y%3Bthis.K3.col2.x%3D-invI2*r2X*r2Y%3Bthis.K3.col1.y%3D-invI2*r2X*r2Y%3Bthis.K3.col2.y%3DinvI2*r2X*r2X%3Bthis.K.SetM(this.K1)%3Bthis.K.AddM(this.K2)%3Bthis.K.AddM(this.K3)%3Bthis.K.Solve(b2RevoluteJoint.tImpulse%2C-ptpCX%2C-ptpCY)%3Bvar impulseX%3Db2RevoluteJoint.tImpulse.x%3Bvar impulseY%3Db2RevoluteJoint.tImpulse.y%3Bb1.m_position.x-%3Db1.m_invMass*impulseX%3Bb1.m_position.y-%3Db1.m_invMass*impulseY%3Bb1.m_rotation-%3Db1.m_invI*(r1X*impulseY-r1Y*impulseX)%3Bb1.m_R.Set(b1.m_rotation)%3Bb2.m_position.x%2B%3Db2.m_invMass*impulseX%3Bb2.m_position.y%2B%3Db2.m_invMass*impulseY%3Bb2.m_rotation%2B%3Db2.m_invI*(r2X*impulseY-r2Y*impulseX)%3Bb2.m_R.Set(b2.m_rotation)%3Bvar angularError%3D0.0%3Bif(this.m_enableLimit%26%26this.m_limitState!%3Db2Joint.e_inactiveLimit)%0A%09%09%09%7Bvar angle%3Db2.m_rotation-b1.m_rotation-this.m_intialAngle%3Bvar limitImpulse%3D0.0%3Bif(this.m_limitState%3D%3Db2Joint.e_equalLimits)%0A%09%09%09%7BlimitC%3Db2Math.b2Clamp(angle%2C-b2Settings.b2_maxAngularCorrection%2Cb2Settings.b2_maxAngularCorrection)%3BlimitImpulse%3D-this.m_motorMass*limitC%3BangularError%3Db2Math.b2Abs(limitC)%3B%7D%0A%09%09%09else if(this.m_limitState%3D%3Db2Joint.e_atLowerLimit)%0A%09%09%09%7BlimitC%3Dangle-this.m_lowerAngle%3BangularError%3Db2Math.b2Max(0.0%2C-limitC)%3BlimitC%3Db2Math.b2Clamp(limitC%2Bb2Settings.b2_angularSlop%2C-b2Settings.b2_maxAngularCorrection%2C0.0)%3BlimitImpulse%3D-this.m_motorMass*limitC%3BoldLimitImpulse%3Dthis.m_limitPositionImpulse%3Bthis.m_limitPositionImpulse%3Db2Math.b2Max(this.m_limitPositionImpulse%2BlimitImpulse%2C0.0)%3BlimitImpulse%3Dthis.m_limitPositionImpulse-oldLimitImpulse%3B%7D%0A%09%09%09else if(this.m_limitState%3D%3Db2Joint.e_atUpperLimit)%0A%09%09%09%7BlimitC%3Dangle-this.m_upperAngle%3BangularError%3Db2Math.b2Max(0.0%2ClimitC)%3BlimitC%3Db2Math.b2Clamp(limitC-b2Settings.b2_angularSlop%2C0.0%2Cb2Settings.b2_maxAngularCorrection)%3BlimitImpulse%3D-this.m_motorMass*limitC%3BoldLimitImpulse%3Dthis.m_limitPositionImpulse%3Bthis.m_limitPositionImpulse%3Db2Math.b2Min(this.m_limitPositionImpulse%2BlimitImpulse%2C0.0)%3BlimitImpulse%3Dthis.m_limitPositionImpulse-oldLimitImpulse%3B%7D%0A%09%09%09b1.m_rotation-%3Db1.m_invI*limitImpulse%3Bb1.m_R.Set(b1.m_rotation)%3Bb2.m_rotation%2B%3Db2.m_invI*limitImpulse%3Bb2.m_R.Set(b2.m_rotation)%3B%7D%0A%09%09%09return positionError<%3Db2Settings.b2_linearSlop%26%26angularError<%3Db2Settings.b2_angularSlop%3B%7D%2Cm_localAnchor1%3Anew b2Vec2()%2Cm_localAnchor2%3Anew b2Vec2()%2Cm_ptpImpulse%3Anew b2Vec2()%2Cm_motorImpulse%3Anull%2Cm_limitImpulse%3Anull%2Cm_limitPositionImpulse%3Anull%2Cm_ptpMass%3Anew b2Mat22()%2Cm_motorMass%3Anull%2Cm_intialAngle%3Anull%2Cm_lowerAngle%3Anull%2Cm_upperAngle%3Anull%2Cm_maxMotorTorque%3Anull%2Cm_motorSpeed%3Anull%2Cm_enableLimit%3Anull%2Cm_enableMotor%3Anull%2Cm_limitState%3A0%7D)%3Bb2RevoluteJoint.tImpulse%3Dnew b2Vec2()%3B%0A%09%09%09var b2RevoluteJointDef%3DClass.create()%3BObject.extend(b2RevoluteJointDef.prototype%2Cb2JointDef.prototype)%3BObject.extend(b2RevoluteJointDef.prototype%2C%7Binitialize%3Afunction()%0A%09%09%09%7Bthis.type%3Db2Joint.e_unknownJoint%3Bthis.userData%3Dnull%3Bthis.body1%3Dnull%3Bthis.body2%3Dnull%3Bthis.collideConnected%3Dfalse%3Bthis.type%3Db2Joint.e_revoluteJoint%3Bthis.anchorPoint%3Dnew b2Vec2(0.0%2C0.0)%3Bthis.lowerAngle%3D0.0%3Bthis.upperAngle%3D0.0%3Bthis.motorTorque%3D0.0%3Bthis.motorSpeed%3D0.0%3Bthis.enableLimit%3Dfalse%3Bthis.enableMotor%3Dfalse%3B%7D%2CanchorPoint%3Anull%2ClowerAngle%3Anull%2CupperAngle%3Anull%2CmotorTorque%3Anull%2CmotorSpeed%3Anull%2CenableLimit%3Anull%2CenableMotor%3Anull%7D)%3B%0A%0A%0A%0A%0A%0A%0A%0A%0A%0A%09%09%09var delta %3D %5B 0%2C 0 %5D%3B%0A%09%09%09var stage %3D %5B window.screenX%2C window.screenY%2C window.innerWidth%2C window.innerHeight %5D%3B%0A%09%09%09getBrowserDimensions()%3B%0A%0A%09%09%09var isRunning %3D false%3B%0A%09%09%09var isMouseDown %3D false%3B%0A%0A%09%09%09var worldAABB%3B%0A%09%09%09var world%3B%0A%09%09%09var iterations %3D 1%3B%0A%09%09%09var timeStep %3D 1 %2F 25%3B %0A%0A%09%09%09var walls %3D %5B%5D%3B%0A%09%09%09var wall_thickness %3D 200%3B%0A%09%09%09var wallsSetted %3D false%3B%0A%0A%09%09%09var mouseJoint%3B%0A%09%09%09var mouse %3D %7B x%3A 0%2C y%3A 0 %7D%3B%0A%0A%09%09%09var mouseOnClick %3D %5B%5D%3B%0A%0A%09%09%09var elements %3D %5B%5D%3B%0A%09%09%09var bodies %3D %5B%5D%3B%0A%09%09%09var properties %3D %5B%5D%3B%0A%0A%09%09%09var query%2C page %3D 0%3B%0A%0A%09%09%09var gWebSearch%2C gImageSearch%3B%0A%09%09%09var imFeelingLuckyMode %3D false%3B%0A%09%09%09var resultBodies %3D %5B%5D%3B%0A%0A%09%09%09var gravity %3D %7B x%3A 0%2C y%3A 1 %7D%3B%0A%0A%0A%0A%0A%0AsetTimeout(function()%7B%0A%0A%09%09%09grav()%3B%0A%09%09%09init()%3B%0A%09%09%09run()%3B%0A%09%09%09%7D%2C1000)%3B%0A%0A%0A%09%09%09function init() %7B%0A%0A%0A%09%09%09%09document.addEventListener( 'mousedown'%2C onDocumentMouseDown%2C false )%3B%0A%09%09%09%09document.addEventListener( 'mouseup'%2C onDocumentMouseUp%2C false )%3B%0A%09%09%09%09document.addEventListener( 'mousemove'%2C onDocumentMouseMove%2C false )%3B%0A%0A%09%09%09%09document.addEventListener( 'keyup'%2C onDocumentKeyUp%2C false )%3B%0A%0A%0A%09%09%09%09document.addEventListener( 'touchstart'%2C onDocumentTouchStart%2C false )%3B%0A%09%09%09%09document.addEventListener( 'touchmove'%2C onDocumentTouchMove%2C false )%3B%0A%09%09%09%09document.addEventListener( 'touchend'%2C onDocumentTouchEnd%2C false )%3B%0A%0A%09%09%09%09window.addEventListener( 'deviceorientation'%2C onWindowDeviceOrientation%2C false )%3B%0A%0A%09%09%09%09%2F%2F init box2d%0A%0A%09%09%09%09worldAABB %3D new b2AABB()%3B%0A%09%09%09%09worldAABB.minVertex.Set( - 200%2C - 200 )%3B%0A%09%09%09%09worldAABB.maxVertex.Set( window.innerWidth %2B 200%2C window.innerHeight %2B 200 )%3B%0A%0A%09%09%09%09world %3D new b2World( worldAABB%2C new b2Vec2( 0%2C 0 )%2C true )%3B%0A%0A%09%09%09%09%2F%2F walls%0A%09%09%09%09setWalls()%3B%0A%0A%09%09%09%09%2F%2F Get box2d elements%0A%0A%09%09%09%09elements %3D getElementsByClass("box2d")%3B%0A%0A%09%09%09%09for ( var i %3D 0%3B i < elements.length%3B i %2B%2B ) %7B%0A%0A%09%09%09%09%09properties%5Bi%5D %3D getElementProperties( elements%5Bi%5D )%3B%0A%0A%09%09%09%09%7D%0A%0A%09%09%09%09for ( var i %3D 0%3B i < elements.length%3B i %2B%2B ) %7B%0A%0A%09%09%09%09%09var element %3D elements%5B i %5D%3B%0A%09%09%09%09%09element.style.position %3D 'absolute'%3B%0A%09%09%09%09%09element.style.left %3D properties%5Bi%5D%5B0%5D %2B 'px'%3B%0A%09%09%09%09%09element.style.top %3D properties%5Bi%5D%5B1%5D %2B 'px'%3B%0A%09%09%09%09%09element.style.width %3D properties%5Bi%5D%5B2%5D %2B 'px'%3B%0A%09%09%09%09%09element.addEventListener( 'mousedown'%2C onElementMouseDown%2C false )%3B%0A%09%09%09%09%09element.addEventListener( 'mouseup'%2C onElementMouseUp%2C false )%3B%0A%09%09%09%09%09element.addEventListener( 'click'%2C onElementClick%2C false )%3B%0A%0A%09%09%09%09%09bodies%5Bi%5D %3D createBox( world%2C properties%5Bi%5D%5B0%5D %2B (properties%5Bi%5D%5B2%5D >> 1)%2C properties%5Bi%5D%5B1%5D %2B (properties%5Bi%5D%5B3%5D >> 1)%2C properties%5Bi%5D%5B2%5D %2F 2%2C properties%5Bi%5D%5B3%5D %2F 2%2C false )%3B%0A%0A%09%09%09%09%09%2F%2F Clean position dependencies%0A%0A%09%09%09%09%09while ( element.offsetParent ) %7B%0A%0A%09%09%09%09%09%09element %3D element.offsetParent%3B%0A%09%09%09%09%09%09element.style.position %3D 'static'%3B%0A%0A%09%09%09%09%09%7D%0A%0A%09%09%09%09%7D%0A%0A%09%09%09%7D%0A%0A%09%09%09function run() %7B%0A%0A%09%09%09%09isRunning %3D true%3B%0A%09%09%09%09setInterval( loop%2C 25 )%3B%0A%0A%09%09%09%7D%0A%0A%09%09%09%2F%2F%0A%0A%09%09%09function onDocumentMouseDown( event ) %7B%0A%0A%09%09%09%09isMouseDown %3D true%3B%0A%0A%09%09%09%7D%0A%0A%09%09%09function onDocumentMouseUp( event ) %7B%0A%0A%09%09%09%09isMouseDown %3D false%3B%0A%0A%09%09%09%7D%0A%0A%09%09%09function onDocumentMouseMove( event ) %7B%0A%0A%09%09%09%09if ( !isRunning ) run()%3B%0A%0A%09%09%09%09mouse.x %3D event.clientX%3B%0A%09%09%09%09mouse.y %3D event.clientY%3B%0A%0A%09%09%09%7D%0A%0A%09%09%09function onDocumentKeyUp( event ) %7B%0A%0A%09%09%09%09if ( event.keyCode %3D%3D 13 ) search()%3B%0A%0A%09%09%09%7D%0A%0A%09%09%09function onDocumentTouchStart( event ) %7B%0A%0A%09%09%09%09if ( event.touches.length %3D%3D 1 ) %7B%0A%0A%09%09%09%09%09if ( !isRunning ) %7B%0A%0A%09%09%09%09%09%09run()%3B%0A%0A%09%09%09%09%09%7D%0A%0A%09%09%09%09%09mouse.x %3D event.touches%5B0%5D.pageX%3B%0A%09%09%09%09%09mouse.y %3D event.touches%5B0%5D.pageY%3B%0A%09%09%09%09%09isMouseDown %3D true%3B%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%0A%09%09%09function onDocumentTouchMove( event ) %7B%0A%0A%09%09%09%09if ( event.touches.length %3D%3D 1 ) %7B%0A%0A%09%09%09%09%09event.preventDefault()%3B%0A%0A%09%09%09%09%09mouse.x %3D event.touches%5B0%5D.pageX%3B%0A%09%09%09%09%09mouse.y %3D event.touches%5B0%5D.pageY%3B%0A%0A%09%09%09%09%7D%0A%0A%09%09%09%7D%0A%0A%09%09%09function onDocumentTouchEnd( event ) %7B%0A%0A%09%09%09%09if ( event.touches.length %3D%3D 0 ) %7B%0A%0A%09%09%09%09%09isMouseDown %3D false%3B%0A%09%09%09%09%7D%0A%0A%09%09%09%7D%0A%09%09%09function onWindowDeviceOrientation( event ) %7B%0A%0A%09%09%09%09%2F%2F if mobile%0A%09%09%09%09if( %2FAndroid%7CwebOS%7CiPhone%7CiPad%7CiPod%7CBlackBerry%2Fi.test(navigator.userAgent) ) %7B%0A%0A%09%09%09%09%09if (%24(window).width() > %24(window).height())%7B%0A%09%09%09%09%09%09%2F%2Flandscape%0A%09%09%09%09%09if ( event.beta ) %7B%0A%09%09%0A%09%09%09%09%09%09%09gravity.y %3D -1 * (Math.sin( event.gamma * Math.PI %2F 180 ))%3B%0A%09%09%09%09%09%09%09gravity.x %3D (event.beta * Math.PI %2F 180 )%3B%0A%09%09%0A%09%09%09%09%09%09%7D%0A%09%09%09%09%09%0A%09%0A%09%09%09%09%09%7Delse%7B%0A%09%09%09%09%09%09%2F%2Fportrait%0A%09%09%09%09%09%09if ( event.beta ) %7B%0A%09%09%0A%09%09%09%09%09%09%09gravity.x %3D Math.sin( event.gamma * Math.PI %2F 180 )%3B%0A%09%09%09%09%09%09%09gravity.y %3D event.beta * Math.PI %2F 180 %3B%0A%09%09%0A%09%09%09%09%09%09%7D%0A%09%09%09%09%09%7D%0A%09%09%09%09%7Delse%7B%0A%09%09%09%09%0A%09%09%09%09%09if ( event.beta ) %7B%0A%09%09%0A%09%09%09%09%09%09gravity.x %3D Math.sin( event.gamma * Math.PI %2F 180 )%3B%0A%09%09%09%09%09%09gravity.y %3D ( Math.PI %2F 4 ) %2B event.beta * Math.PI %2F 180 %3B%0A%09%09%0A%09%09%09%09%09%7D%0A%09%09%09%09%7D%0A%09%09%09%09%0A%0A%09%09%09%7D%0A%0A%09%09%09%2F%2F%0A%0A%09%09%09function onElementMouseDown( event ) %7B%0A%0A%09%09%09%09event.preventDefault()%3B%0A%0A%09%09%09%09mouseOnClick%5B0%5D %3D event.clientX%3B%0A%09%09%09%09mouseOnClick%5B1%5D %3D event.clientY%3B%0A%0A%09%09%09%7D%0A%0A%09%09%09function onElementMouseUp( event ) %7B%0A%0A%09%09%09%09event.preventDefault()%3B%0A%0A%09%09%09%7D%0A%0A%09%09%09function onElementClick( event ) %7B%0A%0A%09%09%09%09var range %3D 5%3B%0A%0A%09%09%09%09if ( mouseOnClick%5B0%5D > event.clientX %2B range %7C%7C mouseOnClick%5B0%5D < event.clientX - range %26%26%0A%09%09%09%09     mouseOnClick%5B1%5D > event.clientY %2B range %7C%7C mouseOnClick%5B1%5D < event.clientY - range ) %7B%0A%0A%09%09%09%09%09event.preventDefault()%3B%0A%0A%09%09%09%09%7D%0A%0A%09%09%09%09if ( event.target %3D%3D document.getElementById( 'btnG' ) ) search()%3B%0A%09%09%09%09if ( event.target %3D%3D document.getElementById( 'btnI' ) ) imFeelingLucky()%3B%0A%09%09%09%09if ( event.target %3D%3D document.getElementById( 'q' ) ) document.getElementById('q').focus()%3B%0A%0A%09%09%09%7D%0A%0A%09%09%09%2F%2F API STUFF%0A%0A%09%09%09%0A%0A%09%09%09function loop() %7B%0A%0A%09%09%09%09if (getBrowserDimensions())%0A%09%09%09%09%09setWalls()%3B%0A%0A%09%09%09%09delta%5B0%5D %2B%3D (0 - delta%5B0%5D) * .5%3B%0A%09%09%09%09delta%5B1%5D %2B%3D (0 - delta%5B1%5D) * .5%3B%0A%0A%09%09%09%09world.m_gravity.x %3D gravity.x * 350 %2B delta%5B0%5D%3B%0A%09%09%09%09world.m_gravity.y %3D gravity.y * 350 %2B delta%5B1%5D%3B%0A%0A%09%09%09%09mouseDrag()%3B%0A%09%09%09%09world.Step(timeStep%2C iterations)%3B%0A%0A%09%09%09%09for ( i %3D 0%3B i < elements.length%3B i%2B%2B ) %7B%0A%0A%09%09%09%09%09var body %3D bodies%5Bi%5D%3B%0A%09%09%09%09%09var element %3D elements%5Bi%5D%3B%0A%0A%09%09%09%09%09element.style.left %3D (body.m_position0.x - (properties%5Bi%5D%5B2%5D >> 1)) %2B 'px'%3B%0A%09%09%09%09%09element.style.top %3D (body.m_position0.y - (properties%5Bi%5D%5B3%5D >> 1)) %2B 'px'%3B%0A%0A%09%09%09%09%09var style %3D 'rotate(' %2B (body.m_rotation0 * 57.2957795) %2B 'deg)'%3B%0A%0A%09%09%09%09%09element.style.transform %3D style%3B%0A%09%09%09%09%09element.style.WebkitTransform %3D style %2B ' translateZ(0)'%3B %2F%2F Force HW Acceleration%0A%09%09%09%09%09element.style.MozTransform %3D style%3B%0A%09%09%09%09%09element.style.OTransform %3D style%3B%0A%09%09%09%09%09element.style.msTransform %3D style%3B%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%0A%0A%09%09%09%2F%2F .. BOX2D UTILS%0A%0A%09%09%09function createBox(world%2C x%2C y%2C width%2C height%2C fixed%2C element) %7B%0A%0A%09%09%09%09if (typeof(fixed) %3D%3D 'undefined')%0A%09%09%09%09%09fixed %3D true%3B%0A%0A%09%09%09%09var boxSd %3D new b2BoxDef()%3B%0A%0A%09%09%09%09if (!fixed)%0A%09%09%09%09%09boxSd.density %3D 1.0%3B%0A%0A%09%09%09%09boxSd.extents.Set(width%2C height)%3B%0A%0A%09%09%09%09var boxBd %3D new b2BodyDef()%3B%0A%09%09%09%09boxBd.AddShape(boxSd)%3B%0A%09%09%09%09boxBd.position.Set(x%2Cy)%3B%0A%09%09%09%09boxBd.userData %3D %7Belement%3A element%7D%3B%0A%0A%09%09%09%09return world.CreateBody(boxBd)%0A%09%09%09%7D%0A%0A%09%09%09function mouseDrag() %7B%0A%0A%09%09%09%09%2F%2F mouse press%0A%09%09%09%09if (isMouseDown %26%26 !mouseJoint) %7B%0A%0A%09%09%09%09%09var body %3D getBodyAtMouse()%3B%0A%0A%09%09%09%09%09if (body) %7B%0A%0A%09%09%09%09%09%09var md %3D new b2MouseJointDef()%3B%0A%09%09%09%09%09%09md.body1 %3D world.m_groundBody%3B%0A%09%09%09%09%09%09md.body2 %3D body%3B%0A%09%09%09%09%09%09md.target.Set(mouse.x%2C mouse.y)%3B%0A%09%09%09%09%09%09md.maxForce %3D 30000.0 * body.m_mass%3B%0A%09%09%09%09%09%09md.timeStep %3D timeStep%3B%0A%09%09%09%09%09%09mouseJoint %3D world.CreateJoint(md)%3B%0A%09%09%09%09%09%09body.WakeUp()%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%7D%0A%0A%09%09%09%09%2F%2F mouse release%0A%09%09%09%09if (!isMouseDown) %7B%0A%0A%09%09%09%09%09if (mouseJoint) %7B%0A%0A%09%09%09%09%09%09world.DestroyJoint(mouseJoint)%3B%0A%09%09%09%09%09%09mouseJoint %3D null%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%7D%0A%0A%09%09%09%09%2F%2F mouse move%0A%09%09%09%09if (mouseJoint) %7B%0A%0A%09%09%09%09%09var p2 %3D new b2Vec2(mouse.x%2C mouse.y)%3B%0A%09%09%09%09%09mouseJoint.SetTarget(p2)%3B%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%0A%09%09%09function getBodyAtMouse() %7B%0A%0A%09%09%09%09%2F%2F Make a small box.%0A%09%09%09%09var mousePVec %3D new b2Vec2()%3B%0A%09%09%09%09mousePVec.Set(mouse.x%2C mouse.y)%3B%0A%0A%09%09%09%09var aabb %3D new b2AABB()%3B%0A%09%09%09%09aabb.minVertex.Set(mouse.x - 1%2C mouse.y - 1)%3B%0A%09%09%09%09aabb.maxVertex.Set(mouse.x %2B 1%2C mouse.y %2B 1)%3B%0A%0A%09%09%09%09%2F%2F Query the world for overlapping shapes.%0A%09%09%09%09var k_maxCount %3D 10%3B%0A%09%09%09%09var shapes %3D %5B%5D%3B%0A%09%09%09%09var count %3D world.Query(aabb%2C shapes%2C k_maxCount)%3B%0A%09%09%09%09var body %3D null%3B%0A%0A%09%09%09%09for ( var i %3D 0%3B i < count%3B i %2B%2B ) %7B%0A%0A%09%09%09%09%09if (shapes%5Bi%5D.m_body.IsStatic() %3D%3D false) %7B%0A%0A%09%09%09%09%09%09if ( shapes%5Bi%5D.TestPoint(mousePVec) ) %7B%0A%0A%09%09%09%09%09%09%09body %3D shapes%5Bi%5D.m_body%3B%0A%09%09%09%09%09%09%09break%3B%0A%09%09%09%09%09%09%7D%0A%09%09%09%09%09%7D%0A%09%09%09%09%7D%0A%0A%09%09%09%09return body%3B%0A%09%09%09%7D%0A%0A%09%09%09function setWalls() %7B%0A%0A%09%09%09%09if (wallsSetted) %7B%0A%0A%09%09%09%09%09world.DestroyBody(walls%5B0%5D)%3B%0A%09%09%09%09%09world.DestroyBody(walls%5B1%5D)%3B%0A%09%09%09%09%09world.DestroyBody(walls%5B2%5D)%3B%0A%09%09%09%09%09world.DestroyBody(walls%5B3%5D)%3B%0A%0A%09%09%09%09%09walls%5B0%5D %3D null%3B %0A%09%09%09%09%09walls%5B1%5D %3D null%3B%0A%09%09%09%09%09walls%5B2%5D %3D null%3B%0A%09%09%09%09%09walls%5B3%5D %3D null%3B%0A%09%09%09%09%7D%0A%0A%09%09%09%09walls%5B0%5D %3D createBox(world%2C stage%5B2%5D %2F 2%2C - wall_thickness%2C stage%5B2%5D%2C wall_thickness)%3B%0A%09%09%09%09walls%5B1%5D %3D createBox(world%2C stage%5B2%5D %2F 2%2C stage%5B3%5D %2B wall_thickness%2C stage%5B2%5D%2C wall_thickness)%3B%0A%09%09%09%09walls%5B2%5D %3D createBox(world%2C - wall_thickness%2C stage%5B3%5D %2F 2%2C wall_thickness%2C stage%5B3%5D)%3B%0A%09%09%09%09walls%5B3%5D %3D createBox(world%2C stage%5B2%5D %2B wall_thickness%2C stage%5B3%5D %2F 2%2C wall_thickness%2C stage%5B3%5D)%3B%09%0A%0A%09%09%09%09wallsSetted %3D true%3B%0A%0A%09%09%09%7D%0A%0A%09%09%09%2F%2F .. UTILS%0A%0A%09%09%09function getElementsByClass( searchClass ) %7B%0A%0A%09%09%09%09var classElements %3D %5B%5D%3B%0A%09%09%09%09var els %3D document.getElementsByTagName('*')%3B%0A%09%09%09%09var elsLen %3D els.length%0A%0A%09%09%09%09for (i %3D 0%2C j %3D 0%3B i < elsLen%3B i%2B%2B) %7B%0A%0A%09%09%09%09%09var classes %3D String(els%5Bi%5D.className).split(' ')%3B%0A%09%09%09%09%09for (k %3D 0%3B k < classes.length%3B k%2B%2B)%0A%09%09%09%09%09%09if ( classes%5Bk%5D %3D%3D searchClass )%0A%09%09%09%09%09%09%09classElements%5Bj%2B%2B%5D %3D els%5Bi%5D%3B%0A%09%09%09%09%7D%0A%0A%09%09%09%09return classElements%3B%0A%09%09%09%7D%0A%0A%09%09%09function getElementProperties( element ) %7B%0A%0A%09%09%09%09var x %3D 0%3B%0A%09%09%09%09var y %3D 0%3B%0A%09%09%09%09var width %3D element.offsetWidth%3B%0A%09%09%09%09var height %3D element.offsetHeight%3B%0A%0A%09%09%09%09do %7B%0A%0A%09%09%09%09%09x %2B%3D element.offsetLeft%3B%0A%09%09%09%09%09y %2B%3D element.offsetTop%3B%0A%0A%09%09%09%09%7D while ( element %3D element.offsetParent )%3B%0A%0A%09%09%09%09return %5B x%2C y%2C width%2C height %5D%3B%0A%09%09%09%7D%0A%0A%09%09%09function getBrowserDimensions() %7B%0A%0A%09%09%09%09var changed %3D false%3B%0A%0A%09%09%09%09if ( stage%5B0%5D !%3D window.screenX ) %7B%0A%0A%09%09%09%09%09delta%5B0%5D %3D (window.screenX - stage%5B0%5D) * 50%3B%0A%09%09%09%09%09stage%5B0%5D %3D window.screenX%3B%0A%09%09%09%09%09changed %3D true%3B%0A%09%09%09%09%7D%0A%0A%09%09%09%09if ( stage%5B1%5D !%3D window.screenY ) %7B%0A%0A%09%09%09%09%09delta%5B1%5D %3D (window.screenY - stage%5B1%5D) * 50%3B%0A%09%09%09%09%09stage%5B1%5D %3D window.screenY%3B%0A%09%09%09%09%09changed %3D true%3B%0A%09%09%09%09%7D%0A%0A%09%09%09%09if ( stage%5B2%5D !%3D window.innerWidth ) %7B%0A%0A%09%09%09%09%09stage%5B2%5D %3D window.innerWidth%3B%0A%09%09%09%09%09changed %3D true%3B%0A%09%09%09%09%7D%0A%0A%09%09%09%09if ( stage%5B3%5D !%3D window.innerHeight ) %7B%0A%0A%09%09%09%09%09stage%5B3%5D %3D window.innerHeight%3B%0A%09%09%09%09%09changed %3D true%3B%0A%09%09%09%09%7D%0A%0A%09%09%09%09return changed%3B%0A%09%09%09%7D%0A%09%09%09%0A%09%09%09%0A%09%09%09function grav()%7B%0A%09%09%09%0A%09%09%09%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%0A%09%09%09%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%0A%09%09%09%2F%2F do stuff here so everything has gravity%0A%0A%24("html").css("overflow"%2C "hidden")%3B%0A%24("body").css("overflow"%2C "hidden")%3B%0A%09%0A%09%0A%24("img").each(function() %7B%0A%09if(%24(this).children().length < 1) %7B%0A%09%09%24(this).addClass("box2d")%3B%0A%09%09%24(this).css("zIndex"%2C "99")%3B%0A%09    %7D%0A%7D)%3B%09%0A%0A%24("div").each(function() %7B%0A%09if(%24(this).children().length < 1) %7B%0A    %09%24(this).addClass("box2d")%3B%0A    %09%24(this).css("position"%2C "relative")%3B%0A    %09%24(this).css("zIndex"%2C "99")%3B%0A    %7D%0A%7D)%3B%09%0A%0A%24("span").each(function() %7B%0A%09if(%24(this).children().length < 1) %7B%0A    %09%24(this).addClass("box2d")%3B%0A    %09%24(this).css("position"%2C "relative")%3B%0A    %09%24(this).css("zIndex"%2C "99")%3B%0A    %7D%0A%7D)%3B%09%0A%0A%24("a").each(function() %7B%0A%09if(%24(this).children().length < 1) %7B%0A    %09%24(this).addClass("box2d")%3B%0A    %09%24(this).css("position"%2C "relative")%3B%0A    %09%24(this).css("zIndex"%2C "99")%3B%0A    %7D%0A%7D)%3B%09%0A%0A%24("li").each(function() %7B%0A%09if(%24(this).children().length < 1) %7B%0A    %09%24(this).addClass("box2d")%3B%0A    %09%24(this).css("position"%2C "relative")%3B%0A    %09%24(this).css("zIndex"%2C "99")%3B%0A    %7D%0A%7D)%3B%09%0A%0A%24("ol").each(function() %7B%0A%09if(%24(this).children().length < 1) %7B%0A    %09%24(this).addClass("box2d")%3B%0A    %09%24(this).css("position"%2C "relative")%3B%0A    %09%24(this).css("zIndex"%2C "99")%3B%0A    %7D%0A%7D)%3B%09%0A%0A%0A%24("p").each(function() %7B%0A%09if(%24(this).children().length < 1) %7B%0A    %09%24(this).addClass("box2d")%3B%0A    %09%24(this).css("position"%2C "relative")%3B%0A    %09%24(this).css("zIndex"%2C "99")%3B%0A    %7D%0A%7D)%3B%09%0A%0A%24("embed").each(function() %7B%0A%09if(%24(this).children().length < 1) %7B%0A    %09%24(this).addClass("box2d")%3B%0A    %09%24(this).css("position"%2C "relative")%3B%0A    %09%24(this).css("zIndex"%2C "99")%3B%0A    %7D%0A%7D)%3B%09%0A%09%09%09%0A%09%09%09%7D%7D)()%3B
```
